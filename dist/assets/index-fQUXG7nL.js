function LE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function cv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dv={exports:{}},nu={},hv={exports:{}},Z={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oo=Symbol.for("react.element"),FE=Symbol.for("react.portal"),UE=Symbol.for("react.fragment"),BE=Symbol.for("react.strict_mode"),zE=Symbol.for("react.profiler"),$E=Symbol.for("react.provider"),WE=Symbol.for("react.context"),qE=Symbol.for("react.forward_ref"),HE=Symbol.for("react.suspense"),GE=Symbol.for("react.memo"),KE=Symbol.for("react.lazy"),yp=Symbol.iterator;function QE(t){return t===null||typeof t!="object"?null:(t=yp&&t[yp]||t["@@iterator"],typeof t=="function"?t:null)}var fv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mv=Object.assign,pv={};function ei(t,e,n){this.props=t,this.context=e,this.refs=pv,this.updater=n||fv}ei.prototype.isReactComponent={};ei.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ei.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gv(){}gv.prototype=ei.prototype;function yh(t,e,n){this.props=t,this.context=e,this.refs=pv,this.updater=n||fv}var vh=yh.prototype=new gv;vh.constructor=yh;mv(vh,ei.prototype);vh.isPureReactComponent=!0;var vp=Array.isArray,yv=Object.prototype.hasOwnProperty,_h={current:null},vv={key:!0,ref:!0,__self:!0,__source:!0};function _v(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)yv.call(e,r)&&!vv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Oo,type:t,key:i,ref:o,props:s,_owner:_h.current}}function YE(t,e){return{$$typeof:Oo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oo}function XE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _p=/\/+/g;function dc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XE(""+t.key):e.toString(36)}function Wa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Oo:case FE:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+dc(o,0):r,vp(s)?(n="",t!=null&&(n=t.replace(_p,"$&/")+"/"),Wa(s,e,n,"",function(d){return d})):s!=null&&(wh(s)&&(s=YE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(_p,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",vp(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+dc(i,l);o+=Wa(i,e,n,u,s)}else if(u=QE(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+dc(i,l++),o+=Wa(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ea(t,e,n){if(t==null)return t;var r=[],s=0;return Wa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function JE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},qa={transition:null},ZE={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:qa,ReactCurrentOwner:_h};function wv(){throw Error("act(...) is not supported in production builds of React.")}Z.Children={map:Ea,forEach:function(t,e,n){Ea(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ea(t,function(){e++}),e},toArray:function(t){return Ea(t,function(e){return e})||[]},only:function(t){if(!wh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Z.Component=ei;Z.Fragment=UE;Z.Profiler=zE;Z.PureComponent=yh;Z.StrictMode=BE;Z.Suspense=HE;Z.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZE;Z.act=wv;Z.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=mv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=_h.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)yv.call(e,u)&&!vv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Oo,type:t.type,key:s,ref:i,props:r,_owner:o}};Z.createContext=function(t){return t={$$typeof:WE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$E,_context:t},t.Consumer=t};Z.createElement=_v;Z.createFactory=function(t){var e=_v.bind(null,t);return e.type=t,e};Z.createRef=function(){return{current:null}};Z.forwardRef=function(t){return{$$typeof:qE,render:t}};Z.isValidElement=wh;Z.lazy=function(t){return{$$typeof:KE,_payload:{_status:-1,_result:t},_init:JE}};Z.memo=function(t,e){return{$$typeof:GE,type:t,compare:e===void 0?null:e}};Z.startTransition=function(t){var e=qa.transition;qa.transition={};try{t()}finally{qa.transition=e}};Z.unstable_act=wv;Z.useCallback=function(t,e){return mt.current.useCallback(t,e)};Z.useContext=function(t){return mt.current.useContext(t)};Z.useDebugValue=function(){};Z.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};Z.useEffect=function(t,e){return mt.current.useEffect(t,e)};Z.useId=function(){return mt.current.useId()};Z.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};Z.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};Z.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};Z.useMemo=function(t,e){return mt.current.useMemo(t,e)};Z.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};Z.useRef=function(t){return mt.current.useRef(t)};Z.useState=function(t){return mt.current.useState(t)};Z.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};Z.useTransition=function(){return mt.current.useTransition()};Z.version="18.3.1";hv.exports=Z;var O=hv.exports;const xh=cv(O),eT=LE({__proto__:null,default:xh},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT=O,nT=Symbol.for("react.element"),rT=Symbol.for("react.fragment"),sT=Object.prototype.hasOwnProperty,iT=tT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oT={key:!0,ref:!0,__self:!0,__source:!0};function xv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sT.call(e,r)&&!oT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:nT,type:t,key:i,ref:o,props:s,_owner:iT.current}}nu.Fragment=rT;nu.jsx=xv;nu.jsxs=xv;dv.exports=nu;var c=dv.exports,Jc={},Ev={exports:{}},Nt={},Tv={exports:{}},Iv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,X){var J=$.length;$.push(X);e:for(;0<J;){var _e=J-1>>>1,ue=$[_e];if(0<s(ue,X))$[_e]=X,$[J]=ue,J=_e;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var X=$[0],J=$.pop();if(J!==X){$[0]=J;e:for(var _e=0,ue=$.length,ke=ue>>>1;_e<ke;){var un=2*(_e+1)-1,cn=$[un],dn=un+1,hn=$[dn];if(0>s(cn,J))dn<ue&&0>s(hn,cn)?($[_e]=hn,$[dn]=J,_e=dn):($[_e]=cn,$[un]=J,_e=un);else if(dn<ue&&0>s(hn,J))$[_e]=hn,$[dn]=J,_e=dn;else break e}}return X}function s($,X){var J=$.sortIndex-X.sortIndex;return J!==0?J:$.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,g=3,_=!1,I=!1,T=!1,N=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k($){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=$)r(d),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(d)}}function j($){if(T=!1,k($),!I)if(n(u)!==null)I=!0,hi(V);else{var X=n(d);X!==null&&ln(j,X.startTime-$)}}function V($,X){I=!1,T&&(T=!1,E(v),v=-1),_=!0;var J=g;try{for(k(X),p=n(u);p!==null&&(!(p.expirationTime>X)||$&&!P());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,g=p.priorityLevel;var ue=_e(p.expirationTime<=X);X=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(u)&&r(u),k(X)}else r(u);p=n(u)}if(p!==null)var ke=!0;else{var un=n(d);un!==null&&ln(j,un.startTime-X),ke=!1}return ke}finally{p=null,g=J,_=!1}}var U=!1,b=null,v=-1,x=5,S=-1;function P(){return!(t.unstable_now()-S<x)}function R(){if(b!==null){var $=t.unstable_now();S=$;var X=!0;try{X=b(!0,$)}finally{X?A():(U=!1,b=null)}}else U=!1}var A;if(typeof w=="function")A=function(){w(R)};else if(typeof MessageChannel<"u"){var Ct=new MessageChannel,Er=Ct.port2;Ct.port1.onmessage=R,A=function(){Er.postMessage(null)}}else A=function(){N(R,0)};function hi($){b=$,U||(U=!0,A())}function ln($,X){v=N(function(){$(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){I||_||(I=!0,hi(V))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var J=g;g=X;try{return $()}finally{g=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,X){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=g;g=$;try{return X()}finally{g=J}},t.unstable_scheduleCallback=function($,X,J){var _e=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?_e+J:_e):J=_e,$){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=J+ue,$={id:f++,callback:X,priorityLevel:$,startTime:J,expirationTime:ue,sortIndex:-1},J>_e?($.sortIndex=J,e(d,$),n(u)===null&&$===n(d)&&(T?(E(v),v=-1):T=!0,ln(j,J-_e))):($.sortIndex=ue,e(u,$),I||_||(I=!0,hi(V))),$},t.unstable_shouldYield=P,t.unstable_wrapCallback=function($){var X=g;return function(){var J=g;g=X;try{return $.apply(this,arguments)}finally{g=J}}}})(Iv);Tv.exports=Iv;var aT=Tv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT=O,kt=aT;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bv=new Set,oo={};function Jr(t,e){Ls(t,e),Ls(t+"Capture",e)}function Ls(t,e){for(oo[t]=e,t=0;t<e.length;t++)bv.add(e[t])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zc=Object.prototype.hasOwnProperty,uT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wp={},xp={};function cT(t){return Zc.call(xp,t)?!0:Zc.call(wp,t)?!1:uT.test(t)?xp[t]=!0:(wp[t]=!0,!1)}function dT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hT(t,e,n,r){if(e===null||typeof e>"u"||dT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Eh=/[\-:]([a-z])/g;function Th(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Eh,Th);Ye[e]=new pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Eh,Th);Ye[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Eh,Th);Ye[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ih(t,e,n,r){var s=Ye.hasOwnProperty(e)?Ye[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hT(e,n,s,r)&&(n=null),r||s===null?cT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var jn=lT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ta=Symbol.for("react.element"),ps=Symbol.for("react.portal"),gs=Symbol.for("react.fragment"),bh=Symbol.for("react.strict_mode"),ed=Symbol.for("react.profiler"),Sv=Symbol.for("react.provider"),kv=Symbol.for("react.context"),Sh=Symbol.for("react.forward_ref"),td=Symbol.for("react.suspense"),nd=Symbol.for("react.suspense_list"),kh=Symbol.for("react.memo"),Bn=Symbol.for("react.lazy"),Nv=Symbol.for("react.offscreen"),Ep=Symbol.iterator;function Si(t){return t===null||typeof t!="object"?null:(t=Ep&&t[Ep]||t["@@iterator"],typeof t=="function"?t:null)}var Ee=Object.assign,hc;function Li(t){if(hc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hc=e&&e[1]||""}return`
`+hc+t}var fc=!1;function mc(t,e){if(!t||fc)return"";fc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{fc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Li(t):""}function fT(t){switch(t.tag){case 5:return Li(t.type);case 16:return Li("Lazy");case 13:return Li("Suspense");case 19:return Li("SuspenseList");case 0:case 2:case 15:return t=mc(t.type,!1),t;case 11:return t=mc(t.type.render,!1),t;case 1:return t=mc(t.type,!0),t;default:return""}}function rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gs:return"Fragment";case ps:return"Portal";case ed:return"Profiler";case bh:return"StrictMode";case td:return"Suspense";case nd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kv:return(t.displayName||"Context")+".Consumer";case Sv:return(t._context.displayName||"Context")+".Provider";case Sh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case kh:return e=t.displayName||null,e!==null?e:rd(t.type)||"Memo";case Bn:e=t._payload,t=t._init;try{return rd(t(e))}catch{}}return null}function mT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rd(e);case 8:return e===bh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Av(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pT(t){var e=Av(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ia(t){t._valueTracker||(t._valueTracker=pT(t))}function Pv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Av(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sd(t,e){var n=e.checked;return Ee({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Cv(t,e){e=e.checked,e!=null&&Ih(t,"checked",e,!1)}function id(t,e){Cv(t,e);var n=dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?od(t,e.type,n):e.hasOwnProperty("defaultValue")&&od(t,e.type,dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ip(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function od(t,e,n){(e!=="number"||dl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fi=Array.isArray;function Ns(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+dr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ad(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ee({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function bp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Fi(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:dr(n)}}function Rv(t,e){var n=dr(e.value),r=dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ld(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ba,Dv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ba=ba||document.createElement("div"),ba.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ba.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ao(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gT=["Webkit","ms","Moz","O"];Object.keys(qi).forEach(function(t){gT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qi[e]=qi[t]})});function Ov(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qi.hasOwnProperty(t)&&qi[t]?(""+e).trim():e+"px"}function Mv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ov(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var yT=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ud(t,e){if(e){if(yT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function cd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dd=null;function Nh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hd=null,As=null,Ps=null;function kp(t){if(t=Lo(t)){if(typeof hd!="function")throw Error(F(280));var e=t.stateNode;e&&(e=au(e),hd(t.stateNode,t.type,e))}}function Vv(t){As?Ps?Ps.push(t):Ps=[t]:As=t}function Lv(){if(As){var t=As,e=Ps;if(Ps=As=null,kp(t),e)for(t=0;t<e.length;t++)kp(e[t])}}function Fv(t,e){return t(e)}function Uv(){}var pc=!1;function Bv(t,e,n){if(pc)return t(e,n);pc=!0;try{return Fv(t,e,n)}finally{pc=!1,(As!==null||Ps!==null)&&(Uv(),Lv())}}function lo(t,e){var n=t.stateNode;if(n===null)return null;var r=au(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var fd=!1;if(bn)try{var ki={};Object.defineProperty(ki,"passive",{get:function(){fd=!0}}),window.addEventListener("test",ki,ki),window.removeEventListener("test",ki,ki)}catch{fd=!1}function vT(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Hi=!1,hl=null,fl=!1,md=null,_T={onError:function(t){Hi=!0,hl=t}};function wT(t,e,n,r,s,i,o,l,u){Hi=!1,hl=null,vT.apply(_T,arguments)}function xT(t,e,n,r,s,i,o,l,u){if(wT.apply(this,arguments),Hi){if(Hi){var d=hl;Hi=!1,hl=null}else throw Error(F(198));fl||(fl=!0,md=d)}}function Zr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function zv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Np(t){if(Zr(t)!==t)throw Error(F(188))}function ET(t){var e=t.alternate;if(!e){if(e=Zr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Np(s),t;if(i===r)return Np(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function $v(t){return t=ET(t),t!==null?Wv(t):null}function Wv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wv(t);if(e!==null)return e;t=t.sibling}return null}var qv=kt.unstable_scheduleCallback,Ap=kt.unstable_cancelCallback,TT=kt.unstable_shouldYield,IT=kt.unstable_requestPaint,Ae=kt.unstable_now,bT=kt.unstable_getCurrentPriorityLevel,Ah=kt.unstable_ImmediatePriority,Hv=kt.unstable_UserBlockingPriority,ml=kt.unstable_NormalPriority,ST=kt.unstable_LowPriority,Gv=kt.unstable_IdlePriority,ru=null,en=null;function kT(t){if(en&&typeof en.onCommitFiberRoot=="function")try{en.onCommitFiberRoot(ru,t,void 0,(t.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:PT,NT=Math.log,AT=Math.LN2;function PT(t){return t>>>=0,t===0?32:31-(NT(t)/AT|0)|0}var Sa=64,ka=4194304;function Ui(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Ui(l):(i&=o,i!==0&&(r=Ui(i)))}else o=n&~s,o!==0?r=Ui(o):i!==0&&(r=Ui(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-qt(e),s=1<<n,r|=t[n],e&=~s;return r}function CT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-qt(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=CT(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function pd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kv(){var t=Sa;return Sa<<=1,!(Sa&4194240)&&(Sa=64),t}function gc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-qt(e),t[e]=n}function jT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-qt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Ph(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-qt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var le=0;function Qv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yv,Ch,Xv,Jv,Zv,gd=!1,Na=[],Zn=null,er=null,tr=null,uo=new Map,co=new Map,$n=[],DT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pp(t,e){switch(t){case"focusin":case"focusout":Zn=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":uo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":co.delete(e.pointerId)}}function Ni(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Lo(e),e!==null&&Ch(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function OT(t,e,n,r,s){switch(e){case"focusin":return Zn=Ni(Zn,t,e,n,r,s),!0;case"dragenter":return er=Ni(er,t,e,n,r,s),!0;case"mouseover":return tr=Ni(tr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return uo.set(i,Ni(uo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,co.set(i,Ni(co.get(i)||null,t,e,n,r,s)),!0}return!1}function e0(t){var e=Cr(t.target);if(e!==null){var n=Zr(e);if(n!==null){if(e=n.tag,e===13){if(e=zv(n),e!==null){t.blockedOn=e,Zv(t.priority,function(){Xv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ha(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dd=r,n.target.dispatchEvent(r),dd=null}else return e=Lo(n),e!==null&&Ch(e),t.blockedOn=n,!1;e.shift()}return!0}function Cp(t,e,n){Ha(t)&&n.delete(e)}function MT(){gd=!1,Zn!==null&&Ha(Zn)&&(Zn=null),er!==null&&Ha(er)&&(er=null),tr!==null&&Ha(tr)&&(tr=null),uo.forEach(Cp),co.forEach(Cp)}function Ai(t,e){t.blockedOn===e&&(t.blockedOn=null,gd||(gd=!0,kt.unstable_scheduleCallback(kt.unstable_NormalPriority,MT)))}function ho(t){function e(s){return Ai(s,t)}if(0<Na.length){Ai(Na[0],t);for(var n=1;n<Na.length;n++){var r=Na[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zn!==null&&Ai(Zn,t),er!==null&&Ai(er,t),tr!==null&&Ai(tr,t),uo.forEach(e),co.forEach(e),n=0;n<$n.length;n++)r=$n[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$n.length&&(n=$n[0],n.blockedOn===null);)e0(n),n.blockedOn===null&&$n.shift()}var Cs=jn.ReactCurrentBatchConfig,gl=!0;function VT(t,e,n,r){var s=le,i=Cs.transition;Cs.transition=null;try{le=1,Rh(t,e,n,r)}finally{le=s,Cs.transition=i}}function LT(t,e,n,r){var s=le,i=Cs.transition;Cs.transition=null;try{le=4,Rh(t,e,n,r)}finally{le=s,Cs.transition=i}}function Rh(t,e,n,r){if(gl){var s=yd(t,e,n,r);if(s===null)Sc(t,e,r,yl,n),Pp(t,r);else if(OT(s,t,e,n,r))r.stopPropagation();else if(Pp(t,r),e&4&&-1<DT.indexOf(t)){for(;s!==null;){var i=Lo(s);if(i!==null&&Yv(i),i=yd(t,e,n,r),i===null&&Sc(t,e,r,yl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Sc(t,e,r,null,n)}}var yl=null;function yd(t,e,n,r){if(yl=null,t=Nh(r),t=Cr(t),t!==null)if(e=Zr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=zv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return yl=t,null}function t0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bT()){case Ah:return 1;case Hv:return 4;case ml:case ST:return 16;case Gv:return 536870912;default:return 16}default:return 16}}var Qn=null,jh=null,Ga=null;function n0(){if(Ga)return Ga;var t,e=jh,n=e.length,r,s="value"in Qn?Qn.value:Qn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ga=s.slice(t,1<r?1-r:void 0)}function Ka(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Aa(){return!0}function Rp(){return!1}function At(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Aa:Rp,this.isPropagationStopped=Rp,this}return Ee(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),e}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dh=At(ti),Vo=Ee({},ti,{view:0,detail:0}),FT=At(Vo),yc,vc,Pi,su=Ee({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Pi&&(Pi&&t.type==="mousemove"?(yc=t.screenX-Pi.screenX,vc=t.screenY-Pi.screenY):vc=yc=0,Pi=t),yc)},movementY:function(t){return"movementY"in t?t.movementY:vc}}),jp=At(su),UT=Ee({},su,{dataTransfer:0}),BT=At(UT),zT=Ee({},Vo,{relatedTarget:0}),_c=At(zT),$T=Ee({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),WT=At($T),qT=Ee({},ti,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HT=At(qT),GT=Ee({},ti,{data:0}),Dp=At(GT),KT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=YT[t])?!!e[t]:!1}function Oh(){return XT}var JT=Ee({},Vo,{key:function(t){if(t.key){var e=KT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ka(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?QT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oh,charCode:function(t){return t.type==="keypress"?Ka(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ka(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZT=At(JT),eI=Ee({},su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Op=At(eI),tI=Ee({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oh}),nI=At(tI),rI=Ee({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),sI=At(rI),iI=Ee({},su,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oI=At(iI),aI=[9,13,27,32],Mh=bn&&"CompositionEvent"in window,Gi=null;bn&&"documentMode"in document&&(Gi=document.documentMode);var lI=bn&&"TextEvent"in window&&!Gi,r0=bn&&(!Mh||Gi&&8<Gi&&11>=Gi),Mp=" ",Vp=!1;function s0(t,e){switch(t){case"keyup":return aI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function i0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ys=!1;function uI(t,e){switch(t){case"compositionend":return i0(e);case"keypress":return e.which!==32?null:(Vp=!0,Mp);case"textInput":return t=e.data,t===Mp&&Vp?null:t;default:return null}}function cI(t,e){if(ys)return t==="compositionend"||!Mh&&s0(t,e)?(t=n0(),Ga=jh=Qn=null,ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return r0&&e.locale!=="ko"?null:e.data;default:return null}}var dI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dI[t.type]:e==="textarea"}function o0(t,e,n,r){Vv(r),e=vl(e,"onChange"),0<e.length&&(n=new Dh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ki=null,fo=null;function hI(t){y0(t,0)}function iu(t){var e=ws(t);if(Pv(e))return t}function fI(t,e){if(t==="change")return e}var a0=!1;if(bn){var wc;if(bn){var xc="oninput"in document;if(!xc){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),xc=typeof Fp.oninput=="function"}wc=xc}else wc=!1;a0=wc&&(!document.documentMode||9<document.documentMode)}function Up(){Ki&&(Ki.detachEvent("onpropertychange",l0),fo=Ki=null)}function l0(t){if(t.propertyName==="value"&&iu(fo)){var e=[];o0(e,fo,t,Nh(t)),Bv(hI,e)}}function mI(t,e,n){t==="focusin"?(Up(),Ki=e,fo=n,Ki.attachEvent("onpropertychange",l0)):t==="focusout"&&Up()}function pI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(fo)}function gI(t,e){if(t==="click")return iu(e)}function yI(t,e){if(t==="input"||t==="change")return iu(e)}function vI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kt=typeof Object.is=="function"?Object.is:vI;function mo(t,e){if(Kt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Zc.call(e,s)||!Kt(t[s],e[s]))return!1}return!0}function Bp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zp(t,e){var n=Bp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bp(n)}}function u0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?u0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function c0(){for(var t=window,e=dl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dl(t.document)}return e}function Vh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _I(t){var e=c0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&u0(n.ownerDocument.documentElement,n)){if(r!==null&&Vh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=zp(n,i);var o=zp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wI=bn&&"documentMode"in document&&11>=document.documentMode,vs=null,vd=null,Qi=null,_d=!1;function $p(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_d||vs==null||vs!==dl(r)||(r=vs,"selectionStart"in r&&Vh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Qi&&mo(Qi,r)||(Qi=r,r=vl(vd,"onSelect"),0<r.length&&(e=new Dh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=vs)))}function Pa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _s={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionend:Pa("Transition","TransitionEnd")},Ec={},d0={};bn&&(d0=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function ou(t){if(Ec[t])return Ec[t];if(!_s[t])return t;var e=_s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in d0)return Ec[t]=e[n];return t}var h0=ou("animationend"),f0=ou("animationiteration"),m0=ou("animationstart"),p0=ou("transitionend"),g0=new Map,Wp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(t,e){g0.set(t,e),Jr(e,[t])}for(var Tc=0;Tc<Wp.length;Tc++){var Ic=Wp[Tc],xI=Ic.toLowerCase(),EI=Ic[0].toUpperCase()+Ic.slice(1);yr(xI,"on"+EI)}yr(h0,"onAnimationEnd");yr(f0,"onAnimationIteration");yr(m0,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(p0,"onTransitionEnd");Ls("onMouseEnter",["mouseout","mouseover"]);Ls("onMouseLeave",["mouseout","mouseover"]);Ls("onPointerEnter",["pointerout","pointerover"]);Ls("onPointerLeave",["pointerout","pointerover"]);Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function qp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xT(r,e,void 0,t),t.currentTarget=null}function y0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;qp(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;qp(s,l,d),i=u}}}if(fl)throw t=md,fl=!1,md=null,t}function me(t,e){var n=e[Id];n===void 0&&(n=e[Id]=new Set);var r=t+"__bubble";n.has(r)||(v0(e,t,2,!1),n.add(r))}function bc(t,e,n){var r=0;e&&(r|=4),v0(n,t,r,e)}var Ca="_reactListening"+Math.random().toString(36).slice(2);function po(t){if(!t[Ca]){t[Ca]=!0,bv.forEach(function(n){n!=="selectionchange"&&(TI.has(n)||bc(n,!1,t),bc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ca]||(e[Ca]=!0,bc("selectionchange",!1,e))}}function v0(t,e,n,r){switch(t0(e)){case 1:var s=VT;break;case 4:s=LT;break;default:s=Rh}n=s.bind(null,e,n,t),s=void 0,!fd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Sc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Cr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Bv(function(){var d=i,f=Nh(n),p=[];e:{var g=g0.get(t);if(g!==void 0){var _=Dh,I=t;switch(t){case"keypress":if(Ka(n)===0)break e;case"keydown":case"keyup":_=ZT;break;case"focusin":I="focus",_=_c;break;case"focusout":I="blur",_=_c;break;case"beforeblur":case"afterblur":_=_c;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=jp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=BT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=nI;break;case h0:case f0:case m0:_=WT;break;case p0:_=sI;break;case"scroll":_=FT;break;case"wheel":_=oI;break;case"copy":case"cut":case"paste":_=HT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Op}var T=(e&4)!==0,N=!T&&t==="scroll",E=T?g!==null?g+"Capture":null:g;T=[];for(var w=d,k;w!==null;){k=w;var j=k.stateNode;if(k.tag===5&&j!==null&&(k=j,E!==null&&(j=lo(w,E),j!=null&&T.push(go(w,j,k)))),N)break;w=w.return}0<T.length&&(g=new _(g,I,null,n,f),p.push({event:g,listeners:T}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==dd&&(I=n.relatedTarget||n.fromElement)&&(Cr(I)||I[Sn]))break e;if((_||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,_?(I=n.relatedTarget||n.toElement,_=d,I=I?Cr(I):null,I!==null&&(N=Zr(I),I!==N||I.tag!==5&&I.tag!==6)&&(I=null)):(_=null,I=d),_!==I)){if(T=jp,j="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(T=Op,j="onPointerLeave",E="onPointerEnter",w="pointer"),N=_==null?g:ws(_),k=I==null?g:ws(I),g=new T(j,w+"leave",_,n,f),g.target=N,g.relatedTarget=k,j=null,Cr(f)===d&&(T=new T(E,w+"enter",I,n,f),T.target=k,T.relatedTarget=N,j=T),N=j,_&&I)t:{for(T=_,E=I,w=0,k=T;k;k=ls(k))w++;for(k=0,j=E;j;j=ls(j))k++;for(;0<w-k;)T=ls(T),w--;for(;0<k-w;)E=ls(E),k--;for(;w--;){if(T===E||E!==null&&T===E.alternate)break t;T=ls(T),E=ls(E)}T=null}else T=null;_!==null&&Hp(p,g,_,T,!1),I!==null&&N!==null&&Hp(p,N,I,T,!0)}}e:{if(g=d?ws(d):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var V=fI;else if(Lp(g))if(a0)V=yI;else{V=pI;var U=mI}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(V=gI);if(V&&(V=V(t,d))){o0(p,V,n,f);break e}U&&U(t,g,d),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&od(g,"number",g.value)}switch(U=d?ws(d):window,t){case"focusin":(Lp(U)||U.contentEditable==="true")&&(vs=U,vd=d,Qi=null);break;case"focusout":Qi=vd=vs=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,$p(p,n,f);break;case"selectionchange":if(wI)break;case"keydown":case"keyup":$p(p,n,f)}var b;if(Mh)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ys?s0(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(r0&&n.locale!=="ko"&&(ys||v!=="onCompositionStart"?v==="onCompositionEnd"&&ys&&(b=n0()):(Qn=f,jh="value"in Qn?Qn.value:Qn.textContent,ys=!0)),U=vl(d,v),0<U.length&&(v=new Dp(v,t,null,n,f),p.push({event:v,listeners:U}),b?v.data=b:(b=i0(n),b!==null&&(v.data=b)))),(b=lI?uI(t,n):cI(t,n))&&(d=vl(d,"onBeforeInput"),0<d.length&&(f=new Dp("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=b))}y0(p,e)})}function go(t,e,n){return{instance:t,listener:e,currentTarget:n}}function vl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=lo(t,n),i!=null&&r.unshift(go(t,i,s)),i=lo(t,e),i!=null&&r.push(go(t,i,s))),t=t.return}return r}function ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=lo(n,i),u!=null&&o.unshift(go(n,u,l))):s||(u=lo(n,i),u!=null&&o.push(go(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var II=/\r\n?/g,bI=/\u0000|\uFFFD/g;function Gp(t){return(typeof t=="string"?t:""+t).replace(II,`
`).replace(bI,"")}function Ra(t,e,n){if(e=Gp(e),Gp(t)!==e&&n)throw Error(F(425))}function _l(){}var wd=null,xd=null;function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Td=typeof setTimeout=="function"?setTimeout:void 0,SI=typeof clearTimeout=="function"?clearTimeout:void 0,Kp=typeof Promise=="function"?Promise:void 0,kI=typeof queueMicrotask=="function"?queueMicrotask:typeof Kp<"u"?function(t){return Kp.resolve(null).then(t).catch(NI)}:Td;function NI(t){setTimeout(function(){throw t})}function kc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ho(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ho(e)}function nr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ni=Math.random().toString(36).slice(2),Zt="__reactFiber$"+ni,yo="__reactProps$"+ni,Sn="__reactContainer$"+ni,Id="__reactEvents$"+ni,AI="__reactListeners$"+ni,PI="__reactHandles$"+ni;function Cr(t){var e=t[Zt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Sn]||n[Zt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Qp(t);t!==null;){if(n=t[Zt])return n;t=Qp(t)}return e}t=n,n=t.parentNode}return null}function Lo(t){return t=t[Zt]||t[Sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function au(t){return t[yo]||null}var bd=[],xs=-1;function vr(t){return{current:t}}function pe(t){0>xs||(t.current=bd[xs],bd[xs]=null,xs--)}function he(t,e){xs++,bd[xs]=t.current,t.current=e}var hr={},at=vr(hr),vt=vr(!1),Br=hr;function Fs(t,e){var n=t.type.contextTypes;if(!n)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function _t(t){return t=t.childContextTypes,t!=null}function wl(){pe(vt),pe(at)}function Yp(t,e,n){if(at.current!==hr)throw Error(F(168));he(at,e),he(vt,n)}function _0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,mT(t)||"Unknown",s));return Ee({},n,r)}function xl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Br=at.current,he(at,t),he(vt,vt.current),!0}function Xp(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=_0(t,e,Br),r.__reactInternalMemoizedMergedChildContext=t,pe(vt),pe(at),he(at,t)):pe(vt),he(vt,n)}var gn=null,lu=!1,Nc=!1;function w0(t){gn===null?gn=[t]:gn.push(t)}function CI(t){lu=!0,w0(t)}function _r(){if(!Nc&&gn!==null){Nc=!0;var t=0,e=le;try{var n=gn;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gn=null,lu=!1}catch(s){throw gn!==null&&(gn=gn.slice(t+1)),qv(Ah,_r),s}finally{le=e,Nc=!1}}return null}var Es=[],Ts=0,El=null,Tl=0,Rt=[],jt=0,zr=null,vn=1,_n="";function kr(t,e){Es[Ts++]=Tl,Es[Ts++]=El,El=t,Tl=e}function x0(t,e,n){Rt[jt++]=vn,Rt[jt++]=_n,Rt[jt++]=zr,zr=t;var r=vn;t=_n;var s=32-qt(r)-1;r&=~(1<<s),n+=1;var i=32-qt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,vn=1<<32-qt(e)+s|n<<s|r,_n=i+t}else vn=1<<i|n<<s|r,_n=t}function Lh(t){t.return!==null&&(kr(t,1),x0(t,1,0))}function Fh(t){for(;t===El;)El=Es[--Ts],Es[Ts]=null,Tl=Es[--Ts],Es[Ts]=null;for(;t===zr;)zr=Rt[--jt],Rt[jt]=null,_n=Rt[--jt],Rt[jt]=null,vn=Rt[--jt],Rt[jt]=null}var bt=null,Tt=null,ye=!1,Wt=null;function E0(t,e){var n=Dt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bt=t,Tt=nr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bt=t,Tt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zr!==null?{id:vn,overflow:_n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bt=t,Tt=null,!0):!1;default:return!1}}function Sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kd(t){if(ye){var e=Tt;if(e){var n=e;if(!Jp(t,e)){if(Sd(t))throw Error(F(418));e=nr(n.nextSibling);var r=bt;e&&Jp(t,e)?E0(r,n):(t.flags=t.flags&-4097|2,ye=!1,bt=t)}}else{if(Sd(t))throw Error(F(418));t.flags=t.flags&-4097|2,ye=!1,bt=t}}}function Zp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bt=t}function ja(t){if(t!==bt)return!1;if(!ye)return Zp(t),ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ed(t.type,t.memoizedProps)),e&&(e=Tt)){if(Sd(t))throw T0(),Error(F(418));for(;e;)E0(t,e),e=nr(e.nextSibling)}if(Zp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Tt=nr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Tt=null}}else Tt=bt?nr(t.stateNode.nextSibling):null;return!0}function T0(){for(var t=Tt;t;)t=nr(t.nextSibling)}function Us(){Tt=bt=null,ye=!1}function Uh(t){Wt===null?Wt=[t]:Wt.push(t)}var RI=jn.ReactCurrentBatchConfig;function Ci(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Da(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function eg(t){var e=t._init;return e(t._payload)}function I0(t){function e(E,w){if(t){var k=E.deletions;k===null?(E.deletions=[w],E.flags|=16):k.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=or(E,w),E.index=0,E.sibling=null,E}function i(E,w,k){return E.index=k,t?(k=E.alternate,k!==null?(k=k.index,k<w?(E.flags|=2,w):k):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,w,k,j){return w===null||w.tag!==6?(w=Oc(k,E.mode,j),w.return=E,w):(w=s(w,k),w.return=E,w)}function u(E,w,k,j){var V=k.type;return V===gs?f(E,w,k.props.children,j,k.key):w!==null&&(w.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Bn&&eg(V)===w.type)?(j=s(w,k.props),j.ref=Ci(E,w,k),j.return=E,j):(j=tl(k.type,k.key,k.props,null,E.mode,j),j.ref=Ci(E,w,k),j.return=E,j)}function d(E,w,k,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==k.containerInfo||w.stateNode.implementation!==k.implementation?(w=Mc(k,E.mode,j),w.return=E,w):(w=s(w,k.children||[]),w.return=E,w)}function f(E,w,k,j,V){return w===null||w.tag!==7?(w=Vr(k,E.mode,j,V),w.return=E,w):(w=s(w,k),w.return=E,w)}function p(E,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Oc(""+w,E.mode,k),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ta:return k=tl(w.type,w.key,w.props,null,E.mode,k),k.ref=Ci(E,null,w),k.return=E,k;case ps:return w=Mc(w,E.mode,k),w.return=E,w;case Bn:var j=w._init;return p(E,j(w._payload),k)}if(Fi(w)||Si(w))return w=Vr(w,E.mode,k,null),w.return=E,w;Da(E,w)}return null}function g(E,w,k,j){var V=w!==null?w.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return V!==null?null:l(E,w,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ta:return k.key===V?u(E,w,k,j):null;case ps:return k.key===V?d(E,w,k,j):null;case Bn:return V=k._init,g(E,w,V(k._payload),j)}if(Fi(k)||Si(k))return V!==null?null:f(E,w,k,j,null);Da(E,k)}return null}function _(E,w,k,j,V){if(typeof j=="string"&&j!==""||typeof j=="number")return E=E.get(k)||null,l(w,E,""+j,V);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ta:return E=E.get(j.key===null?k:j.key)||null,u(w,E,j,V);case ps:return E=E.get(j.key===null?k:j.key)||null,d(w,E,j,V);case Bn:var U=j._init;return _(E,w,k,U(j._payload),V)}if(Fi(j)||Si(j))return E=E.get(k)||null,f(w,E,j,V,null);Da(w,j)}return null}function I(E,w,k,j){for(var V=null,U=null,b=w,v=w=0,x=null;b!==null&&v<k.length;v++){b.index>v?(x=b,b=null):x=b.sibling;var S=g(E,b,k[v],j);if(S===null){b===null&&(b=x);break}t&&b&&S.alternate===null&&e(E,b),w=i(S,w,v),U===null?V=S:U.sibling=S,U=S,b=x}if(v===k.length)return n(E,b),ye&&kr(E,v),V;if(b===null){for(;v<k.length;v++)b=p(E,k[v],j),b!==null&&(w=i(b,w,v),U===null?V=b:U.sibling=b,U=b);return ye&&kr(E,v),V}for(b=r(E,b);v<k.length;v++)x=_(b,E,v,k[v],j),x!==null&&(t&&x.alternate!==null&&b.delete(x.key===null?v:x.key),w=i(x,w,v),U===null?V=x:U.sibling=x,U=x);return t&&b.forEach(function(P){return e(E,P)}),ye&&kr(E,v),V}function T(E,w,k,j){var V=Si(k);if(typeof V!="function")throw Error(F(150));if(k=V.call(k),k==null)throw Error(F(151));for(var U=V=null,b=w,v=w=0,x=null,S=k.next();b!==null&&!S.done;v++,S=k.next()){b.index>v?(x=b,b=null):x=b.sibling;var P=g(E,b,S.value,j);if(P===null){b===null&&(b=x);break}t&&b&&P.alternate===null&&e(E,b),w=i(P,w,v),U===null?V=P:U.sibling=P,U=P,b=x}if(S.done)return n(E,b),ye&&kr(E,v),V;if(b===null){for(;!S.done;v++,S=k.next())S=p(E,S.value,j),S!==null&&(w=i(S,w,v),U===null?V=S:U.sibling=S,U=S);return ye&&kr(E,v),V}for(b=r(E,b);!S.done;v++,S=k.next())S=_(b,E,v,S.value,j),S!==null&&(t&&S.alternate!==null&&b.delete(S.key===null?v:S.key),w=i(S,w,v),U===null?V=S:U.sibling=S,U=S);return t&&b.forEach(function(R){return e(E,R)}),ye&&kr(E,v),V}function N(E,w,k,j){if(typeof k=="object"&&k!==null&&k.type===gs&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Ta:e:{for(var V=k.key,U=w;U!==null;){if(U.key===V){if(V=k.type,V===gs){if(U.tag===7){n(E,U.sibling),w=s(U,k.props.children),w.return=E,E=w;break e}}else if(U.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Bn&&eg(V)===U.type){n(E,U.sibling),w=s(U,k.props),w.ref=Ci(E,U,k),w.return=E,E=w;break e}n(E,U);break}else e(E,U);U=U.sibling}k.type===gs?(w=Vr(k.props.children,E.mode,j,k.key),w.return=E,E=w):(j=tl(k.type,k.key,k.props,null,E.mode,j),j.ref=Ci(E,w,k),j.return=E,E=j)}return o(E);case ps:e:{for(U=k.key;w!==null;){if(w.key===U)if(w.tag===4&&w.stateNode.containerInfo===k.containerInfo&&w.stateNode.implementation===k.implementation){n(E,w.sibling),w=s(w,k.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Mc(k,E.mode,j),w.return=E,E=w}return o(E);case Bn:return U=k._init,N(E,w,U(k._payload),j)}if(Fi(k))return I(E,w,k,j);if(Si(k))return T(E,w,k,j);Da(E,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,k),w.return=E,E=w):(n(E,w),w=Oc(k,E.mode,j),w.return=E,E=w),o(E)):n(E,w)}return N}var Bs=I0(!0),b0=I0(!1),Il=vr(null),bl=null,Is=null,Bh=null;function zh(){Bh=Is=bl=null}function $h(t){var e=Il.current;pe(Il),t._currentValue=e}function Nd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Rs(t,e){bl=t,Bh=Is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yt=!0),t.firstContext=null)}function Vt(t){var e=t._currentValue;if(Bh!==t)if(t={context:t,memoizedValue:e,next:null},Is===null){if(bl===null)throw Error(F(308));Is=t,bl.dependencies={lanes:0,firstContext:t}}else Is=Is.next=t;return e}var Rr=null;function Wh(t){Rr===null?Rr=[t]:Rr.push(t)}function S0(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Wh(e)):(n.next=s.next,s.next=n),e.interleaved=n,kn(t,r)}function kn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zn=!1;function qh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,kn(t,n)}return s=r.interleaved,s===null?(e.next=e,Wh(r)):(e.next=s.next,s.next=e),r.interleaved=e,kn(t,n)}function Qa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ph(t,n)}}function tg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Sl(t,e,n,r){var s=t.updateQueue;zn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,_=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,T=l;switch(g=e,_=n,T.tag){case 1:if(I=T.payload,typeof I=="function"){p=I.call(_,p,g);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=T.payload,g=typeof I=="function"?I.call(_,p,g):I,g==null)break e;p=Ee({},p,g);break e;case 2:zn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=_,u=p):f=f.next=_,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Wr|=o,t.lanes=o,t.memoizedState=p}}function ng(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Fo={},tn=vr(Fo),vo=vr(Fo),_o=vr(Fo);function jr(t){if(t===Fo)throw Error(F(174));return t}function Hh(t,e){switch(he(_o,e),he(vo,t),he(tn,Fo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ld(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ld(e,t)}pe(tn),he(tn,e)}function zs(){pe(tn),pe(vo),pe(_o)}function N0(t){jr(_o.current);var e=jr(tn.current),n=ld(e,t.type);e!==n&&(he(vo,t),he(tn,n))}function Gh(t){vo.current===t&&(pe(tn),pe(vo))}var we=vr(0);function kl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ac=[];function Kh(){for(var t=0;t<Ac.length;t++)Ac[t]._workInProgressVersionPrimary=null;Ac.length=0}var Ya=jn.ReactCurrentDispatcher,Pc=jn.ReactCurrentBatchConfig,$r=0,xe=null,Me=null,Fe=null,Nl=!1,Yi=!1,wo=0,jI=0;function tt(){throw Error(F(321))}function Qh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kt(t[n],e[n]))return!1;return!0}function Yh(t,e,n,r,s,i){if($r=i,xe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ya.current=t===null||t.memoizedState===null?VI:LI,t=n(r,s),Yi){i=0;do{if(Yi=!1,wo=0,25<=i)throw Error(F(301));i+=1,Fe=Me=null,e.updateQueue=null,Ya.current=FI,t=n(r,s)}while(Yi)}if(Ya.current=Al,e=Me!==null&&Me.next!==null,$r=0,Fe=Me=xe=null,Nl=!1,e)throw Error(F(300));return t}function Xh(){var t=wo!==0;return wo=0,t}function Jt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Fe===null?xe.memoizedState=Fe=t:Fe=Fe.next=t,Fe}function Lt(){if(Me===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var e=Fe===null?xe.memoizedState:Fe.next;if(e!==null)Fe=e,Me=t;else{if(t===null)throw Error(F(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},Fe===null?xe.memoizedState=Fe=t:Fe=Fe.next=t}return Fe}function xo(t,e){return typeof e=="function"?e(t):e}function Cc(t){var e=Lt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Me,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if(($r&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,xe.lanes|=f,Wr|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,Kt(r,e.memoizedState)||(yt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,xe.lanes|=i,Wr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rc(t){var e=Lt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Kt(i,e.memoizedState)||(yt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function A0(){}function P0(t,e){var n=xe,r=Lt(),s=e(),i=!Kt(r.memoizedState,s);if(i&&(r.memoizedState=s,yt=!0),r=r.queue,Jh(j0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Fe!==null&&Fe.memoizedState.tag&1){if(n.flags|=2048,Eo(9,R0.bind(null,n,r,s,e),void 0,null),Be===null)throw Error(F(349));$r&30||C0(n,e,s)}return s}function C0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function R0(t,e,n,r){e.value=n,e.getSnapshot=r,D0(e)&&O0(t)}function j0(t,e,n){return n(function(){D0(e)&&O0(t)})}function D0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kt(t,n)}catch{return!0}}function O0(t){var e=kn(t,1);e!==null&&Ht(e,t,1,-1)}function rg(t){var e=Jt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xo,lastRenderedState:t},e.queue=t,t=t.dispatch=MI.bind(null,xe,t),[e.memoizedState,t]}function Eo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xe.updateQueue,e===null?(e={lastEffect:null,stores:null},xe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function M0(){return Lt().memoizedState}function Xa(t,e,n,r){var s=Jt();xe.flags|=t,s.memoizedState=Eo(1|e,n,void 0,r===void 0?null:r)}function uu(t,e,n,r){var s=Lt();r=r===void 0?null:r;var i=void 0;if(Me!==null){var o=Me.memoizedState;if(i=o.destroy,r!==null&&Qh(r,o.deps)){s.memoizedState=Eo(e,n,i,r);return}}xe.flags|=t,s.memoizedState=Eo(1|e,n,i,r)}function sg(t,e){return Xa(8390656,8,t,e)}function Jh(t,e){return uu(2048,8,t,e)}function V0(t,e){return uu(4,2,t,e)}function L0(t,e){return uu(4,4,t,e)}function F0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function U0(t,e,n){return n=n!=null?n.concat([t]):null,uu(4,4,F0.bind(null,e,t),n)}function Zh(){}function B0(t,e){var n=Lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function z0(t,e){var n=Lt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Qh(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $0(t,e,n){return $r&21?(Kt(n,e)||(n=Kv(),xe.lanes|=n,Wr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yt=!0),t.memoizedState=n)}function DI(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=Pc.transition;Pc.transition={};try{t(!1),e()}finally{le=n,Pc.transition=r}}function W0(){return Lt().memoizedState}function OI(t,e,n){var r=ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},q0(t))H0(e,n);else if(n=S0(t,e,n,r),n!==null){var s=ft();Ht(n,t,r,s),G0(n,e,r)}}function MI(t,e,n){var r=ir(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(q0(t))H0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Kt(l,o)){var u=e.interleaved;u===null?(s.next=s,Wh(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=S0(t,e,s,r),n!==null&&(s=ft(),Ht(n,t,r,s),G0(n,e,r))}}function q0(t){var e=t.alternate;return t===xe||e!==null&&e===xe}function H0(t,e){Yi=Nl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function G0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ph(t,n)}}var Al={readContext:Vt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},VI={readContext:Vt,useCallback:function(t,e){return Jt().memoizedState=[t,e===void 0?null:e],t},useContext:Vt,useEffect:sg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xa(4194308,4,F0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xa(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xa(4,2,t,e)},useMemo:function(t,e){var n=Jt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OI.bind(null,xe,t),[r.memoizedState,t]},useRef:function(t){var e=Jt();return t={current:t},e.memoizedState=t},useState:rg,useDebugValue:Zh,useDeferredValue:function(t){return Jt().memoizedState=t},useTransition:function(){var t=rg(!1),e=t[0];return t=DI.bind(null,t[1]),Jt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xe,s=Jt();if(ye){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Be===null)throw Error(F(349));$r&30||C0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,sg(j0.bind(null,r,i,t),[t]),r.flags|=2048,Eo(9,R0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Jt(),e=Be.identifierPrefix;if(ye){var n=_n,r=vn;n=(r&~(1<<32-qt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=wo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=jI++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LI={readContext:Vt,useCallback:B0,useContext:Vt,useEffect:Jh,useImperativeHandle:U0,useInsertionEffect:V0,useLayoutEffect:L0,useMemo:z0,useReducer:Cc,useRef:M0,useState:function(){return Cc(xo)},useDebugValue:Zh,useDeferredValue:function(t){var e=Lt();return $0(e,Me.memoizedState,t)},useTransition:function(){var t=Cc(xo)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:A0,useSyncExternalStore:P0,useId:W0,unstable_isNewReconciler:!1},FI={readContext:Vt,useCallback:B0,useContext:Vt,useEffect:Jh,useImperativeHandle:U0,useInsertionEffect:V0,useLayoutEffect:L0,useMemo:z0,useReducer:Rc,useRef:M0,useState:function(){return Rc(xo)},useDebugValue:Zh,useDeferredValue:function(t){var e=Lt();return Me===null?e.memoizedState=t:$0(e,Me.memoizedState,t)},useTransition:function(){var t=Rc(xo)[0],e=Lt().memoizedState;return[t,e]},useMutableSource:A0,useSyncExternalStore:P0,useId:W0,unstable_isNewReconciler:!1};function Bt(t,e){if(t&&t.defaultProps){e=Ee({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ad(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ee({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cu={isMounted:function(t){return(t=t._reactInternals)?Zr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ft(),s=ir(t),i=In(r,s);i.payload=e,n!=null&&(i.callback=n),e=rr(t,i,s),e!==null&&(Ht(e,t,s,r),Qa(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ft(),s=ir(t),i=In(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=rr(t,i,s),e!==null&&(Ht(e,t,s,r),Qa(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ft(),r=ir(t),s=In(n,r);s.tag=2,e!=null&&(s.callback=e),e=rr(t,s,r),e!==null&&(Ht(e,t,r,n),Qa(e,t,r))}};function ig(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!mo(n,r)||!mo(s,i):!0}function K0(t,e,n){var r=!1,s=hr,i=e.contextType;return typeof i=="object"&&i!==null?i=Vt(i):(s=_t(e)?Br:at.current,r=e.contextTypes,i=(r=r!=null)?Fs(t,s):hr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function og(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cu.enqueueReplaceState(e,e.state,null)}function Pd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},qh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Vt(i):(i=_t(e)?Br:at.current,s.context=Fs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ad(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&cu.enqueueReplaceState(s,s.state,null),Sl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $s(t,e){try{var n="",r=e;do n+=fT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function jc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UI=typeof WeakMap=="function"?WeakMap:Map;function Q0(t,e,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Cl||(Cl=!0,Bd=r),Cd(t,e)},n}function Y0(t,e,n){n=In(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Cd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Cd(t,e),typeof r!="function"&&(sr===null?sr=new Set([this]):sr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ag(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new UI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=eb.bind(null,t,e,n),e.then(t,t))}function lg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ug(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=In(-1,1),e.tag=2,rr(n,e,1))),n.lanes|=1),t)}var BI=jn.ReactCurrentOwner,yt=!1;function dt(t,e,n,r){e.child=t===null?b0(e,null,n,r):Bs(e,t.child,n,r)}function cg(t,e,n,r,s){n=n.render;var i=e.ref;return Rs(e,s),r=Yh(t,e,n,r,i,s),n=Xh(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nn(t,e,s)):(ye&&n&&Lh(e),e.flags|=1,dt(t,e,r,s),e.child)}function dg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!lf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,X0(t,e,i,r,s)):(t=tl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:mo,n(o,r)&&t.ref===e.ref)return Nn(t,e,s)}return e.flags|=1,t=or(i,r),t.ref=e.ref,t.return=e,e.child=t}function X0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(mo(i,r)&&t.ref===e.ref)if(yt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(yt=!0);else return e.lanes=t.lanes,Nn(t,e,s)}return Rd(t,e,n,r,s)}function J0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Ss,Et),Et|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(Ss,Et),Et|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,he(Ss,Et),Et|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,he(Ss,Et),Et|=r;return dt(t,e,s,n),e.child}function Z0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rd(t,e,n,r,s){var i=_t(n)?Br:at.current;return i=Fs(e,i),Rs(e,s),n=Yh(t,e,n,r,i,s),r=Xh(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Nn(t,e,s)):(ye&&r&&Lh(e),e.flags|=1,dt(t,e,n,s),e.child)}function hg(t,e,n,r,s){if(_t(n)){var i=!0;xl(e)}else i=!1;if(Rs(e,s),e.stateNode===null)Ja(t,e),K0(e,n,r),Pd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Vt(d):(d=_t(n)?Br:at.current,d=Fs(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&og(e,o,r,d),zn=!1;var g=e.memoizedState;o.state=g,Sl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||vt.current||zn?(typeof f=="function"&&(Ad(e,n,f,r),u=e.memoizedState),(l=zn||ig(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,k0(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Bt(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Vt(u):(u=_t(n)?Br:at.current,u=Fs(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&og(e,o,r,u),zn=!1,g=e.memoizedState,o.state=g,Sl(e,r,o,s);var I=e.memoizedState;l!==p||g!==I||vt.current||zn?(typeof _=="function"&&(Ad(e,n,_,r),I=e.memoizedState),(d=zn||ig(e,n,d,r,g,I,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return jd(t,e,n,r,i,s)}function jd(t,e,n,r,s,i){Z0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Xp(e,n,!1),Nn(t,e,i);r=e.stateNode,BI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Bs(e,t.child,null,i),e.child=Bs(e,null,l,i)):dt(t,e,l,i),e.memoizedState=r.state,s&&Xp(e,n,!0),e.child}function e_(t){var e=t.stateNode;e.pendingContext?Yp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yp(t,e.context,!1),Hh(t,e.containerInfo)}function fg(t,e,n,r,s){return Us(),Uh(s),e.flags|=256,dt(t,e,n,r),e.child}var Dd={dehydrated:null,treeContext:null,retryLane:0};function Od(t){return{baseLanes:t,cachePool:null,transitions:null}}function t_(t,e,n){var r=e.pendingProps,s=we.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),he(we,s&1),t===null)return kd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=fu(o,r,0,null),t=Vr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Od(n),e.memoizedState=Dd,t):ef(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return zI(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=or(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=or(l,i):(i=Vr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Od(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Dd,r}return i=t.child,t=i.sibling,r=or(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ef(t,e){return e=fu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Oa(t,e,n,r){return r!==null&&Uh(r),Bs(e,t.child,null,n),t=ef(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=jc(Error(F(422))),Oa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=fu({mode:"visible",children:r.children},s,0,null),i=Vr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Bs(e,t.child,null,o),e.child.memoizedState=Od(o),e.memoizedState=Dd,i);if(!(e.mode&1))return Oa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=jc(i,r,void 0),Oa(t,e,o,r)}if(l=(o&t.childLanes)!==0,yt||l){if(r=Be,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,kn(t,s),Ht(r,t,s,-1))}return af(),r=jc(Error(F(421))),Oa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=tb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Tt=nr(s.nextSibling),bt=e,ye=!0,Wt=null,t!==null&&(Rt[jt++]=vn,Rt[jt++]=_n,Rt[jt++]=zr,vn=t.id,_n=t.overflow,zr=e),e=ef(e,r.children),e.flags|=4096,e)}function mg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nd(t.return,e,n)}function Dc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function n_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(dt(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mg(t,n,e);else if(t.tag===19)mg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(we,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&kl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Dc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&kl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Dc(e,!0,n,null,i);break;case"together":Dc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ja(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=or(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=or(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $I(t,e,n){switch(e.tag){case 3:e_(e),Us();break;case 5:N0(e);break;case 1:_t(e.type)&&xl(e);break;case 4:Hh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;he(Il,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?t_(t,e,n):(he(we,we.current&1),t=Nn(t,e,n),t!==null?t.sibling:null);he(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return n_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),he(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,J0(t,e,n)}return Nn(t,e,n)}var r_,Md,s_,i_;r_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Md=function(){};s_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,jr(tn.current);var i=null;switch(n){case"input":s=sd(t,s),r=sd(t,r),i=[];break;case"select":s=Ee({},s,{value:void 0}),r=Ee({},r,{value:void 0}),i=[];break;case"textarea":s=ad(t,s),r=ad(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=_l)}ud(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(oo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(oo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&me("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};i_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ri(t,e){if(!ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WI(t,e,n){var r=e.pendingProps;switch(Fh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(e),null;case 1:return _t(e.type)&&wl(),nt(e),null;case 3:return r=e.stateNode,zs(),pe(vt),pe(at),Kh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wt!==null&&(Wd(Wt),Wt=null))),Md(t,e),nt(e),null;case 5:Gh(e);var s=jr(_o.current);if(n=e.type,t!==null&&e.stateNode!=null)s_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return nt(e),null}if(t=jr(tn.current),ja(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Zt]=e,r[yo]=i,t=(e.mode&1)!==0,n){case"dialog":me("cancel",r),me("close",r);break;case"iframe":case"object":case"embed":me("load",r);break;case"video":case"audio":for(s=0;s<Bi.length;s++)me(Bi[s],r);break;case"source":me("error",r);break;case"img":case"image":case"link":me("error",r),me("load",r);break;case"details":me("toggle",r);break;case"input":Tp(r,i),me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},me("invalid",r);break;case"textarea":bp(r,i),me("invalid",r)}ud(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ra(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ra(r.textContent,l,t),s=["children",""+l]):oo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&me("scroll",r)}switch(n){case"input":Ia(r),Ip(r,i,!0);break;case"textarea":Ia(r),Sp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=_l)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zt]=e,t[yo]=r,r_(t,e,!1,!1),e.stateNode=t;e:{switch(o=cd(n,r),n){case"dialog":me("cancel",t),me("close",t),s=r;break;case"iframe":case"object":case"embed":me("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bi.length;s++)me(Bi[s],t);s=r;break;case"source":me("error",t),s=r;break;case"img":case"image":case"link":me("error",t),me("load",t),s=r;break;case"details":me("toggle",t),s=r;break;case"input":Tp(t,r),s=sd(t,r),me("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ee({},r,{value:void 0}),me("invalid",t);break;case"textarea":bp(t,r),s=ad(t,r),me("invalid",t);break;default:s=r}ud(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Mv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Dv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ao(t,u):typeof u=="number"&&ao(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&me("scroll",t):u!=null&&Ih(t,i,u,o))}switch(n){case"input":Ia(t),Ip(t,r,!1);break;case"textarea":Ia(t),Sp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+dr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ns(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ns(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_l)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nt(e),null;case 6:if(t&&e.stateNode!=null)i_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=jr(_o.current),jr(tn.current),ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zt]=e,(i=r.nodeValue!==n)&&(t=bt,t!==null))switch(t.tag){case 3:Ra(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ra(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=e,e.stateNode=r}return nt(e),null;case 13:if(pe(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ye&&Tt!==null&&e.mode&1&&!(e.flags&128))T0(),Us(),e.flags|=98560,i=!1;else if(i=ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Zt]=e}else Us(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nt(e),i=!1}else Wt!==null&&(Wd(Wt),Wt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?Ve===0&&(Ve=3):af())),e.updateQueue!==null&&(e.flags|=4),nt(e),null);case 4:return zs(),Md(t,e),t===null&&po(e.stateNode.containerInfo),nt(e),null;case 10:return $h(e.type._context),nt(e),null;case 17:return _t(e.type)&&wl(),nt(e),null;case 19:if(pe(we),i=e.memoizedState,i===null)return nt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ri(i,!1);else{if(Ve!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=kl(t),o!==null){for(e.flags|=128,Ri(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(we,we.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ae()>Ws&&(e.flags|=128,r=!0,Ri(i,!1),e.lanes=4194304)}else{if(!r)if(t=kl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ri(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ye)return nt(e),null}else 2*Ae()-i.renderingStartTime>Ws&&n!==1073741824&&(e.flags|=128,r=!0,Ri(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ae(),e.sibling=null,n=we.current,he(we,r?n&1|2:n&1),e):(nt(e),null);case 22:case 23:return of(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Et&1073741824&&(nt(e),e.subtreeFlags&6&&(e.flags|=8192)):nt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function qI(t,e){switch(Fh(e),e.tag){case 1:return _t(e.type)&&wl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zs(),pe(vt),pe(at),Kh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Gh(e),null;case 13:if(pe(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Us()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(we),null;case 4:return zs(),null;case 10:return $h(e.type._context),null;case 22:case 23:return of(),null;case 24:return null;default:return null}}var Ma=!1,it=!1,HI=typeof WeakSet=="function"?WeakSet:Set,W=null;function bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function Vd(t,e,n){try{n()}catch(r){be(t,e,r)}}var pg=!1;function GI(t,e){if(wd=gl,t=c0(),Vh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var _;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)g=p,p=_;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(_=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(xd={focusedElem:t,selectionRange:n},gl=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var T=I.memoizedProps,N=I.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?T:Bt(e.type,T),N);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(j){be(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return I=pg,pg=!1,I}function Xi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Vd(e,n,i)}s=s.next}while(s!==r)}}function du(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ld(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o_(t){var e=t.alternate;e!==null&&(t.alternate=null,o_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zt],delete e[yo],delete e[Id],delete e[AI],delete e[PI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function a_(t){return t.tag===5||t.tag===3||t.tag===4}function gg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||a_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=_l));else if(r!==4&&(t=t.child,t!==null))for(Fd(t,e,n),t=t.sibling;t!==null;)Fd(t,e,n),t=t.sibling}function Ud(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ud(t,e,n),t=t.sibling;t!==null;)Ud(t,e,n),t=t.sibling}var $e=null,zt=!1;function Ln(t,e,n){for(n=n.child;n!==null;)l_(t,e,n),n=n.sibling}function l_(t,e,n){if(en&&typeof en.onCommitFiberUnmount=="function")try{en.onCommitFiberUnmount(ru,n)}catch{}switch(n.tag){case 5:it||bs(n,e);case 6:var r=$e,s=zt;$e=null,Ln(t,e,n),$e=r,zt=s,$e!==null&&(zt?(t=$e,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):$e.removeChild(n.stateNode));break;case 18:$e!==null&&(zt?(t=$e,n=n.stateNode,t.nodeType===8?kc(t.parentNode,n):t.nodeType===1&&kc(t,n),ho(t)):kc($e,n.stateNode));break;case 4:r=$e,s=zt,$e=n.stateNode.containerInfo,zt=!0,Ln(t,e,n),$e=r,zt=s;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Vd(n,e,o),s=s.next}while(s!==r)}Ln(t,e,n);break;case 1:if(!it&&(bs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}Ln(t,e,n);break;case 21:Ln(t,e,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,Ln(t,e,n),it=r):Ln(t,e,n);break;default:Ln(t,e,n)}}function yg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HI),e.forEach(function(r){var s=nb.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Ut(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:$e=l.stateNode,zt=!1;break e;case 3:$e=l.stateNode.containerInfo,zt=!0;break e;case 4:$e=l.stateNode.containerInfo,zt=!0;break e}l=l.return}if($e===null)throw Error(F(160));l_(i,o,s),$e=null,zt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){be(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)u_(e,t),e=e.sibling}function u_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ut(e,t),Xt(t),r&4){try{Xi(3,t,t.return),du(3,t)}catch(T){be(t,t.return,T)}try{Xi(5,t,t.return)}catch(T){be(t,t.return,T)}}break;case 1:Ut(e,t),Xt(t),r&512&&n!==null&&bs(n,n.return);break;case 5:if(Ut(e,t),Xt(t),r&512&&n!==null&&bs(n,n.return),t.flags&32){var s=t.stateNode;try{ao(s,"")}catch(T){be(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Cv(s,i),cd(l,o);var d=cd(l,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?Mv(s,p):f==="dangerouslySetInnerHTML"?Dv(s,p):f==="children"?ao(s,p):Ih(s,f,p,d)}switch(l){case"input":id(s,i);break;case"textarea":Rv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?Ns(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ns(s,!!i.multiple,i.defaultValue,!0):Ns(s,!!i.multiple,i.multiple?[]:"",!1))}s[yo]=i}catch(T){be(t,t.return,T)}}break;case 6:if(Ut(e,t),Xt(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){be(t,t.return,T)}}break;case 3:if(Ut(e,t),Xt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ho(e.containerInfo)}catch(T){be(t,t.return,T)}break;case 4:Ut(e,t),Xt(t);break;case 13:Ut(e,t),Xt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rf=Ae())),r&4&&yg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(it=(d=it)||f,Ut(e,t),it=d):Ut(e,t),Xt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(W=t,f=t.child;f!==null;){for(p=W=f;W!==null;){switch(g=W,_=g.child,g.tag){case 0:case 11:case 14:case 15:Xi(4,g,g.return);break;case 1:bs(g,g.return);var I=g.stateNode;if(typeof I.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(T){be(r,n,T)}}break;case 5:bs(g,g.return);break;case 22:if(g.memoizedState!==null){_g(p);continue}}_!==null?(_.return=g,W=_):_g(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Ov("display",o))}catch(T){be(t,t.return,T)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(T){be(t,t.return,T)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Ut(e,t),Xt(t),r&4&&yg(t);break;case 21:break;default:Ut(e,t),Xt(t)}}function Xt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(a_(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ao(s,""),r.flags&=-33);var i=gg(t);Ud(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=gg(t);Fd(t,l,o);break;default:throw Error(F(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KI(t,e,n){W=t,c_(t)}function c_(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ma;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||it;l=Ma;var d=it;if(Ma=o,(it=u)&&!d)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?wg(s):u!==null?(u.return=o,W=u):wg(s);for(;i!==null;)W=i,c_(i),i=i.sibling;W=s,Ma=l,it=d}vg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):vg(t)}}function vg(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||du(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!it)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Bt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ng(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ng(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&ho(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}it||e.flags&512&&Ld(e)}catch(g){be(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function _g(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function wg(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{du(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){be(e,s,u)}}var i=e.return;try{Ld(e)}catch(u){be(e,i,u)}break;case 5:var o=e.return;try{Ld(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var QI=Math.ceil,Pl=jn.ReactCurrentDispatcher,tf=jn.ReactCurrentOwner,Mt=jn.ReactCurrentBatchConfig,re=0,Be=null,Re=null,Ge=0,Et=0,Ss=vr(0),Ve=0,To=null,Wr=0,hu=0,nf=0,Ji=null,gt=null,rf=0,Ws=1/0,pn=null,Cl=!1,Bd=null,sr=null,Va=!1,Yn=null,Rl=0,Zi=0,zd=null,Za=-1,el=0;function ft(){return re&6?Ae():Za!==-1?Za:Za=Ae()}function ir(t){return t.mode&1?re&2&&Ge!==0?Ge&-Ge:RI.transition!==null?(el===0&&(el=Kv()),el):(t=le,t!==0||(t=window.event,t=t===void 0?16:t0(t.type)),t):1}function Ht(t,e,n,r){if(50<Zi)throw Zi=0,zd=null,Error(F(185));Mo(t,n,r),(!(re&2)||t!==Be)&&(t===Be&&(!(re&2)&&(hu|=n),Ve===4&&Wn(t,Ge)),wt(t,r),n===1&&re===0&&!(e.mode&1)&&(Ws=Ae()+500,lu&&_r()))}function wt(t,e){var n=t.callbackNode;RT(t,e);var r=pl(t,t===Be?Ge:0);if(r===0)n!==null&&Ap(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ap(n),e===1)t.tag===0?CI(xg.bind(null,t)):w0(xg.bind(null,t)),kI(function(){!(re&6)&&_r()}),n=null;else{switch(Qv(r)){case 1:n=Ah;break;case 4:n=Hv;break;case 16:n=ml;break;case 536870912:n=Gv;break;default:n=ml}n=v_(n,d_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function d_(t,e){if(Za=-1,el=0,re&6)throw Error(F(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var r=pl(t,t===Be?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=jl(t,r);else{e=r;var s=re;re|=2;var i=f_();(Be!==t||Ge!==e)&&(pn=null,Ws=Ae()+500,Mr(t,e));do try{JI();break}catch(l){h_(t,l)}while(!0);zh(),Pl.current=i,re=s,Re!==null?e=0:(Be=null,Ge=0,e=Ve)}if(e!==0){if(e===2&&(s=pd(t),s!==0&&(r=s,e=$d(t,s))),e===1)throw n=To,Mr(t,0),Wn(t,r),wt(t,Ae()),n;if(e===6)Wn(t,r);else{if(s=t.current.alternate,!(r&30)&&!YI(s)&&(e=jl(t,r),e===2&&(i=pd(t),i!==0&&(r=i,e=$d(t,i))),e===1))throw n=To,Mr(t,0),Wn(t,r),wt(t,Ae()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Nr(t,gt,pn);break;case 3:if(Wn(t,r),(r&130023424)===r&&(e=rf+500-Ae(),10<e)){if(pl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ft(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Td(Nr.bind(null,t,gt,pn),e);break}Nr(t,gt,pn);break;case 4:if(Wn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-qt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ae()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*QI(r/1960))-r,10<r){t.timeoutHandle=Td(Nr.bind(null,t,gt,pn),r);break}Nr(t,gt,pn);break;case 5:Nr(t,gt,pn);break;default:throw Error(F(329))}}}return wt(t,Ae()),t.callbackNode===n?d_.bind(null,t):null}function $d(t,e){var n=Ji;return t.current.memoizedState.isDehydrated&&(Mr(t,e).flags|=256),t=jl(t,e),t!==2&&(e=gt,gt=n,e!==null&&Wd(e)),t}function Wd(t){gt===null?gt=t:gt.push.apply(gt,t)}function YI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Kt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wn(t,e){for(e&=~nf,e&=~hu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-qt(e),r=1<<n;t[n]=-1,e&=~r}}function xg(t){if(re&6)throw Error(F(327));js();var e=pl(t,0);if(!(e&1))return wt(t,Ae()),null;var n=jl(t,e);if(t.tag!==0&&n===2){var r=pd(t);r!==0&&(e=r,n=$d(t,r))}if(n===1)throw n=To,Mr(t,0),Wn(t,e),wt(t,Ae()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Nr(t,gt,pn),wt(t,Ae()),null}function sf(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(Ws=Ae()+500,lu&&_r())}}function qr(t){Yn!==null&&Yn.tag===0&&!(re&6)&&js();var e=re;re|=1;var n=Mt.transition,r=le;try{if(Mt.transition=null,le=1,t)return t()}finally{le=r,Mt.transition=n,re=e,!(re&6)&&_r()}}function of(){Et=Ss.current,pe(Ss)}function Mr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SI(n)),Re!==null)for(n=Re.return;n!==null;){var r=n;switch(Fh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&wl();break;case 3:zs(),pe(vt),pe(at),Kh();break;case 5:Gh(r);break;case 4:zs();break;case 13:pe(we);break;case 19:pe(we);break;case 10:$h(r.type._context);break;case 22:case 23:of()}n=n.return}if(Be=t,Re=t=or(t.current,null),Ge=Et=e,Ve=0,To=null,nf=hu=Wr=0,gt=Ji=null,Rr!==null){for(e=0;e<Rr.length;e++)if(n=Rr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Rr=null}return t}function h_(t,e){do{var n=Re;try{if(zh(),Ya.current=Al,Nl){for(var r=xe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nl=!1}if($r=0,Fe=Me=xe=null,Yi=!1,wo=0,tf.current=null,n===null||n.return===null){Ve=1,To=e,Re=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Ge,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=lg(o);if(_!==null){_.flags&=-257,ug(_,o,l,i,e),_.mode&1&&ag(i,d,e),e=_,u=d;var I=e.updateQueue;if(I===null){var T=new Set;T.add(u),e.updateQueue=T}else I.add(u);break e}else{if(!(e&1)){ag(i,d,e),af();break e}u=Error(F(426))}}else if(ye&&l.mode&1){var N=lg(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),ug(N,o,l,i,e),Uh($s(u,l));break e}}i=u=$s(u,l),Ve!==4&&(Ve=2),Ji===null?Ji=[i]:Ji.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=Q0(i,u,e);tg(i,E);break e;case 1:l=u;var w=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(sr===null||!sr.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=Y0(i,l,e);tg(i,j);break e}}i=i.return}while(i!==null)}p_(n)}catch(V){e=V,Re===n&&n!==null&&(Re=n=n.return);continue}break}while(!0)}function f_(){var t=Pl.current;return Pl.current=Al,t===null?Al:t}function af(){(Ve===0||Ve===3||Ve===2)&&(Ve=4),Be===null||!(Wr&268435455)&&!(hu&268435455)||Wn(Be,Ge)}function jl(t,e){var n=re;re|=2;var r=f_();(Be!==t||Ge!==e)&&(pn=null,Mr(t,e));do try{XI();break}catch(s){h_(t,s)}while(!0);if(zh(),re=n,Pl.current=r,Re!==null)throw Error(F(261));return Be=null,Ge=0,Ve}function XI(){for(;Re!==null;)m_(Re)}function JI(){for(;Re!==null&&!TT();)m_(Re)}function m_(t){var e=y_(t.alternate,t,Et);t.memoizedProps=t.pendingProps,e===null?p_(t):Re=e,tf.current=null}function p_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qI(n,e),n!==null){n.flags&=32767,Re=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ve=6,Re=null;return}}else if(n=WI(n,e,Et),n!==null){Re=n;return}if(e=e.sibling,e!==null){Re=e;return}Re=e=t}while(e!==null);Ve===0&&(Ve=5)}function Nr(t,e,n){var r=le,s=Mt.transition;try{Mt.transition=null,le=1,ZI(t,e,n,r)}finally{Mt.transition=s,le=r}return null}function ZI(t,e,n,r){do js();while(Yn!==null);if(re&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(jT(t,i),t===Be&&(Re=Be=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Va||(Va=!0,v_(ml,function(){return js(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Mt.transition,Mt.transition=null;var o=le;le=1;var l=re;re|=4,tf.current=null,GI(t,n),u_(n,t),_I(xd),gl=!!wd,xd=wd=null,t.current=n,KI(n),IT(),re=l,le=o,Mt.transition=i}else t.current=n;if(Va&&(Va=!1,Yn=t,Rl=s),i=t.pendingLanes,i===0&&(sr=null),kT(n.stateNode),wt(t,Ae()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Cl)throw Cl=!1,t=Bd,Bd=null,t;return Rl&1&&t.tag!==0&&js(),i=t.pendingLanes,i&1?t===zd?Zi++:(Zi=0,zd=t):Zi=0,_r(),null}function js(){if(Yn!==null){var t=Qv(Rl),e=Mt.transition,n=le;try{if(Mt.transition=null,le=16>t?16:t,Yn===null)var r=!1;else{if(t=Yn,Yn=null,Rl=0,re&6)throw Error(F(331));var s=re;for(re|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(W=d;W!==null;){var f=W;switch(f.tag){case 0:case 11:case 15:Xi(8,f,i)}var p=f.child;if(p!==null)p.return=f,W=p;else for(;W!==null;){f=W;var g=f.sibling,_=f.return;if(o_(f),f===d){W=null;break}if(g!==null){g.return=_,W=g;break}W=_}}}var I=i.alternate;if(I!==null){var T=I.child;if(T!==null){I.child=null;do{var N=T.sibling;T.sibling=null,T=N}while(T!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xi(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,W=E;break e}W=i.return}}var w=t.current;for(W=w;W!==null;){o=W;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,W=k;else e:for(o=w;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:du(9,l)}}catch(V){be(l,l.return,V)}if(l===o){W=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,W=j;break e}W=l.return}}if(re=s,_r(),en&&typeof en.onPostCommitFiberRoot=="function")try{en.onPostCommitFiberRoot(ru,t)}catch{}r=!0}return r}finally{le=n,Mt.transition=e}}return!1}function Eg(t,e,n){e=$s(n,e),e=Q0(t,e,1),t=rr(t,e,1),e=ft(),t!==null&&(Mo(t,1,e),wt(t,e))}function be(t,e,n){if(t.tag===3)Eg(t,t,n);else for(;e!==null;){if(e.tag===3){Eg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sr===null||!sr.has(r))){t=$s(n,t),t=Y0(e,t,1),e=rr(e,t,1),t=ft(),e!==null&&(Mo(e,1,t),wt(e,t));break}}e=e.return}}function eb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ft(),t.pingedLanes|=t.suspendedLanes&n,Be===t&&(Ge&n)===n&&(Ve===4||Ve===3&&(Ge&130023424)===Ge&&500>Ae()-rf?Mr(t,0):nf|=n),wt(t,e)}function g_(t,e){e===0&&(t.mode&1?(e=ka,ka<<=1,!(ka&130023424)&&(ka=4194304)):e=1);var n=ft();t=kn(t,e),t!==null&&(Mo(t,e,n),wt(t,n))}function tb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),g_(t,n)}function nb(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),g_(t,n)}var y_;y_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vt.current)yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yt=!1,$I(t,e,n);yt=!!(t.flags&131072)}else yt=!1,ye&&e.flags&1048576&&x0(e,Tl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ja(t,e),t=e.pendingProps;var s=Fs(e,at.current);Rs(e,n),s=Yh(null,e,r,t,s,n);var i=Xh();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_t(r)?(i=!0,xl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,qh(e),s.updater=cu,e.stateNode=s,s._reactInternals=e,Pd(e,r,t,n),e=jd(null,e,r,!0,i,n)):(e.tag=0,ye&&i&&Lh(e),dt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ja(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=sb(r),t=Bt(r,t),s){case 0:e=Rd(null,e,r,t,n);break e;case 1:e=hg(null,e,r,t,n);break e;case 11:e=cg(null,e,r,t,n);break e;case 14:e=dg(null,e,r,Bt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bt(r,s),Rd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bt(r,s),hg(t,e,r,s,n);case 3:e:{if(e_(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,k0(t,e),Sl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=$s(Error(F(423)),e),e=fg(t,e,r,n,s);break e}else if(r!==s){s=$s(Error(F(424)),e),e=fg(t,e,r,n,s);break e}else for(Tt=nr(e.stateNode.containerInfo.firstChild),bt=e,ye=!0,Wt=null,n=b0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Us(),r===s){e=Nn(t,e,n);break e}dt(t,e,r,n)}e=e.child}return e;case 5:return N0(e),t===null&&kd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Ed(r,s)?o=null:i!==null&&Ed(r,i)&&(e.flags|=32),Z0(t,e),dt(t,e,o,n),e.child;case 6:return t===null&&kd(e),null;case 13:return t_(t,e,n);case 4:return Hh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bs(e,null,r,n):dt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bt(r,s),cg(t,e,r,s,n);case 7:return dt(t,e,e.pendingProps,n),e.child;case 8:return dt(t,e,e.pendingProps.children,n),e.child;case 12:return dt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,he(Il,r._currentValue),r._currentValue=o,i!==null)if(Kt(i.value,o)){if(i.children===s.children&&!vt.current){e=Nn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=In(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Nd(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Nd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}dt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Rs(e,n),s=Vt(s),r=r(s),e.flags|=1,dt(t,e,r,n),e.child;case 14:return r=e.type,s=Bt(r,e.pendingProps),s=Bt(r.type,s),dg(t,e,r,s,n);case 15:return X0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Bt(r,s),Ja(t,e),e.tag=1,_t(r)?(t=!0,xl(e)):t=!1,Rs(e,n),K0(e,r,s),Pd(e,r,s,n),jd(null,e,r,!0,t,n);case 19:return n_(t,e,n);case 22:return J0(t,e,n)}throw Error(F(156,e.tag))};function v_(t,e){return qv(t,e)}function rb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(t,e,n,r){return new rb(t,e,n,r)}function lf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sb(t){if(typeof t=="function")return lf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sh)return 11;if(t===kh)return 14}return 2}function or(t,e){var n=t.alternate;return n===null?(n=Dt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")lf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case gs:return Vr(n.children,s,i,e);case bh:o=8,s|=8;break;case ed:return t=Dt(12,n,e,s|2),t.elementType=ed,t.lanes=i,t;case td:return t=Dt(13,n,e,s),t.elementType=td,t.lanes=i,t;case nd:return t=Dt(19,n,e,s),t.elementType=nd,t.lanes=i,t;case Nv:return fu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Sv:o=10;break e;case kv:o=9;break e;case Sh:o=11;break e;case kh:o=14;break e;case Bn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Dt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Vr(t,e,n,r){return t=Dt(7,t,r,e),t.lanes=n,t}function fu(t,e,n,r){return t=Dt(22,t,r,e),t.elementType=Nv,t.lanes=n,t.stateNode={isHidden:!1},t}function Oc(t,e,n){return t=Dt(6,t,null,e),t.lanes=n,t}function Mc(t,e,n){return e=Dt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ib(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gc(0),this.expirationTimes=gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function uf(t,e,n,r,s,i,o,l,u){return t=new ib(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Dt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qh(i),t}function ob(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ps,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function __(t){if(!t)return hr;t=t._reactInternals;e:{if(Zr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(_t(n))return _0(t,n,e)}return e}function w_(t,e,n,r,s,i,o,l,u){return t=uf(n,r,!0,t,s,i,o,l,u),t.context=__(null),n=t.current,r=ft(),s=ir(n),i=In(r,s),i.callback=e??null,rr(n,i,s),t.current.lanes=s,Mo(t,s,r),wt(t,r),t}function mu(t,e,n,r){var s=e.current,i=ft(),o=ir(s);return n=__(n),e.context===null?e.context=n:e.pendingContext=n,e=In(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=rr(s,e,o),t!==null&&(Ht(t,s,o,i),Qa(t,s,o)),o}function Dl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cf(t,e){Tg(t,e),(t=t.alternate)&&Tg(t,e)}function ab(){return null}var x_=typeof reportError=="function"?reportError:function(t){console.error(t)};function df(t){this._internalRoot=t}pu.prototype.render=df.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));mu(t,e,null,null)};pu.prototype.unmount=df.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qr(function(){mu(null,t,null,null)}),e[Sn]=null}};function pu(t){this._internalRoot=t}pu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$n.length&&e!==0&&e<$n[n].priority;n++);$n.splice(n,0,t),n===0&&e0(t)}};function hf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ig(){}function lb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Dl(o);i.call(d)}}var o=w_(e,r,t,0,null,!1,!1,"",Ig);return t._reactRootContainer=o,t[Sn]=o.current,po(t.nodeType===8?t.parentNode:t),qr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Dl(u);l.call(d)}}var u=uf(t,0,!1,null,null,!1,!1,"",Ig);return t._reactRootContainer=u,t[Sn]=u.current,po(t.nodeType===8?t.parentNode:t),qr(function(){mu(e,u,n,r)}),u}function yu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Dl(o);l.call(u)}}mu(e,o,t,s)}else o=lb(n,e,t,s,r);return Dl(o)}Yv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ui(e.pendingLanes);n!==0&&(Ph(e,n|1),wt(e,Ae()),!(re&6)&&(Ws=Ae()+500,_r()))}break;case 13:qr(function(){var r=kn(t,1);if(r!==null){var s=ft();Ht(r,t,1,s)}}),cf(t,1)}};Ch=function(t){if(t.tag===13){var e=kn(t,134217728);if(e!==null){var n=ft();Ht(e,t,134217728,n)}cf(t,134217728)}};Xv=function(t){if(t.tag===13){var e=ir(t),n=kn(t,e);if(n!==null){var r=ft();Ht(n,t,e,r)}cf(t,e)}};Jv=function(){return le};Zv=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};hd=function(t,e,n){switch(e){case"input":if(id(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=au(r);if(!s)throw Error(F(90));Pv(r),id(r,s)}}}break;case"textarea":Rv(t,n);break;case"select":e=n.value,e!=null&&Ns(t,!!n.multiple,e,!1)}};Fv=sf;Uv=qr;var ub={usingClientEntryPoint:!1,Events:[Lo,ws,au,Vv,Lv,sf]},ji={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cb={bundleType:ji.bundleType,version:ji.version,rendererPackageName:ji.rendererPackageName,rendererConfig:ji.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$v(t),t===null?null:t.stateNode},findFiberByHostInstance:ji.findFiberByHostInstance||ab,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var La=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!La.isDisabled&&La.supportsFiber)try{ru=La.inject(cb),en=La}catch{}}Nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ub;Nt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hf(e))throw Error(F(200));return ob(t,e,null,n)};Nt.createRoot=function(t,e){if(!hf(t))throw Error(F(299));var n=!1,r="",s=x_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=uf(t,1,!1,null,null,n,!1,r,s),t[Sn]=e.current,po(t.nodeType===8?t.parentNode:t),new df(e)};Nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=$v(e),t=t===null?null:t.stateNode,t};Nt.flushSync=function(t){return qr(t)};Nt.hydrate=function(t,e,n){if(!gu(e))throw Error(F(200));return yu(null,t,e,!0,n)};Nt.hydrateRoot=function(t,e,n){if(!hf(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=x_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=w_(e,null,t,1,n??null,s,!1,i,o),t[Sn]=e.current,po(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new pu(e)};Nt.render=function(t,e,n){if(!gu(e))throw Error(F(200));return yu(null,t,e,!1,n)};Nt.unmountComponentAtNode=function(t){if(!gu(t))throw Error(F(40));return t._reactRootContainer?(qr(function(){yu(null,null,t,!1,function(){t._reactRootContainer=null,t[Sn]=null})}),!0):!1};Nt.unstable_batchedUpdates=sf;Nt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gu(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return yu(t,e,n,!1,r)};Nt.version="18.3.1-next-f1338f8080-20240426";function E_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E_)}catch(t){console.error(t)}}E_(),Ev.exports=Nt;var db=Ev.exports,bg=db;Jc.createRoot=bg.createRoot,Jc.hydrateRoot=bg.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Io(){return Io=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Io.apply(this,arguments)}var Xn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Xn||(Xn={}));const Sg="popstate";function hb(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return qd("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:T_(s)}return mb(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ff(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fb(){return Math.random().toString(36).substr(2,8)}function kg(t,e){return{usr:t.state,key:t.key,idx:e}}function qd(t,e,n,r){return n===void 0&&(n=null),Io({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ri(e):e,{state:n,key:e&&e.key||r||fb()})}function T_(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ri(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function mb(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Xn.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Io({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=Xn.Pop;let N=f(),E=N==null?null:N-d;d=N,u&&u({action:l,location:T.location,delta:E})}function g(N,E){l=Xn.Push;let w=qd(T.location,N,E);d=f()+1;let k=kg(w,d),j=T.createHref(w);try{o.pushState(k,"",j)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(j)}i&&u&&u({action:l,location:T.location,delta:1})}function _(N,E){l=Xn.Replace;let w=qd(T.location,N,E);d=f();let k=kg(w,d),j=T.createHref(w);o.replaceState(k,"",j),i&&u&&u({action:l,location:T.location,delta:0})}function I(N){let E=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof N=="string"?N:T_(N);return w=w.replace(/ $/,"%20"),Oe(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let T={get action(){return l},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Sg,p),u=N,()=>{s.removeEventListener(Sg,p),u=null}},createHref(N){return e(s,N)},createURL:I,encodeLocation(N){let E=I(N);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:_,go(N){return o.go(N)}};return T}var Ng;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ng||(Ng={}));function pb(t,e,n){return n===void 0&&(n="/"),gb(t,e,n)}function gb(t,e,n,r){let s=typeof e=="string"?ri(e):e,i=S_(s.pathname||"/",n);if(i==null)return null;let o=I_(t);yb(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=Ab(i);l=Sb(o[u],d)}return l}function I_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Oe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Lr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Oe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),I_(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Ib(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of b_(i.path))s(i,o,u)}),e}function b_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=b_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function yb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vb=/^:[\w-]+$/,_b=3,wb=2,xb=1,Eb=10,Tb=-2,Ag=t=>t==="*";function Ib(t,e){let n=t.split("/"),r=n.length;return n.some(Ag)&&(r+=Tb),e&&(r+=wb),n.filter(s=>!Ag(s)).reduce((s,i)=>s+(vb.test(i)?_b:i===""?xb:Eb),r)}function bb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Sb(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=kb({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Lr([i,p.pathname]),pathnameBase:Db(Lr([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Lr([i,p.pathnameBase]))}return o}function kb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Nb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:_}=f;if(g==="*"){let T=l[p]||"";o=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const I=l[p];return _&&!I?d[g]=void 0:d[g]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Nb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ff(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Ab(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ff(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function S_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Pb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cb=t=>Pb.test(t);function Rb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ri(t):t,i;if(n)if(Cb(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),ff(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Pg(n.substring(1),"/"):i=Pg(n,e)}else i=e;return{pathname:i,search:Ob(r),hash:Mb(s)}}function Pg(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Vc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function k_(t,e){let n=jb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function N_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ri(t):(s=Io({},t),Oe(!s.pathname||!s.pathname.includes("?"),Vc("?","pathname","search",s)),Oe(!s.pathname||!s.pathname.includes("#"),Vc("#","pathname","hash",s)),Oe(!s.search||!s.search.includes("#"),Vc("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=Rb(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Lr=t=>t.join("/").replace(/\/\/+/g,"/"),Db=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Ob=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Mb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Vb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const A_=["post","put","patch","delete"];new Set(A_);const Lb=["get",...A_];new Set(Lb);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bo(){return bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bo.apply(this,arguments)}const mf=O.createContext(null),Fb=O.createContext(null),Uo=O.createContext(null),vu=O.createContext(null),es=O.createContext({outlet:null,matches:[],isDataRoute:!1}),P_=O.createContext(null);function Bo(){return O.useContext(vu)!=null}function _u(){return Bo()||Oe(!1),O.useContext(vu).location}function C_(t){O.useContext(Uo).static||O.useLayoutEffect(t)}function pf(){let{isDataRoute:t}=O.useContext(es);return t?Jb():Ub()}function Ub(){Bo()||Oe(!1);let t=O.useContext(mf),{basename:e,future:n,navigator:r}=O.useContext(Uo),{matches:s}=O.useContext(es),{pathname:i}=_u(),o=JSON.stringify(k_(s,n.v7_relativeSplatPath)),l=O.useRef(!1);return C_(()=>{l.current=!0}),O.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=N_(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Lr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function Bb(t,e){return zb(t,e)}function zb(t,e,n,r){Bo()||Oe(!1);let{navigator:s}=O.useContext(Uo),{matches:i}=O.useContext(es),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=_u(),f;if(e){var p;let N=typeof e=="string"?ri(e):e;u==="/"||(p=N.pathname)!=null&&p.startsWith(u)||Oe(!1),f=N}else f=d;let g=f.pathname||"/",_=g;if(u!=="/"){let N=u.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(N.length).join("/")}let I=pb(t,{pathname:_}),T=Gb(I&&I.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:Lr([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Lr([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,n,r);return e&&T?O.createElement(vu.Provider,{value:{location:bo({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Xn.Pop}},T):T}function $b(){let t=Xb(),e=Vb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const Wb=O.createElement($b,null);class qb extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(es.Provider,{value:this.props.routeContext},O.createElement(P_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Hb(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(mf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(es.Provider,{value:e},r)}function Gb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||Oe(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:_}=n,I=p.route.loader&&g[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||I){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let _,I=!1,T=null,N=null;n&&(_=l&&p.route.id?l[p.route.id]:void 0,T=p.route.errorElement||Wb,u&&(d<0&&g===0?(Zb("route-fallback"),I=!0,N=null):d===g&&(I=!0,N=p.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,g+1)),w=()=>{let k;return _?k=T:I?k=N:p.route.Component?k=O.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=f,O.createElement(Hb,{match:p,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?O.createElement(qb,{location:n.location,revalidation:n.revalidation,component:T,error:_,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var R_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(R_||{}),j_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(j_||{});function Kb(t){let e=O.useContext(mf);return e||Oe(!1),e}function Qb(t){let e=O.useContext(Fb);return e||Oe(!1),e}function Yb(t){let e=O.useContext(es);return e||Oe(!1),e}function D_(t){let e=Yb(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function Xb(){var t;let e=O.useContext(P_),n=Qb(),r=D_();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Jb(){let{router:t}=Kb(R_.UseNavigateStable),e=D_(j_.UseNavigateStable),n=O.useRef(!1);return C_(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,bo({fromRouteId:e},i)))},[t,e])}const Cg={};function Zb(t,e,n){Cg[t]||(Cg[t]=!0)}function eS(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function gf(t){let{to:e,replace:n,state:r,relative:s}=t;Bo()||Oe(!1);let{future:i,static:o}=O.useContext(Uo),{matches:l}=O.useContext(es),{pathname:u}=_u(),d=pf(),f=N_(e,k_(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return O.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function $t(t){Oe(!1)}function tS(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Xn.Pop,navigator:i,static:o=!1,future:l}=t;Bo()&&Oe(!1);let u=e.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:u,navigator:i,static:o,future:bo({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=ri(r));let{pathname:f="/",search:p="",hash:g="",state:_=null,key:I="default"}=r,T=O.useMemo(()=>{let N=S_(f,u);return N==null?null:{location:{pathname:N,search:p,hash:g,state:_,key:I},navigationType:s}},[u,f,p,g,_,I,s]);return T==null?null:O.createElement(Uo.Provider,{value:d},O.createElement(vu.Provider,{children:n,value:T}))}function O_(t){let{children:e,location:n}=t;return Bb(Hd(e),n)}new Promise(()=>{});function Hd(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,Hd(r.props.children,i));return}r.type!==$t&&Oe(!1),!r.props.index||!r.props.children||Oe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Hd(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const nS="6";try{window.__reactRouterVersion=nS}catch{}const rS="startTransition",Rg=eT[rS];function sS(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=hb({window:s,v5Compat:!0}));let o=i.current,[l,u]=O.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=O.useCallback(p=>{d&&Rg?Rg(()=>u(p)):u(p)},[u,d]);return O.useLayoutEffect(()=>o.listen(f),[o,f]),O.useEffect(()=>eS(r),[r]),O.createElement(tS,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var jg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(jg||(jg={}));var Dg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Dg||(Dg={}));var Og={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},iS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},V_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,_=d&63;u||(_=64,o||(g=64)),r.push(n[f],n[p],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(M_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new oS;const g=i<<2|l>>4;if(r.push(g),d!==64){const _=l<<4&240|d>>2;if(r.push(_),p!==64){const I=d<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class oS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aS=function(t){const e=M_(t);return V_.encodeByteArray(e,!0)},Ol=function(t){return aS(t).replace(/\./g,"")},L_=function(t){try{return V_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=()=>lS().__FIREBASE_DEFAULTS__,cS=()=>{if(typeof process>"u"||typeof Og>"u")return;const t=Og.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&L_(t[1]);return e&&JSON.parse(e)},wu=()=>{try{return uS()||cS()||dS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},F_=t=>{var e,n;return(n=(e=wu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hS=t=>{const e=F_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},U_=()=>{var t;return(t=wu())===null||t===void 0?void 0:t.config},B_=t=>{var e;return(e=wu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ol(JSON.stringify(n)),Ol(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function gS(){var t;const e=(t=wu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _S(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wS(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xS(){return!gS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ES(){try{return typeof indexedDB=="object"}catch{return!1}}function TS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS="FirebaseError";class Dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IS,Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zo.prototype.create)}}class zo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?bS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Dn(s,l,r)}}function bS(t,e){return t.replace(SS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const SS=/\{\$([^}]+)}/g;function kS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ml(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Mg(i)&&Mg(o)){if(!Ml(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Mg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function NS(t,e){const n=new AS(t,e);return n.subscribe.bind(n)}class AS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Lc),s.error===void 0&&(s.error=Lc),s.complete===void 0&&(s.complete=Lc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t){return t&&t._delegate?t._delegate:t}class Hr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jS(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RS(t){return t===Ar?void 0:t}function jS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(te||(te={}));const OS={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},MS=te.INFO,VS={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},LS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=VS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yf{constructor(e){this.name=e,this._logLevel=MS,this._logHandler=LS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const FS=(t,e)=>e.some(n=>t instanceof n);let Vg,Lg;function US(){return Vg||(Vg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BS(){return Lg||(Lg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const z_=new WeakMap,Gd=new WeakMap,$_=new WeakMap,Fc=new WeakMap,vf=new WeakMap;function zS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ar(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&z_.set(n,t)}).catch(()=>{}),vf.set(e,t),e}function $S(t){if(Gd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Gd.set(t,e)}let Kd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Gd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ar(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function WS(t){Kd=t(Kd)}function qS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Uc(this),e,...n);return $_.set(r,e.sort?e.sort():[e]),ar(r)}:BS().includes(t)?function(...e){return t.apply(Uc(this),e),ar(z_.get(this))}:function(...e){return ar(t.apply(Uc(this),e))}}function HS(t){return typeof t=="function"?qS(t):(t instanceof IDBTransaction&&$S(t),FS(t,US())?new Proxy(t,Kd):t)}function ar(t){if(t instanceof IDBRequest)return zS(t);if(Fc.has(t))return Fc.get(t);const e=HS(t);return e!==t&&(Fc.set(t,e),vf.set(e,t)),e}const Uc=t=>vf.get(t);function GS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=ar(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ar(o.result),u.oldVersion,u.newVersion,ar(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const KS=["get","getKey","getAll","getAllKeys","count"],QS=["put","add","delete","clear"],Bc=new Map;function Fg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bc.get(e))return Bc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=QS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||KS.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return Bc.set(e,i),i}WS(t=>({...t,get:(e,n,r)=>Fg(e,n)||t.get(e,n,r),has:(e,n)=>!!Fg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XS(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qd="@firebase/app",Ug="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An=new yf("@firebase/app"),JS="@firebase/app-compat",ZS="@firebase/analytics-compat",e1="@firebase/analytics",t1="@firebase/app-check-compat",n1="@firebase/app-check",r1="@firebase/auth",s1="@firebase/auth-compat",i1="@firebase/database",o1="@firebase/data-connect",a1="@firebase/database-compat",l1="@firebase/functions",u1="@firebase/functions-compat",c1="@firebase/installations",d1="@firebase/installations-compat",h1="@firebase/messaging",f1="@firebase/messaging-compat",m1="@firebase/performance",p1="@firebase/performance-compat",g1="@firebase/remote-config",y1="@firebase/remote-config-compat",v1="@firebase/storage",_1="@firebase/storage-compat",w1="@firebase/firestore",x1="@firebase/vertexai-preview",E1="@firebase/firestore-compat",T1="firebase",I1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="[DEFAULT]",b1={[Qd]:"fire-core",[JS]:"fire-core-compat",[e1]:"fire-analytics",[ZS]:"fire-analytics-compat",[n1]:"fire-app-check",[t1]:"fire-app-check-compat",[r1]:"fire-auth",[s1]:"fire-auth-compat",[i1]:"fire-rtdb",[o1]:"fire-data-connect",[a1]:"fire-rtdb-compat",[l1]:"fire-fn",[u1]:"fire-fn-compat",[c1]:"fire-iid",[d1]:"fire-iid-compat",[h1]:"fire-fcm",[f1]:"fire-fcm-compat",[m1]:"fire-perf",[p1]:"fire-perf-compat",[g1]:"fire-rc",[y1]:"fire-rc-compat",[v1]:"fire-gcs",[_1]:"fire-gcs-compat",[w1]:"fire-fst",[E1]:"fire-fst-compat",[x1]:"fire-vertex","fire-js":"fire-js",[T1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=new Map,S1=new Map,Xd=new Map;function Bg(t,e){try{t.container.addComponent(e)}catch(n){An.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qs(t){const e=t.name;if(Xd.has(e))return An.debug(`There were multiple attempts to register component ${e}.`),!1;Xd.set(e,t);for(const n of Vl.values())Bg(n,t);for(const n of S1.values())Bg(n,t);return!0}function _f(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},lr=new zo("app","Firebase",k1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si=I1;function W_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Yd,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw lr.create("bad-app-name",{appName:String(s)});if(n||(n=U_()),!n)throw lr.create("no-options");const i=Vl.get(s);if(i){if(Ml(n,i.options)&&Ml(r,i.config))return i;throw lr.create("duplicate-app",{appName:s})}const o=new DS(s);for(const u of Xd.values())o.addComponent(u);const l=new N1(n,r,o);return Vl.set(s,l),l}function q_(t=Yd){const e=Vl.get(t);if(!e&&t===Yd&&U_())return W_();if(!e)throw lr.create("no-app",{appName:t});return e}function ur(t,e,n){var r;let s=(r=b1[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),An.warn(l.join(" "));return}qs(new Hr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="firebase-heartbeat-database",P1=1,So="firebase-heartbeat-store";let zc=null;function H_(){return zc||(zc=GS(A1,P1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(So)}catch(n){console.warn(n)}}}}).catch(t=>{throw lr.create("idb-open",{originalErrorMessage:t.message})})),zc}async function C1(t){try{const n=(await H_()).transaction(So),r=await n.objectStore(So).get(G_(t));return await n.done,r}catch(e){if(e instanceof Dn)An.warn(e.message);else{const n=lr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});An.warn(n.message)}}}async function zg(t,e){try{const r=(await H_()).transaction(So,"readwrite");await r.objectStore(So).put(e,G_(t)),await r.done}catch(n){if(n instanceof Dn)An.warn(n.message);else{const r=lr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});An.warn(r.message)}}}function G_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=1024,j1=30*24*60*60*1e3;class D1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$g();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=j1}),this._storage.overwrite(this._heartbeatsCache))}catch(r){An.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$g(),{heartbeatsToSend:r,unsentEntries:s}=O1(this._heartbeatsCache.heartbeats),i=Ol(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return An.warn(n),""}}}function $g(){return new Date().toISOString().substring(0,10)}function O1(t,e=R1){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Wg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Wg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ES()?TS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await C1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return zg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Wg(t){return Ol(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(t){qs(new Hr("platform-logger",e=>new YS(e),"PRIVATE")),qs(new Hr("heartbeat",e=>new D1(e),"PRIVATE")),ur(Qd,Ug,t),ur(Qd,Ug,"esm2017"),ur("fire-js","")}V1("");function wf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function K_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L1=K_,Q_=new zo("auth","Firebase",K_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=new yf("@firebase/auth");function F1(t,...e){Ll.logLevel<=te.WARN&&Ll.warn(`Auth (${si}): ${t}`,...e)}function nl(t,...e){Ll.logLevel<=te.ERROR&&Ll.error(`Auth (${si}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,...e){throw Ef(t,...e)}function Gt(t,...e){return Ef(t,...e)}function xf(t,e,n){const r=Object.assign(Object.assign({},L1()),{[e]:n});return new zo("auth","Firebase",r).create(e,{appName:t.name})}function Fr(t){return xf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function U1(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&on(t,"argument-error"),xf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ef(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Q_.create(t,...e)}function Q(t,e,...n){if(!t)throw Ef(e,...n)}function xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nl(e),new Error(e)}function Pn(t,e){t||xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function B1(){return qg()==="http:"||qg()==="https:"}function qg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B1()||vS()||"connection"in navigator)?navigator.onLine:!0}function $1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pn(n>e,"Short delay should be less than long delay!"),this.isMobile=pS()||_S()}get(){return z1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t,e){Pn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=new Wo(3e4,6e4);function If(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ii(t,e,n,r,s={}){return X_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=$o(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return yS()||(d.referrerPolicy="no-referrer"),Y_.fetch()(J_(t,t.config.apiHost,n,l),d)})}async function X_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},W1),e);try{const s=new G1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Fa(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fa(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Fa(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Fa(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw xf(t,f,d);on(t,f)}}catch(s){if(s instanceof Dn)throw s;on(t,"network-request-failed",{message:String(s)})}}async function H1(t,e,n,r,s={}){const i=await ii(t,e,n,r,s);return"mfaPendingCredential"in i&&on(t,"multi-factor-auth-required",{_serverResponse:i}),i}function J_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Tf(t.config,s):`${t.config.apiScheme}://${s}`}class G1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gt(this.auth,"network-request-failed")),q1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Fa(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Gt(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(t,e){return ii(t,"POST","/v1/accounts:delete",e)}async function Z_(t,e){return ii(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q1(t,e=!1){const n=Pe(t),r=await n.getIdToken(e),s=bf(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:eo($c(s.auth_time)),issuedAtTime:eo($c(s.iat)),expirationTime:eo($c(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $c(t){return Number(t)*1e3}function bf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nl("JWT malformed, contained fewer than 3 sections"),null;try{const s=L_(n);return s?JSON.parse(s):(nl("Failed to decode base64 JWT payload"),null)}catch(s){return nl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Hg(t){const e=bf(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dn&&Y1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Y1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eo(this.lastLoginAt),this.creationTime=eo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ko(t,Z_(n,{idToken:r}));Q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ew(i.providerUserInfo):[],l=Z1(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Zd(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function J1(t){const e=Pe(t);await Fl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z1(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ew(t){return t.map(e=>{var{providerId:n}=e,r=wf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(t,e){const n=await X_(t,{},async()=>{const r=$o({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=J_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Y_.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tk(t,e){return ii(t,"POST","/v2/accounts:revokeToken",If(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=Hg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await ek(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ds;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ds,this.toJSON())}_performRefresh(){return xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class En{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=wf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Zd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ko(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Q1(this,e)}reload(){return J1(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new En(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wn(this.auth.app))return Promise.reject(Fr(this.auth));const e=await this.getIdToken();return await ko(this,K1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(l=n.tenantId)!==null&&l!==void 0?l:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:k,emailVerified:j,isAnonymous:V,providerData:U,stsTokenManager:b}=n;Q(k&&b,e,"internal-error");const v=Ds.fromJSON(this.name,b);Q(typeof k=="string",e,"internal-error"),Fn(p,e.name),Fn(g,e.name),Q(typeof j=="boolean",e,"internal-error"),Q(typeof V=="boolean",e,"internal-error"),Fn(_,e.name),Fn(I,e.name),Fn(T,e.name),Fn(N,e.name),Fn(E,e.name),Fn(w,e.name);const x=new En({uid:k,auth:e,email:g,emailVerified:j,displayName:p,isAnonymous:V,photoURL:I,phoneNumber:_,tenantId:T,stsTokenManager:v,createdAt:E,lastLoginAt:w});return U&&Array.isArray(U)&&(x.providerData=U.map(S=>Object.assign({},S))),N&&(x._redirectEventId=N),x}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ds;s.updateFromServerResponse(n);const i=new En({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ew(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ds;l.updateFromIdToken(r);const u=new En({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Zd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg=new Map;function Tn(t){Pn(t instanceof Function,"Expected a class definition");let e=Gg.get(t);return e?(Pn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tw.type="NONE";const Kg=tw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t,e,n){return`firebase:${t}:${e}:${n}`}class Os{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=rl(this.userKey,s.apiKey,i),this.fullPersistenceKey=rl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?En._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Os(Tn(Kg),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Tn(Kg);const o=rl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const p=En._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Os(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Os(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aw(e))return"Blackberry";if(lw(e))return"Webos";if(rw(e))return"Safari";if((e.includes("chrome/")||sw(e))&&!e.includes("edge/"))return"Chrome";if(ow(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nw(t=lt()){return/firefox\//i.test(t)}function rw(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sw(t=lt()){return/crios\//i.test(t)}function iw(t=lt()){return/iemobile/i.test(t)}function ow(t=lt()){return/android/i.test(t)}function aw(t=lt()){return/blackberry/i.test(t)}function lw(t=lt()){return/webos/i.test(t)}function Sf(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nk(t=lt()){var e;return Sf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rk(){return wS()&&document.documentMode===10}function uw(t=lt()){return Sf(t)||ow(t)||lw(t)||aw(t)||/windows phone/i.test(t)||iw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e=[]){let n;switch(t){case"Browser":n=Qg(lt());break;case"Worker":n=`${Qg(lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${si}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ik(t,e={}){return ii(t,"GET","/v2/passwordPolicy",If(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=6;class ak{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:ok,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yg(this),this.idTokenSubscription=new Yg(this),this.beforeStateQueue=new sk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Tn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Os.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Z_(this,{idToken:e}),r=await En._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(wn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wn(this.app))return Promise.reject(Fr(this));const n=e?Pe(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wn(this.app)?Promise.reject(Fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wn(this.app)?Promise.reject(Fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ik(this),n=new ak(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Tn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Os.create(this,[Tn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&F1(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xu(t){return Pe(t)}class Yg{constructor(e){this.auth=e,this.observer=null,this.addObserver=NS(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function uk(t){kf=t}function ck(t){return kf.loadJS(t)}function dk(){return kf.gapiScript}function hk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(t,e){const n=_f(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ml(i,e??{}))return s;on(s,"already-initialized")}return n.initialize({options:e})}function mk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Tn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function pk(t,e,n){const r=xu(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=dw(e),{host:o,port:l}=gk(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),yk()}function dw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function gk(t){const e=dw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Xg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Xg(o)}}}function Xg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return xn("not implemented")}_getIdTokenResponse(e){return xn("not implemented")}_linkToIdToken(e,n){return xn("not implemented")}_getReauthenticationResolver(e){return xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ms(t,e){return H1(t,"POST","/v1/accounts:signInWithIdp",If(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="http://localhost";class Gr extends hw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Gr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):on("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=wf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Gr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ms(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ms(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ms(e,n)}buildRequest(){const e={requestUri:vk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$o(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Nf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends qo{constructor(){super("facebook.com")}static credential(e){return Gr._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qn.credential(e.oauthAccessToken)}catch{return null}}}qn.FACEBOOK_SIGN_IN_METHOD="facebook.com";qn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn extends qo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Gr._fromParams({providerId:yn.PROVIDER_ID,signInMethod:yn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return yn.credentialFromTaggedObject(e)}static credentialFromError(e){return yn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return yn.credential(n,r)}catch{return null}}}yn.GOOGLE_SIGN_IN_METHOD="google.com";yn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends qo{constructor(){super("github.com")}static credential(e){return Gr._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hn.credential(e.oauthAccessToken)}catch{return null}}}Hn.GITHUB_SIGN_IN_METHOD="github.com";Hn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends qo{constructor(){super("twitter.com")}static credential(e,n){return Gr._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gn.credential(n,r)}catch{return null}}}Gn.TWITTER_SIGN_IN_METHOD="twitter.com";Gn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await En._fromIdTokenResponse(e,r,s),o=Jg(r);return new Hs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Jg(r);return new Hs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Jg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends Dn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ul.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ul(e,n,r,s)}}function fw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ul._fromErrorAndOperation(t,i,e,r):i})}async function _k(t,e,n=!1){const r=await ko(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(t,e,n=!1){const{auth:r}=t;if(wn(r.app))return Promise.reject(Fr(r));const s="reauthenticate";try{const i=await ko(t,fw(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=bf(i.idToken);Q(o,r,"internal-error");const{sub:l}=o;return Q(t.uid===l,r,"user-mismatch"),Hs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&on(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xk(t,e,n=!1){if(wn(t.app))return Promise.reject(Fr(t));const r="signIn",s=await fw(t,r,e),i=await Hs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function Ek(t,e,n,r){return Pe(t).onIdTokenChanged(e,n,r)}function Tk(t,e,n){return Pe(t).beforeAuthStateChanged(e,n)}function Ik(t,e,n,r){return Pe(t).onAuthStateChanged(e,n,r)}function bk(t){return Pe(t).signOut()}const Bl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bl,"1"),this.storage.removeItem(Bl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=1e3,kk=10;class pw extends mw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);rk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,kk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Sk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pw.type="LOCAL";const Nk=pw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw extends mw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}gw.type="SESSION";const yw=gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Eu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await Ak(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Eu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=Af("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return window}function Ck(t){nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(){return typeof nn().WorkerGlobalScope<"u"&&typeof nn().importScripts=="function"}async function Rk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Dk(){return vw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="firebaseLocalStorageDb",Ok=1,zl="firebaseLocalStorage",ww="fbase_key";class Ho{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Tu(t,e){return t.transaction([zl],e?"readwrite":"readonly").objectStore(zl)}function Mk(){const t=indexedDB.deleteDatabase(_w);return new Ho(t).toPromise()}function eh(){const t=indexedDB.open(_w,Ok);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zl,{keyPath:ww})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zl)?e(r):(r.close(),await Mk(),e(await eh()))})})}async function Zg(t,e,n){const r=Tu(t,!0).put({[ww]:e,value:n});return new Ho(r).toPromise()}async function Vk(t,e){const n=Tu(t,!1).get(e),r=await new Ho(n).toPromise();return r===void 0?null:r.value}function ey(t,e){const n=Tu(t,!0).delete(e);return new Ho(n).toPromise()}const Lk=800,Fk=3;class xw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Fk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Eu._getInstance(Dk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Rk(),!this.activeServiceWorker)return;this.sender=new Pk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await eh();return await Zg(e,Bl,"1"),await ey(e,Bl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Zg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Vk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ey(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Tu(s,!1).getAll();return new Ho(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Lk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xw.type="LOCAL";const Uk=xw;new Wo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t,e){return e?Tn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends hw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ms(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ms(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ms(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Bk(t){return xk(t.auth,new Pf(t),t.bypassAuthState)}function zk(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),wk(n,new Pf(t),t.bypassAuthState)}async function $k(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),_k(n,new Pf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bk;case"linkViaPopup":case"linkViaRedirect":return $k;case"reauthViaPopup":case"reauthViaRedirect":return zk;default:on(this.auth,"internal-error")}}resolve(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new Wo(2e3,1e4);async function qk(t,e,n){if(wn(t.app))return Promise.reject(Gt(t,"operation-not-supported-in-this-environment"));const r=xu(t);U1(t,e,Nf);const s=Ew(r,n);return new Dr(r,"signInViaPopup",e,s).executeNotNull()}class Dr extends Tw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Dr.currentPopupAction&&Dr.currentPopupAction.cancel(),Dr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Pn(this.filter.length===1,"Popup operations only handle one event");const e=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Wk.get())};e()}}Dr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk="pendingRedirect",sl=new Map;class Gk extends Tw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sl.get(this.auth._key());if(!e){try{const r=await Kk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sl.set(this.auth._key(),e)}return this.bypassAuthState||sl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Kk(t,e){const n=Xk(e),r=Yk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Qk(t,e){sl.set(t._key(),e)}function Yk(t){return Tn(t._redirectPersistence)}function Xk(t){return rl(Hk,t.config.apiKey,t.name)}async function Jk(t,e,n=!1){if(wn(t.app))return Promise.reject(Fr(t));const r=xu(t),s=Ew(r,e),o=await new Gk(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=10*60*1e3;class eN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Iw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Zk&&this.cachedEventUids.clear(),this.cachedEventUids.has(ty(e))}saveEventToCache(e){this.cachedEventUids.add(ty(e)),this.lastProcessedEventTime=Date.now()}}function ty(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Iw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e={}){return ii(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sN=/^https?/;async function iN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nN(t);for(const n of e)try{if(oN(n))return}catch{}on(t,"unauthorized-domain")}function oN(t){const e=Jd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!sN.test(n))return!1;if(rN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new Wo(3e4,6e4);function ny(){const t=nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lN(t){return new Promise((e,n)=>{var r,s,i;function o(){ny(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ny(),n(Gt(t,"network-request-failed"))},timeout:aN.get()})}if(!((s=(r=nn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=nn().gapi)===null||i===void 0)&&i.load)o();else{const l=hk("iframefcb");return nn()[l]=()=>{gapi.load?o():n(Gt(t,"network-request-failed"))},ck(`${dk()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw il=null,e})}let il=null;function uN(t){return il=il||lN(t),il}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new Wo(5e3,15e3),dN="__/auth/iframe",hN="emulator/auth/iframe",fN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pN(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tf(e,hN):`https://${t.config.authDomain}/${dN}`,r={apiKey:e.apiKey,appName:t.name,v:si},s=mN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$o(r).slice(1)}`}async function gN(t){const e=await uN(t),n=nn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:pN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Gt(t,"network-request-failed"),l=nn().setTimeout(()=>{i(o)},cN.get());function u(){nn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vN=500,_N=600,wN="_blank",xN="http://localhost";class ry{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EN(t,e,n,r=vN,s=_N){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},yN),{width:r.toString(),height:s.toString(),top:i,left:o}),d=lt().toLowerCase();n&&(l=sw(d)?wN:n),nw(d)&&(e=e||xN,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[_,I])=>`${g}${_}=${I},`,"");if(nk(d)&&l!=="_self")return TN(e||"",l),new ry(null);const p=window.open(e||"",l,f);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new ry(p)}function TN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN="__/auth/handler",bN="emulator/auth/handler",SN=encodeURIComponent("fac");async function sy(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:si,eventId:s};if(e instanceof Nf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof qo){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${SN}=${encodeURIComponent(u)}`:"";return`${kN(t)}?${$o(l).slice(1)}${d}`}function kN({config:t}){return t.emulator?Tf(t,bN):`https://${t.authDomain}/${IN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="webStorageSupport";class NN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yw,this._completeRedirectFn=Jk,this._overrideRedirectResult=Qk}async _openPopup(e,n,r,s){var i;Pn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await sy(e,n,r,Jd(),s);return EN(e,o,Af())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await sy(e,n,r,Jd(),s);return Ck(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Pn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gN(e),r=new eN(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wc,{type:Wc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Wc];o!==void 0&&n(!!o),on(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uw()||rw()||Sf()}}const AN=NN;var iy="@firebase/auth",oy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RN(t){qs(new Hr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cw(t)},d=new lk(r,s,i,u);return mk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qs(new Hr("auth-internal",e=>{const n=xu(e.getProvider("auth").getImmediate());return(r=>new PN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ur(iy,oy,CN(t)),ur(iy,oy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=5*60,DN=B_("authIdTokenMaxAge")||jN;let ay=null;const ON=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>DN)return;const s=n==null?void 0:n.token;ay!==s&&(ay=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function MN(t=q_()){const e=_f(t,"auth");if(e.isInitialized())return e.getImmediate();const n=fk(t,{popupRedirectResolver:AN,persistence:[Uk,Nk,yw]}),r=B_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=ON(i.toString());Tk(n,o,()=>o(n.currentUser)),Ek(n,l=>o(l))}}const s=F_("auth");return s&&pk(n,`http://${s}`),n}function VN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}uk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Gt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",VN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RN("Browser");var LN="firebase",FN="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur(LN,FN,"app");var ly=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ur,bw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,v){function x(){}x.prototype=v.prototype,b.D=v.prototype,b.prototype=new x,b.prototype.constructor=b,b.C=function(S,P,R){for(var A=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)A[Ct-2]=arguments[Ct];return v.prototype[P].apply(S,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,v,x){x||(x=0);var S=Array(16);if(typeof v=="string")for(var P=0;16>P;++P)S[P]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(P=0;16>P;++P)S[P]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=b.g[0],x=b.g[1],P=b.g[2];var R=b.g[3],A=v+(R^x&(P^R))+S[0]+3614090360&4294967295;v=x+(A<<7&4294967295|A>>>25),A=R+(P^v&(x^P))+S[1]+3905402710&4294967295,R=v+(A<<12&4294967295|A>>>20),A=P+(x^R&(v^x))+S[2]+606105819&4294967295,P=R+(A<<17&4294967295|A>>>15),A=x+(v^P&(R^v))+S[3]+3250441966&4294967295,x=P+(A<<22&4294967295|A>>>10),A=v+(R^x&(P^R))+S[4]+4118548399&4294967295,v=x+(A<<7&4294967295|A>>>25),A=R+(P^v&(x^P))+S[5]+1200080426&4294967295,R=v+(A<<12&4294967295|A>>>20),A=P+(x^R&(v^x))+S[6]+2821735955&4294967295,P=R+(A<<17&4294967295|A>>>15),A=x+(v^P&(R^v))+S[7]+4249261313&4294967295,x=P+(A<<22&4294967295|A>>>10),A=v+(R^x&(P^R))+S[8]+1770035416&4294967295,v=x+(A<<7&4294967295|A>>>25),A=R+(P^v&(x^P))+S[9]+2336552879&4294967295,R=v+(A<<12&4294967295|A>>>20),A=P+(x^R&(v^x))+S[10]+4294925233&4294967295,P=R+(A<<17&4294967295|A>>>15),A=x+(v^P&(R^v))+S[11]+2304563134&4294967295,x=P+(A<<22&4294967295|A>>>10),A=v+(R^x&(P^R))+S[12]+1804603682&4294967295,v=x+(A<<7&4294967295|A>>>25),A=R+(P^v&(x^P))+S[13]+4254626195&4294967295,R=v+(A<<12&4294967295|A>>>20),A=P+(x^R&(v^x))+S[14]+2792965006&4294967295,P=R+(A<<17&4294967295|A>>>15),A=x+(v^P&(R^v))+S[15]+1236535329&4294967295,x=P+(A<<22&4294967295|A>>>10),A=v+(P^R&(x^P))+S[1]+4129170786&4294967295,v=x+(A<<5&4294967295|A>>>27),A=R+(x^P&(v^x))+S[6]+3225465664&4294967295,R=v+(A<<9&4294967295|A>>>23),A=P+(v^x&(R^v))+S[11]+643717713&4294967295,P=R+(A<<14&4294967295|A>>>18),A=x+(R^v&(P^R))+S[0]+3921069994&4294967295,x=P+(A<<20&4294967295|A>>>12),A=v+(P^R&(x^P))+S[5]+3593408605&4294967295,v=x+(A<<5&4294967295|A>>>27),A=R+(x^P&(v^x))+S[10]+38016083&4294967295,R=v+(A<<9&4294967295|A>>>23),A=P+(v^x&(R^v))+S[15]+3634488961&4294967295,P=R+(A<<14&4294967295|A>>>18),A=x+(R^v&(P^R))+S[4]+3889429448&4294967295,x=P+(A<<20&4294967295|A>>>12),A=v+(P^R&(x^P))+S[9]+568446438&4294967295,v=x+(A<<5&4294967295|A>>>27),A=R+(x^P&(v^x))+S[14]+3275163606&4294967295,R=v+(A<<9&4294967295|A>>>23),A=P+(v^x&(R^v))+S[3]+4107603335&4294967295,P=R+(A<<14&4294967295|A>>>18),A=x+(R^v&(P^R))+S[8]+1163531501&4294967295,x=P+(A<<20&4294967295|A>>>12),A=v+(P^R&(x^P))+S[13]+2850285829&4294967295,v=x+(A<<5&4294967295|A>>>27),A=R+(x^P&(v^x))+S[2]+4243563512&4294967295,R=v+(A<<9&4294967295|A>>>23),A=P+(v^x&(R^v))+S[7]+1735328473&4294967295,P=R+(A<<14&4294967295|A>>>18),A=x+(R^v&(P^R))+S[12]+2368359562&4294967295,x=P+(A<<20&4294967295|A>>>12),A=v+(x^P^R)+S[5]+4294588738&4294967295,v=x+(A<<4&4294967295|A>>>28),A=R+(v^x^P)+S[8]+2272392833&4294967295,R=v+(A<<11&4294967295|A>>>21),A=P+(R^v^x)+S[11]+1839030562&4294967295,P=R+(A<<16&4294967295|A>>>16),A=x+(P^R^v)+S[14]+4259657740&4294967295,x=P+(A<<23&4294967295|A>>>9),A=v+(x^P^R)+S[1]+2763975236&4294967295,v=x+(A<<4&4294967295|A>>>28),A=R+(v^x^P)+S[4]+1272893353&4294967295,R=v+(A<<11&4294967295|A>>>21),A=P+(R^v^x)+S[7]+4139469664&4294967295,P=R+(A<<16&4294967295|A>>>16),A=x+(P^R^v)+S[10]+3200236656&4294967295,x=P+(A<<23&4294967295|A>>>9),A=v+(x^P^R)+S[13]+681279174&4294967295,v=x+(A<<4&4294967295|A>>>28),A=R+(v^x^P)+S[0]+3936430074&4294967295,R=v+(A<<11&4294967295|A>>>21),A=P+(R^v^x)+S[3]+3572445317&4294967295,P=R+(A<<16&4294967295|A>>>16),A=x+(P^R^v)+S[6]+76029189&4294967295,x=P+(A<<23&4294967295|A>>>9),A=v+(x^P^R)+S[9]+3654602809&4294967295,v=x+(A<<4&4294967295|A>>>28),A=R+(v^x^P)+S[12]+3873151461&4294967295,R=v+(A<<11&4294967295|A>>>21),A=P+(R^v^x)+S[15]+530742520&4294967295,P=R+(A<<16&4294967295|A>>>16),A=x+(P^R^v)+S[2]+3299628645&4294967295,x=P+(A<<23&4294967295|A>>>9),A=v+(P^(x|~R))+S[0]+4096336452&4294967295,v=x+(A<<6&4294967295|A>>>26),A=R+(x^(v|~P))+S[7]+1126891415&4294967295,R=v+(A<<10&4294967295|A>>>22),A=P+(v^(R|~x))+S[14]+2878612391&4294967295,P=R+(A<<15&4294967295|A>>>17),A=x+(R^(P|~v))+S[5]+4237533241&4294967295,x=P+(A<<21&4294967295|A>>>11),A=v+(P^(x|~R))+S[12]+1700485571&4294967295,v=x+(A<<6&4294967295|A>>>26),A=R+(x^(v|~P))+S[3]+2399980690&4294967295,R=v+(A<<10&4294967295|A>>>22),A=P+(v^(R|~x))+S[10]+4293915773&4294967295,P=R+(A<<15&4294967295|A>>>17),A=x+(R^(P|~v))+S[1]+2240044497&4294967295,x=P+(A<<21&4294967295|A>>>11),A=v+(P^(x|~R))+S[8]+1873313359&4294967295,v=x+(A<<6&4294967295|A>>>26),A=R+(x^(v|~P))+S[15]+4264355552&4294967295,R=v+(A<<10&4294967295|A>>>22),A=P+(v^(R|~x))+S[6]+2734768916&4294967295,P=R+(A<<15&4294967295|A>>>17),A=x+(R^(P|~v))+S[13]+1309151649&4294967295,x=P+(A<<21&4294967295|A>>>11),A=v+(P^(x|~R))+S[4]+4149444226&4294967295,v=x+(A<<6&4294967295|A>>>26),A=R+(x^(v|~P))+S[11]+3174756917&4294967295,R=v+(A<<10&4294967295|A>>>22),A=P+(v^(R|~x))+S[2]+718787259&4294967295,P=R+(A<<15&4294967295|A>>>17),A=x+(R^(P|~v))+S[9]+3951481745&4294967295,b.g[0]=b.g[0]+v&4294967295,b.g[1]=b.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,b.g[2]=b.g[2]+P&4294967295,b.g[3]=b.g[3]+R&4294967295}r.prototype.u=function(b,v){v===void 0&&(v=b.length);for(var x=v-this.blockSize,S=this.B,P=this.h,R=0;R<v;){if(P==0)for(;R<=x;)s(this,b,R),R+=this.blockSize;if(typeof b=="string"){for(;R<v;)if(S[P++]=b.charCodeAt(R++),P==this.blockSize){s(this,S),P=0;break}}else for(;R<v;)if(S[P++]=b[R++],P==this.blockSize){s(this,S),P=0;break}}this.h=P,this.o+=v},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var v=1;v<b.length-8;++v)b[v]=0;var x=8*this.o;for(v=b.length-8;v<b.length;++v)b[v]=x&255,x/=256;for(this.u(b),b=Array(16),v=x=0;4>v;++v)for(var S=0;32>S;S+=8)b[x++]=this.g[v]>>>S&255;return b};function i(b,v){var x=l;return Object.prototype.hasOwnProperty.call(x,b)?x[b]:x[b]=v(b)}function o(b,v){this.h=v;for(var x=[],S=!0,P=b.length-1;0<=P;P--){var R=b[P]|0;S&&R==v||(x[P]=R,S=!1)}this.g=x}var l={};function u(b){return-128<=b&&128>b?i(b,function(v){return new o([v|0],0>v?-1:0)}):new o([b|0],0>b?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return p;if(0>b)return N(d(-b));for(var v=[],x=1,S=0;b>=x;S++)v[S]=b/x|0,x*=4294967296;return new o(v,0)}function f(b,v){if(b.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(b.charAt(0)=="-")return N(f(b.substring(1),v));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=d(Math.pow(v,8)),S=p,P=0;P<b.length;P+=8){var R=Math.min(8,b.length-P),A=parseInt(b.substring(P,P+R),v);8>R?(R=d(Math.pow(v,R)),S=S.j(R).add(d(A))):(S=S.j(x),S=S.add(d(A)))}return S}var p=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(T(this))return-N(this).m();for(var b=0,v=1,x=0;x<this.g.length;x++){var S=this.i(x);b+=(0<=S?S:4294967296+S)*v,v*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(I(this))return"0";if(T(this))return"-"+N(this).toString(b);for(var v=d(Math.pow(b,6)),x=this,S="";;){var P=j(x,v).g;x=E(x,P.j(v));var R=((0<x.g.length?x.g[0]:x.h)>>>0).toString(b);if(x=P,I(x))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function I(b){if(b.h!=0)return!1;for(var v=0;v<b.g.length;v++)if(b.g[v]!=0)return!1;return!0}function T(b){return b.h==-1}t.l=function(b){return b=E(this,b),T(b)?-1:I(b)?0:1};function N(b){for(var v=b.g.length,x=[],S=0;S<v;S++)x[S]=~b.g[S];return new o(x,~b.h).add(g)}t.abs=function(){return T(this)?N(this):this},t.add=function(b){for(var v=Math.max(this.g.length,b.g.length),x=[],S=0,P=0;P<=v;P++){var R=S+(this.i(P)&65535)+(b.i(P)&65535),A=(R>>>16)+(this.i(P)>>>16)+(b.i(P)>>>16);S=A>>>16,R&=65535,A&=65535,x[P]=A<<16|R}return new o(x,x[x.length-1]&-2147483648?-1:0)};function E(b,v){return b.add(N(v))}t.j=function(b){if(I(this)||I(b))return p;if(T(this))return T(b)?N(this).j(N(b)):N(N(this).j(b));if(T(b))return N(this.j(N(b)));if(0>this.l(_)&&0>b.l(_))return d(this.m()*b.m());for(var v=this.g.length+b.g.length,x=[],S=0;S<2*v;S++)x[S]=0;for(S=0;S<this.g.length;S++)for(var P=0;P<b.g.length;P++){var R=this.i(S)>>>16,A=this.i(S)&65535,Ct=b.i(P)>>>16,Er=b.i(P)&65535;x[2*S+2*P]+=A*Er,w(x,2*S+2*P),x[2*S+2*P+1]+=R*Er,w(x,2*S+2*P+1),x[2*S+2*P+1]+=A*Ct,w(x,2*S+2*P+1),x[2*S+2*P+2]+=R*Ct,w(x,2*S+2*P+2)}for(S=0;S<v;S++)x[S]=x[2*S+1]<<16|x[2*S];for(S=v;S<2*v;S++)x[S]=0;return new o(x,0)};function w(b,v){for(;(b[v]&65535)!=b[v];)b[v+1]+=b[v]>>>16,b[v]&=65535,v++}function k(b,v){this.g=b,this.h=v}function j(b,v){if(I(v))throw Error("division by zero");if(I(b))return new k(p,p);if(T(b))return v=j(N(b),v),new k(N(v.g),N(v.h));if(T(v))return v=j(b,N(v)),new k(N(v.g),v.h);if(30<b.g.length){if(T(b)||T(v))throw Error("slowDivide_ only works with positive integers.");for(var x=g,S=v;0>=S.l(b);)x=V(x),S=V(S);var P=U(x,1),R=U(S,1);for(S=U(S,2),x=U(x,2);!I(S);){var A=R.add(S);0>=A.l(b)&&(P=P.add(x),R=A),S=U(S,1),x=U(x,1)}return v=E(b,P.j(v)),new k(P,v)}for(P=p;0<=b.l(v);){for(x=Math.max(1,Math.floor(b.m()/v.m())),S=Math.ceil(Math.log(x)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=d(x),A=R.j(v);T(A)||0<A.l(b);)x-=S,R=d(x),A=R.j(v);I(R)&&(R=g),P=P.add(R),b=E(b,A)}return new k(P,b)}t.A=function(b){return j(this,b).h},t.and=function(b){for(var v=Math.max(this.g.length,b.g.length),x=[],S=0;S<v;S++)x[S]=this.i(S)&b.i(S);return new o(x,this.h&b.h)},t.or=function(b){for(var v=Math.max(this.g.length,b.g.length),x=[],S=0;S<v;S++)x[S]=this.i(S)|b.i(S);return new o(x,this.h|b.h)},t.xor=function(b){for(var v=Math.max(this.g.length,b.g.length),x=[],S=0;S<v;S++)x[S]=this.i(S)^b.i(S);return new o(x,this.h^b.h)};function V(b){for(var v=b.g.length+1,x=[],S=0;S<v;S++)x[S]=b.i(S)<<1|b.i(S-1)>>>31;return new o(x,b.h)}function U(b,v){var x=v>>5;v%=32;for(var S=b.g.length-x,P=[],R=0;R<S;R++)P[R]=0<v?b.i(R+x)>>>v|b.i(R+x+1)<<32-v:b.i(R+x);return new o(P,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Ur=o}).apply(typeof ly<"u"?ly:typeof self<"u"?self:typeof window<"u"?window:{});var Ua=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sw,zi,kw,ol,th,Nw,Aw,Pw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ua=="object"&&Ua];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var C=a[y];if(!(C in m))break e;m=m[C]}a=a[a.length-1],y=m[a],h=h(y),h!=y&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,y=!1,C={next:function(){if(!y&&m<a.length){var D=m++;return{value:h(D,a[D]),done:!1}}return y=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,y),a.apply(h,C)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function _(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function I(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(y,C,D){for(var B=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)B[ce-2]=arguments[ce];return h.prototype[C].apply(y,B)}}function T(a){const h=a.length;if(0<h){const m=Array(h);for(let y=0;y<h;y++)m[y]=a[y];return m}return[]}function N(a,h){for(let m=1;m<arguments.length;m++){const y=arguments[m];if(u(y)){const C=a.length||0,D=y.length||0;a.length=C+D;for(let B=0;B<D;B++)a[C+B]=y[B]}else a.push(y)}}class E{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(a){return/^[\s\xa0]*$/.test(a)}function k(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var V=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function U(a,h,m){for(const y in a)h.call(m,a[y],y,a)}function b(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function v(a){const h={};for(const m in a)h[m]=a[m];return h}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(a,h){let m,y;for(let C=1;C<arguments.length;C++){y=arguments[C];for(m in y)a[m]=y[m];for(let D=0;D<x.length;D++)m=x[D],Object.prototype.hasOwnProperty.call(y,m)&&(a[m]=y[m])}}function P(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function R(a){l.setTimeout(()=>{throw a},0)}function A(){var a=X;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class Ct{constructor(){this.h=this.g=null}add(h,m){const y=Er.get();y.set(h,m),this.h?this.h.next=y:this.g=y,this.h=y}}var Er=new E(()=>new hi,a=>a.reset());class hi{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ln,$=!1,X=new Ct,J=()=>{const a=l.Promise.resolve(void 0);ln=()=>{a.then(_e)}};var _e=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(m){R(m)}var h=Er;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ke(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ke.prototype.h=function(){this.defaultPrevented=!0};var un=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function cn(a,h){if(ke.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(V){e:{try{j(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:dn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&cn.aa.h.call(this)}}I(cn,ke);var dn={2:"touch",3:"pen",4:"mouse"};cn.prototype.h=function(){cn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var hn="closure_listenable_"+(1e6*Math.random()|0),aE=0;function lE(a,h,m,y,C){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!y,this.ha=C,this.key=++aE,this.da=this.fa=!1}function sa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function ia(a){this.src=a,this.g={},this.h=0}ia.prototype.add=function(a,h,m,y,C){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var B=$u(a,h,y,C);return-1<B?(h=a[B],m||(h.fa=!1)):(h=new lE(h,this.src,D,!!y,C),h.fa=m,a.push(h)),h};function zu(a,h){var m=h.type;if(m in a.g){var y=a.g[m],C=Array.prototype.indexOf.call(y,h,void 0),D;(D=0<=C)&&Array.prototype.splice.call(y,C,1),D&&(sa(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function $u(a,h,m,y){for(var C=0;C<a.length;++C){var D=a[C];if(!D.da&&D.listener==h&&D.capture==!!m&&D.ha==y)return C}return-1}var Wu="closure_lm_"+(1e6*Math.random()|0),qu={};function vm(a,h,m,y,C){if(Array.isArray(h)){for(var D=0;D<h.length;D++)vm(a,h[D],m,y,C);return null}return m=xm(m),a&&a[hn]?a.K(h,m,d(y)?!!y.capture:!1,C):uE(a,h,m,!1,y,C)}function uE(a,h,m,y,C,D){if(!h)throw Error("Invalid event type");var B=d(C)?!!C.capture:!!C,ce=Gu(a);if(ce||(a[Wu]=ce=new ia(a)),m=ce.add(h,m,y,B,D),m.proxy)return m;if(y=cE(),m.proxy=y,y.src=a,y.listener=m,a.addEventListener)un||(C=B),C===void 0&&(C=!1),a.addEventListener(h.toString(),y,C);else if(a.attachEvent)a.attachEvent(wm(h.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function cE(){function a(m){return h.call(a.src,a.listener,m)}const h=dE;return a}function _m(a,h,m,y,C){if(Array.isArray(h))for(var D=0;D<h.length;D++)_m(a,h[D],m,y,C);else y=d(y)?!!y.capture:!!y,m=xm(m),a&&a[hn]?(a=a.i,h=String(h).toString(),h in a.g&&(D=a.g[h],m=$u(D,m,y,C),-1<m&&(sa(D[m]),Array.prototype.splice.call(D,m,1),D.length==0&&(delete a.g[h],a.h--)))):a&&(a=Gu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=$u(h,m,y,C)),(m=-1<a?h[a]:null)&&Hu(m))}function Hu(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[hn])zu(h.i,a);else{var m=a.type,y=a.proxy;h.removeEventListener?h.removeEventListener(m,y,a.capture):h.detachEvent?h.detachEvent(wm(m),y):h.addListener&&h.removeListener&&h.removeListener(y),(m=Gu(h))?(zu(m,a),m.h==0&&(m.src=null,h[Wu]=null)):sa(a)}}}function wm(a){return a in qu?qu[a]:qu[a]="on"+a}function dE(a,h){if(a.da)a=!0;else{h=new cn(h,this);var m=a.listener,y=a.ha||a.src;a.fa&&Hu(a),a=m.call(y,h)}return a}function Gu(a){return a=a[Wu],a instanceof ia?a:null}var Ku="__closure_events_fn_"+(1e9*Math.random()>>>0);function xm(a){return typeof a=="function"?a:(a[Ku]||(a[Ku]=function(h){return a.handleEvent(h)}),a[Ku])}function Je(){ue.call(this),this.i=new ia(this),this.M=this,this.F=null}I(Je,ue),Je.prototype[hn]=!0,Je.prototype.removeEventListener=function(a,h,m,y){_m(this,a,h,m,y)};function ut(a,h){var m,y=a.F;if(y)for(m=[];y;y=y.F)m.push(y);if(a=a.M,y=h.type||h,typeof h=="string")h=new ke(h,a);else if(h instanceof ke)h.target=h.target||a;else{var C=h;h=new ke(y,a),S(h,C)}if(C=!0,m)for(var D=m.length-1;0<=D;D--){var B=h.g=m[D];C=oa(B,y,!0,h)&&C}if(B=h.g=a,C=oa(B,y,!0,h)&&C,C=oa(B,y,!1,h)&&C,m)for(D=0;D<m.length;D++)B=h.g=m[D],C=oa(B,y,!1,h)&&C}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],y=0;y<m.length;y++)sa(m[y]);delete a.g[h],a.h--}}this.F=null},Je.prototype.K=function(a,h,m,y){return this.i.add(String(a),h,!1,m,y)},Je.prototype.L=function(a,h,m,y){return this.i.add(String(a),h,!0,m,y)};function oa(a,h,m,y){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,D=0;D<h.length;++D){var B=h[D];if(B&&!B.da&&B.capture==m){var ce=B.listener,ze=B.ha||B.src;B.fa&&zu(a.i,B),C=ce.call(ze,y)!==!1&&C}}return C&&!y.defaultPrevented}function Em(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Tm(a){a.g=Em(()=>{a.g=null,a.i&&(a.i=!1,Tm(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class hE extends ue{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Tm(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fi(a){ue.call(this),this.h=a,this.g={}}I(fi,ue);var Im=[];function bm(a){U(a.g,function(h,m){this.g.hasOwnProperty(m)&&Hu(h)},a),a.g={}}fi.prototype.N=function(){fi.aa.N.call(this),bm(this)},fi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qu=l.JSON.stringify,fE=l.JSON.parse,mE=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Yu(){}Yu.prototype.h=null;function Sm(a){return a.h||(a.h=a.i())}function km(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xu(){ke.call(this,"d")}I(Xu,ke);function Ju(){ke.call(this,"c")}I(Ju,ke);var Tr={},Nm=null;function aa(){return Nm=Nm||new Je}Tr.La="serverreachability";function Am(a){ke.call(this,Tr.La,a)}I(Am,ke);function pi(a){const h=aa();ut(h,new Am(h))}Tr.STAT_EVENT="statevent";function Pm(a,h){ke.call(this,Tr.STAT_EVENT,a),this.stat=h}I(Pm,ke);function ct(a){const h=aa();ut(h,new Pm(h,a))}Tr.Ma="timingevent";function Cm(a,h){ke.call(this,Tr.Ma,a),this.size=h}I(Cm,ke);function gi(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function yi(){this.g=!0}yi.prototype.xa=function(){this.g=!1};function pE(a,h,m,y,C,D){a.info(function(){if(a.g)if(D)for(var B="",ce=D.split("&"),ze=0;ze<ce.length;ze++){var ie=ce[ze].split("=");if(1<ie.length){var Ze=ie[0];ie=ie[1];var et=Ze.split("_");B=2<=et.length&&et[1]=="type"?B+(Ze+"="+ie+"&"):B+(Ze+"=redacted&")}}else B=null;else B=D;return"XMLHTTP REQ ("+y+") [attempt "+C+"]: "+h+`
`+m+`
`+B})}function gE(a,h,m,y,C,D,B){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+C+"]: "+h+`
`+m+`
`+D+" "+B})}function ss(a,h,m,y){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+vE(a,m)+(y?" "+y:"")})}function yE(a,h){a.info(function(){return"TIMEOUT: "+h})}yi.prototype.info=function(){};function vE(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var y=m[a];if(!(2>y.length)){var C=y[1];if(Array.isArray(C)&&!(1>C.length)){var D=C[0];if(D!="noop"&&D!="stop"&&D!="close")for(var B=1;B<C.length;B++)C[B]=""}}}}return Qu(m)}catch{return h}}var la={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zu;function ua(){}I(ua,Yu),ua.prototype.g=function(){return new XMLHttpRequest},ua.prototype.i=function(){return{}},Zu=new ua;function On(a,h,m,y){this.j=a,this.i=h,this.l=m,this.R=y||1,this.U=new fi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jm}function jm(){this.i=null,this.g="",this.h=!1}var Dm={},ec={};function tc(a,h,m){a.L=1,a.v=fa(fn(h)),a.m=m,a.P=!0,Om(a,null)}function Om(a,h){a.F=Date.now(),ca(a),a.A=fn(a.v);var m=a.A,y=a.R;Array.isArray(y)||(y=[String(y)]),Qm(m.i,"t",y),a.C=0,m=a.j.J,a.h=new jm,a.g=fp(a.j,m?h:null,!a.m),0<a.O&&(a.M=new hE(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,y=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(Im[0]=C.toString()),C=Im);for(var D=0;D<C.length;D++){var B=vm(m,C[D],y||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),pi(),pE(a.i,a.u,a.A,a.l,a.R,a.m)}On.prototype.ca=function(a){a=a.target;const h=this.M;h&&mn(a)==3?h.j():this.Y(a)},On.prototype.Y=function(a){try{if(a==this.g)e:{const et=mn(this.g);var h=this.g.Ba();const as=this.g.Z();if(!(3>et)&&(et!=3||this.g&&(this.h.h||this.g.oa()||np(this.g)))){this.J||et!=4||h==7||(h==8||0>=as?pi(3):pi(2)),nc(this);var m=this.g.Z();this.X=m;t:if(Mm(this)){var y=np(this.g);a="";var C=y.length,D=mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),vi(this);var B="";break t}this.h.i=new l.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,a+=this.h.i.decode(y[h],{stream:!(D&&h==C-1)});y.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,gE(this.i,this.u,this.A,this.l,this.R,et,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,ze=this.g;if((ce=ze.g?ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ce)){var ie=ce;break t}}ie=null}if(m=ie)ss(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rc(this,m);else{this.o=!1,this.s=3,ct(12),Ir(this),vi(this);break e}}if(this.P){m=!0;let Ft;for(;!this.J&&this.C<B.length;)if(Ft=_E(this,B),Ft==ec){et==4&&(this.s=4,ct(14),m=!1),ss(this.i,this.l,null,"[Incomplete Response]");break}else if(Ft==Dm){this.s=4,ct(15),ss(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else ss(this.i,this.l,Ft,null),rc(this,Ft);if(Mm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),et!=4||B.length!=0||this.h.h||(this.s=1,ct(16),m=!1),this.o=this.o&&m,!m)ss(this.i,this.l,B,"[Invalid Chunked Response]"),Ir(this),vi(this);else if(0<B.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),uc(Ze),Ze.M=!0,ct(11))}}else ss(this.i,this.l,B,null),rc(this,B);et==4&&Ir(this),this.o&&!this.J&&(et==4?up(this.j,this):(this.o=!1,ca(this)))}else ME(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),Ir(this),vi(this)}}}catch{}finally{}};function Mm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function _E(a,h){var m=a.C,y=h.indexOf(`
`,m);return y==-1?ec:(m=Number(h.substring(m,y)),isNaN(m)?Dm:(y+=1,y+m>h.length?ec:(h=h.slice(y,y+m),a.C=y+m,h)))}On.prototype.cancel=function(){this.J=!0,Ir(this)};function ca(a){a.S=Date.now()+a.I,Vm(a,a.I)}function Vm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=gi(g(a.ba,a),h)}function nc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}On.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(yE(this.i,this.A),this.L!=2&&(pi(),ct(17)),Ir(this),this.s=2,vi(this)):Vm(this,this.S-a)};function vi(a){a.j.G==0||a.J||up(a.j,a)}function Ir(a){nc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,bm(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function rc(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||sc(m.h,a))){if(!a.K&&sc(m.h,a)&&m.G==3){try{var y=m.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var C=y;if(C[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)_a(m),ya(m);else break e;lc(m),ct(18)}}else m.za=C[1],0<m.za-m.T&&37500>C[2]&&m.F&&m.v==0&&!m.C&&(m.C=gi(g(m.Za,m),6e3));if(1>=Um(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Sr(m,11)}else if((a.K||m.g==a)&&_a(m),!w(h))for(C=m.Da.g.parse(h),h=0;h<C.length;h++){let ie=C[h];if(m.T=ie[0],ie=ie[1],m.G==2)if(ie[0]=="c"){m.K=ie[1],m.ia=ie[2];const Ze=ie[3];Ze!=null&&(m.la=Ze,m.j.info("VER="+m.la));const et=ie[4];et!=null&&(m.Aa=et,m.j.info("SVER="+m.Aa));const as=ie[5];as!=null&&typeof as=="number"&&0<as&&(y=1.5*as,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;const Ft=a.g;if(Ft){const xa=Ft.g?Ft.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xa){var D=y.h;D.g||xa.indexOf("spdy")==-1&&xa.indexOf("quic")==-1&&xa.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(ic(D,D.h),D.h=null))}if(y.D){const cc=Ft.g?Ft.g.getResponseHeader("X-HTTP-Session-Id"):null;cc&&(y.ya=cc,fe(y.I,y.D,cc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var B=a;if(y.qa=hp(y,y.J?y.ia:null,y.W),B.K){Bm(y.h,B);var ce=B,ze=y.L;ze&&(ce.I=ze),ce.B&&(nc(ce),ca(ce)),y.g=B}else ap(y);0<m.i.length&&va(m)}else ie[0]!="stop"&&ie[0]!="close"||Sr(m,7);else m.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?Sr(m,7):ac(m):ie[0]!="noop"&&m.l&&m.l.ta(ie),m.v=0)}}pi(4)}catch{}}var wE=class{constructor(a,h){this.g=a,this.map=h}};function Lm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Um(a){return a.h?1:a.g?a.g.size:0}function sc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function ic(a,h){a.g?a.g.add(h):a.h=h}function Bm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Lm.prototype.cancel=function(){if(this.i=zm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function zm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return T(a.i)}function xE(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],m=a.length,y=0;y<m;y++)h.push(a[y]);return h}h=[],m=0;for(y in a)h[m++]=a[y];return h}function EE(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const y in a)h[m++]=y;return h}}}function $m(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=EE(a),y=xE(a),C=y.length,D=0;D<C;D++)h.call(void 0,y[D],m&&m[D],a)}var Wm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TE(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var y=a[m].indexOf("="),C=null;if(0<=y){var D=a[m].substring(0,y);C=a[m].substring(y+1)}else D=a[m];h(D,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function br(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof br){this.h=a.h,da(this,a.j),this.o=a.o,this.g=a.g,ha(this,a.s),this.l=a.l;var h=a.i,m=new xi;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),qm(this,m),this.m=a.m}else a&&(h=String(a).match(Wm))?(this.h=!1,da(this,h[1]||"",!0),this.o=_i(h[2]||""),this.g=_i(h[3]||"",!0),ha(this,h[4]),this.l=_i(h[5]||"",!0),qm(this,h[6]||"",!0),this.m=_i(h[7]||"")):(this.h=!1,this.i=new xi(null,this.h))}br.prototype.toString=function(){var a=[],h=this.j;h&&a.push(wi(h,Hm,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(wi(h,Hm,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(wi(m,m.charAt(0)=="/"?SE:bE,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",wi(m,NE)),a.join("")};function fn(a){return new br(a)}function da(a,h,m){a.j=m?_i(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ha(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function qm(a,h,m){h instanceof xi?(a.i=h,AE(a.i,a.h)):(m||(h=wi(h,kE)),a.i=new xi(h,a.h))}function fe(a,h,m){a.i.set(h,m)}function fa(a){return fe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function _i(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function wi(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,IE),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function IE(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Hm=/[#\/\?@]/g,bE=/[#\?:]/g,SE=/[#\?]/g,kE=/[#\?@]/g,NE=/#/g;function xi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Mn(a){a.g||(a.g=new Map,a.h=0,a.i&&TE(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=xi.prototype,t.add=function(a,h){Mn(this),this.i=null,a=is(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function Gm(a,h){Mn(a),h=is(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Km(a,h){return Mn(a),h=is(a,h),a.g.has(h)}t.forEach=function(a,h){Mn(this),this.g.forEach(function(m,y){m.forEach(function(C){a.call(h,C,y,this)},this)},this)},t.na=function(){Mn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let y=0;y<h.length;y++){const C=a[y];for(let D=0;D<C.length;D++)m.push(h[y])}return m},t.V=function(a){Mn(this);let h=[];if(typeof a=="string")Km(this,a)&&(h=h.concat(this.g.get(is(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return Mn(this),this.i=null,a=is(this,a),Km(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Qm(a,h,m){Gm(a,h),0<m.length&&(a.i=null,a.g.set(is(a,h),T(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var y=h[m];const D=encodeURIComponent(String(y)),B=this.V(y);for(y=0;y<B.length;y++){var C=D;B[y]!==""&&(C+="="+encodeURIComponent(String(B[y]))),a.push(C)}}return this.i=a.join("&")};function is(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function AE(a,h){h&&!a.j&&(Mn(a),a.i=null,a.g.forEach(function(m,y){var C=y.toLowerCase();y!=C&&(Gm(this,y),Qm(this,C,m))},a)),a.j=h}function PE(a,h){const m=new yi;if(l.Image){const y=new Image;y.onload=_(Vn,m,"TestLoadImage: loaded",!0,h,y),y.onerror=_(Vn,m,"TestLoadImage: error",!1,h,y),y.onabort=_(Vn,m,"TestLoadImage: abort",!1,h,y),y.ontimeout=_(Vn,m,"TestLoadImage: timeout",!1,h,y),l.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else h(!1)}function CE(a,h){const m=new yi,y=new AbortController,C=setTimeout(()=>{y.abort(),Vn(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:y.signal}).then(D=>{clearTimeout(C),D.ok?Vn(m,"TestPingServer: ok",!0,h):Vn(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Vn(m,"TestPingServer: error",!1,h)})}function Vn(a,h,m,y,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),y(m)}catch{}}function RE(){this.g=new mE}function jE(a,h,m){const y=m||"";try{$m(a,function(C,D){let B=C;d(C)&&(B=Qu(C)),h.push(y+D+"="+encodeURIComponent(B))})}catch(C){throw h.push(y+"type="+encodeURIComponent("_badmap")),C}}function ma(a){this.l=a.Ub||null,this.j=a.eb||!1}I(ma,Yu),ma.prototype.g=function(){return new pa(this.l,this.j)},ma.prototype.i=function(a){return function(){return a}}({});function pa(a,h){Je.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(pa,Je),t=pa.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ti(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ei(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ym(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ym(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ei(this):Ti(this),this.readyState==3&&Ym(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ei(this))},t.Qa=function(a){this.g&&(this.response=a,Ei(this))},t.ga=function(){this.g&&Ei(this)};function Ei(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ti(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function Ti(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Xm(a){let h="";return U(a,function(m,y){h+=y,h+=":",h+=m,h+=`\r
`}),h}function oc(a,h,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=Xm(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):fe(a,h,m))}function Ie(a){Je.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ie,Je);var DE=/^https?$/i,OE=["POST","PUT"];t=Ie.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zu.g(),this.v=this.o?Sm(this.o):Sm(Zu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(D){Jm(this,D);return}if(a=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var C in y)m.set(C,y[C]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const D of y.keys())m.set(D,y.get(D));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(D=>D.toLowerCase()=="content-type"),C=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(OE,h,void 0))||y||C||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,B]of m)this.g.setRequestHeader(D,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tp(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Jm(this,D)}};function Jm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Zm(a),ga(a)}function Zm(a){a.A||(a.A=!0,ut(a,"complete"),ut(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ut(this,"complete"),ut(this,"abort"),ga(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ga(this,!0)),Ie.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ep(this):this.bb())},t.bb=function(){ep(this)};function ep(a){if(a.h&&typeof o<"u"&&(!a.v[1]||mn(a)!=4||a.Z()!=2)){if(a.u&&mn(a)==4)Em(a.Ea,0,a);else if(ut(a,"readystatechange"),mn(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var y;if(y=B===0){var C=String(a.D).match(Wm)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),y=!DE.test(C?C.toLowerCase():"")}m=y}if(m)ut(a,"complete"),ut(a,"success");else{a.m=6;try{var D=2<mn(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",Zm(a)}}finally{ga(a)}}}}function ga(a,h){if(a.g){tp(a);const m=a.g,y=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ut(a,"ready");try{m.onreadystatechange=y}catch{}}}function tp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function mn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<mn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),fE(h)}};function np(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function ME(a){const h={};a=(a.g&&2<=mn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(w(a[y]))continue;var m=P(a[y]);const C=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const D=h[C]||[];h[C]=D,D.push(m)}b(h,function(y){return y.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ii(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function rp(a){this.Aa=0,this.i=[],this.j=new yi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ii("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ii("baseRetryDelayMs",5e3,a),this.cb=Ii("retryDelaySeedMs",1e4,a),this.Wa=Ii("forwardChannelMaxRetries",2,a),this.wa=Ii("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Lm(a&&a.concurrentRequestLimit),this.Da=new RE,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rp.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,y){ct(0),this.W=a,this.H=h||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=hp(this,null,this.W),va(this)};function ac(a){if(sp(a),a.G==3){var h=a.U++,m=fn(a.I);if(fe(m,"SID",a.K),fe(m,"RID",h),fe(m,"TYPE","terminate"),bi(a,m),h=new On(a,a.j,h),h.L=2,h.v=fa(fn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=fp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ca(h)}dp(a)}function ya(a){a.g&&(uc(a),a.g.cancel(),a.g=null)}function sp(a){ya(a),a.u&&(l.clearTimeout(a.u),a.u=null),_a(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function va(a){if(!Fm(a.h)&&!a.s){a.s=!0;var h=a.Ga;ln||J(),$||(ln(),$=!0),X.add(h,a),a.B=0}}function VE(a,h){return Um(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=gi(g(a.Ga,a,h),cp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const C=new On(this,this.j,a);let D=this.o;if(this.S&&(D?(D=v(D),S(D,this.S)):D=this.S),this.m!==null||this.O||(C.H=D,D=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=op(this,C,h),m=fn(this.I),fe(m,"RID",a),fe(m,"CVER",22),this.D&&fe(m,"X-HTTP-Session-Id",this.D),bi(this,m),D&&(this.O?h="headers="+encodeURIComponent(String(Xm(D)))+"&"+h:this.m&&oc(m,this.m,D)),ic(this.h,C),this.Ua&&fe(m,"TYPE","init"),this.P?(fe(m,"$req",h),fe(m,"SID","null"),C.T=!0,tc(C,m,null)):tc(C,m,h),this.G=2}}else this.G==3&&(a?ip(this,a):this.i.length==0||Fm(this.h)||ip(this))};function ip(a,h){var m;h?m=h.l:m=a.U++;const y=fn(a.I);fe(y,"SID",a.K),fe(y,"RID",m),fe(y,"AID",a.T),bi(a,y),a.m&&a.o&&oc(y,a.m,a.o),m=new On(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=op(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),ic(a.h,m),tc(m,y,h)}function bi(a,h){a.H&&U(a.H,function(m,y){fe(h,y,m)}),a.l&&$m({},function(m,y){fe(h,y,m)})}function op(a,h,m){m=Math.min(a.i.length,m);var y=a.l?g(a.l.Na,a.l,a):null;e:{var C=a.i;let D=-1;for(;;){const B=["count="+m];D==-1?0<m?(D=C[0].g,B.push("ofs="+D)):D=0:B.push("ofs="+D);let ce=!0;for(let ze=0;ze<m;ze++){let ie=C[ze].g;const Ze=C[ze].map;if(ie-=D,0>ie)D=Math.max(0,C[ze].g-100),ce=!1;else try{jE(Ze,B,"req"+ie+"_")}catch{y&&y(Ze)}}if(ce){y=B.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,y}function ap(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;ln||J(),$||(ln(),$=!0),X.add(h,a),a.v=0}}function lc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=gi(g(a.Fa,a),cp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,lp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=gi(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),ya(this),lp(this))};function uc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function lp(a){a.g=new On(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=fn(a.qa);fe(h,"RID","rpc"),fe(h,"SID",a.K),fe(h,"AID",a.T),fe(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&fe(h,"TO",a.ja),fe(h,"TYPE","xmlhttp"),bi(a,h),a.m&&a.o&&oc(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=fa(fn(h)),m.m=null,m.P=!0,Om(m,a)}t.Za=function(){this.C!=null&&(this.C=null,ya(this),lc(this),ct(19))};function _a(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function up(a,h){var m=null;if(a.g==h){_a(a),uc(a),a.g=null;var y=2}else if(sc(a.h,h))m=h.D,Bm(a.h,h),y=1;else return;if(a.G!=0){if(h.o)if(y==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var C=a.B;y=aa(),ut(y,new Cm(y,m)),va(a)}else ap(a);else if(C=h.s,C==3||C==0&&0<h.X||!(y==1&&VE(a,h)||y==2&&lc(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),C){case 1:Sr(a,5);break;case 4:Sr(a,10);break;case 3:Sr(a,6);break;default:Sr(a,2)}}}function cp(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function Sr(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),y=a.Xa;const C=!y;y=new br(y||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||da(y,"https"),fa(y),C?PE(y.toString(),m):CE(y.toString(),m)}else ct(2);a.G=0,a.l&&a.l.sa(h),dp(a),sp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function dp(a){if(a.G=0,a.ka=[],a.l){const h=zm(a.h);(h.length!=0||a.i.length!=0)&&(N(a.ka,h),N(a.ka,a.i),a.h.i.length=0,T(a.i),a.i.length=0),a.l.ra()}}function hp(a,h,m){var y=m instanceof br?fn(m):new br(m);if(y.g!="")h&&(y.g=h+"."+y.g),ha(y,y.s);else{var C=l.location;y=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var D=new br(null);y&&da(D,y),h&&(D.g=h),C&&ha(D,C),m&&(D.l=m),y=D}return m=a.D,h=a.ya,m&&h&&fe(y,m,h),fe(y,"VER",a.la),bi(a,y),y}function fp(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ie(new ma({eb:m})):new Ie(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mp(){}t=mp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function wa(){}wa.prototype.g=function(a,h){return new xt(a,h)};function xt(a,h){Je.call(this),this.g=new rp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!w(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new os(this)}I(xt,Je),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){ac(this.g)},xt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=Qu(a),a=m);h.i.push(new wE(h.Ya++,a)),h.G==3&&va(h)},xt.prototype.N=function(){this.g.l=null,delete this.j,ac(this.g),delete this.g,xt.aa.N.call(this)};function pp(a){Xu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}I(pp,Xu);function gp(){Ju.call(this),this.status=1}I(gp,Ju);function os(a){this.g=a}I(os,mp),os.prototype.ua=function(){ut(this.g,"a")},os.prototype.ta=function(a){ut(this.g,new pp(a))},os.prototype.sa=function(a){ut(this.g,new gp)},os.prototype.ra=function(){ut(this.g,"b")},wa.prototype.createWebChannel=wa.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,Pw=function(){return new wa},Aw=function(){return aa()},Nw=Tr,th={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},la.NO_ERROR=0,la.TIMEOUT=8,la.HTTP_ERROR=6,ol=la,Rm.COMPLETE="complete",kw=Rm,km.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",Je.prototype.listen=Je.prototype.K,zi=km,Ie.prototype.listenOnce=Ie.prototype.L,Ie.prototype.getLastError=Ie.prototype.Ka,Ie.prototype.getLastErrorCode=Ie.prototype.Ba,Ie.prototype.getStatus=Ie.prototype.Z,Ie.prototype.getResponseJson=Ie.prototype.Oa,Ie.prototype.getResponseText=Ie.prototype.oa,Ie.prototype.send=Ie.prototype.ea,Ie.prototype.setWithCredentials=Ie.prototype.Ha,Sw=Ie}).apply(typeof Ua<"u"?Ua:typeof self<"u"?self:typeof window<"u"?window:{});const uy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new yf("@firebase/firestore");function Di(){return Kr.logLevel}function q(t,...e){if(Kr.logLevel<=te.DEBUG){const n=e.map(Cf);Kr.debug(`Firestore (${oi}): ${t}`,...n)}}function Cn(t,...e){if(Kr.logLevel<=te.ERROR){const n=e.map(Cf);Kr.error(`Firestore (${oi}): ${t}`,...n)}}function Gs(t,...e){if(Kr.logLevel<=te.WARN){const n=e.map(Cf);Kr.warn(`Firestore (${oi}): ${t}`,...n)}}function Cf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t="Unexpected state"){const e=`FIRESTORE (${oi}) INTERNAL ASSERTION FAILED: `+t;throw Cn(e),new Error(e)}function se(t,e){t||G()}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class UN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}}class BN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zN{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){se(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string"),new Cw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string"),new st(e)}}class $N{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class WN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $N(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){se(this.o===void 0);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(se(typeof n.token=="string"),this.R=n.token,new qN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=GN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Ks(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ve.fromMillis(Date.now())}static fromDate(e){return ve.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ve(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.timestamp=e}static fromTimestamp(e){return new K(e)}static min(){return new K(new ve(0,0))}static max(){return new K(new ve(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return No.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof No?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class de extends No{construct(e,n,r){return new de(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new de(n)}static emptyPath(){return new de([])}}const KN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends No{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return KN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new z(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new z(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.path=e}static fromPath(e){return new H(de.fromString(e))}static fromName(e){return new H(de.fromString(e).popFirst(5))}static empty(){return new H(de.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&de.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return de.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new H(new de(e.slice()))}}function QN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=K.fromTimestamp(r===1e9?new ve(n+1,0):new ve(n,r));return new fr(s,H.empty(),e)}function YN(t){return new fr(t.readTime,t.key,-1)}class fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fr(K.min(),H.empty(),-1)}static max(){return new fr(K.max(),H.empty(),-1)}}function XN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Go(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==JN)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function eA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ko(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Rf.oe=-1;function Qo(t){return t==null}function $l(t){return t===0&&1/t==-1/0}function tA(t){return typeof t=="number"&&Number.isInteger(t)&&!$l(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function jw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.comparator=e,this.root=n||We.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,We.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,We.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ba(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ba(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ba(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ba(this.root,e,this.comparator,!0)}}class Ba{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class We{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??We.RED,this.left=s??We.EMPTY,this.right=i??We.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new We(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return We.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return We.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}We.EMPTY=null,We.RED=!0,We.BLACK=!1;We.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,s,i){return this}insert(e,n,r){return new We(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dy(this.data.getIterator())}getIteratorFrom(e){return new dy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class dy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new It([])}unionWith(e){let n=new Ke(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new It(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ks(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Dw("Invalid base64 string: "+i):i}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const nA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mr(t){if(se(!!t),typeof t=="string"){let e=0;const n=nA.exec(t);if(se(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ne(t.seconds),nanos:Ne(t.nanos)}}function Ne(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qr(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Df(t){const e=t.mapValue.fields.__previous_value__;return jf(e)?Df(e):e}function Ao(t){const e=mr(t.mapValue.fields.__local_write_time__.timestampValue);return new ve(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Po{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za={mapValue:{}};function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jf(t)?4:iA(t)?9007199254740991:sA(t)?10:11:G()}function an(t,e){if(t===e)return!0;const n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ao(t).isEqual(Ao(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=mr(s.timestampValue),l=mr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qr(s.bytesValue).isEqual(Qr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ne(s.geoPointValue.latitude)===Ne(i.geoPointValue.latitude)&&Ne(s.geoPointValue.longitude)===Ne(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ne(s.integerValue)===Ne(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ne(s.doubleValue),l=Ne(i.doubleValue);return o===l?$l(o)===$l(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ks(t.arrayValue.values||[],e.arrayValue.values||[],an);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(cy(o)!==cy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!an(o[u],l[u])))return!1;return!0}(t,e);default:return G()}}function Co(t,e){return(t.values||[]).find(n=>an(n,e))!==void 0}function Qs(t,e){if(t===e)return 0;const n=Yr(t),r=Yr(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ne(i.integerValue||i.doubleValue),u=Ne(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return hy(t.timestampValue,e.timestampValue);case 4:return hy(Ao(t),Ao(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Qr(i),u=Qr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=oe(l[d],u[d]);if(f!==0)return f}return oe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(Ne(i.latitude),Ne(o.latitude));return l!==0?l:oe(Ne(i.longitude),Ne(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const p=i.fields||{},g=o.fields||{},_=(l=p.value)===null||l===void 0?void 0:l.arrayValue,I=(u=g.value)===null||u===void 0?void 0:u.arrayValue,T=oe(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((f=I==null?void 0:I.values)===null||f===void 0?void 0:f.length)||0);return T!==0?T:fy(_,I)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===za.mapValue&&o===za.mapValue)return 0;if(i===za.mapValue)return 1;if(o===za.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=oe(u[p],f[p]);if(g!==0)return g;const _=Qs(l[u[p]],d[f[p]]);if(_!==0)return _}return oe(u.length,f.length)}(t.mapValue,e.mapValue);default:throw G()}}function hy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=mr(t),r=mr(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function fy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Qs(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Ys(t){return nh(t)}function nh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=mr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=nh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${nh(n.fields[o])}`;return s+"}"}(t.mapValue):G()}function my(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function rh(t){return!!t&&"integerValue"in t}function Of(t){return!!t&&"arrayValue"in t}function py(t){return!!t&&"nullValue"in t}function gy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function al(t){return!!t&&"mapValue"in t}function sA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function to(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=to(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=to(t.arrayValue.values[n]);return e}return Object.assign({},t)}function iA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.value=e}static empty(){return new ht({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!al(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=to(n)}setAll(e){let n=He.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=to(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());al(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return an(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];al(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ts(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new ht(to(this.value))}}function Ow(t){const e=[];return ts(t.fields,(n,r)=>{const s=new He([n]);if(al(r)){const i=Ow(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new It(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ue(e,0,K.min(),K.min(),K.min(),ht.empty(),0)}static newFoundDocument(e,n,r,s){return new Ue(e,1,n,K.min(),r,s,0)}static newNoDocument(e,n){return new Ue(e,2,n,K.min(),K.min(),ht.empty(),0)}static newUnknownDocument(e,n){return new Ue(e,3,n,K.min(),K.min(),ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(K.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=K.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ue&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ue(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n){this.position=e,this.inclusive=n}}function yy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),n.key):r=Qs(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function vy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!an(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n="asc"){this.field=e,this.dir=n}}function oA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{}class je extends Mw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lA(e,n,r):n==="array-contains"?new dA(e,r):n==="in"?new hA(e,r):n==="not-in"?new fA(e,r):n==="array-contains-any"?new mA(e,r):new je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uA(e,r):new cA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qs(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(Qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qt extends Mw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Qt(e,n)}matches(e){return Vw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vw(t){return t.op==="and"}function Lw(t){return aA(t)&&Vw(t)}function aA(t){for(const e of t.filters)if(e instanceof Qt)return!1;return!0}function sh(t){if(t instanceof je)return t.field.canonicalString()+t.op.toString()+Ys(t.value);if(Lw(t))return t.filters.map(e=>sh(e)).join(",");{const e=t.filters.map(n=>sh(n)).join(",");return`${t.op}(${e})`}}function Fw(t,e){return t instanceof je?function(r,s){return s instanceof je&&r.op===s.op&&r.field.isEqual(s.field)&&an(r.value,s.value)}(t,e):t instanceof Qt?function(r,s){return s instanceof Qt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&Fw(o,s.filters[l]),!0):!1}(t,e):void G()}function Uw(t){return t instanceof je?function(n){return`${n.field.canonicalString()} ${n.op} ${Ys(n.value)}`}(t):t instanceof Qt?function(n){return n.op.toString()+" {"+n.getFilters().map(Uw).join(" ,")+"}"}(t):"Filter"}class lA extends je{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){const n=H.comparator(e.key,this.key);return this.matchesComparison(n)}}class uA extends je{constructor(e,n){super(e,"in",n),this.keys=Bw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cA extends je{constructor(e,n){super(e,"not-in",n),this.keys=Bw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Bw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}class dA extends je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Of(n)&&Co(n.arrayValue,this.value)}}class hA extends je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Co(this.value.arrayValue,n)}}class fA extends je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Co(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Co(this.value.arrayValue,n)}}class mA extends je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Of(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Co(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function _y(t,e=null,n=[],r=[],s=null,i=null,o=null){return new pA(t,e,n,r,s,i,o)}function Mf(t){const e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Qo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ys(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ys(r)).join(",")),e.ue=n}return e.ue}function Vf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Fw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vy(t.startAt,e.startAt)&&vy(t.endAt,e.endAt)}function ih(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gA(t,e,n,r,s,i,o,l){return new Yo(t,e,n,r,s,i,o,l)}function Iu(t){return new Yo(t)}function wy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function zw(t){return t.collectionGroup!==null}function no(t){const e=Y(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ke(He.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ql(i,r))}),n.has(He.keyField().canonicalString())||e.ce.push(new ql(He.keyField(),r))}return e.ce}function sn(t){const e=Y(t);return e.le||(e.le=yA(e,no(t))),e.le}function yA(t,e){if(t.limitType==="F")return _y(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ql(s.field,i)});const n=t.endAt?new Wl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Wl(t.startAt.position,t.startAt.inclusive):null;return _y(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function oh(t,e){const n=t.filters.concat([e]);return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ah(t,e,n){return new Yo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bu(t,e){return Vf(sn(t),sn(e))&&t.limitType===e.limitType}function $w(t){return`${Mf(sn(t))}|lt:${t.limitType}`}function ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Uw(s)).join(", ")}]`),Qo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ys(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ys(s)).join(",")),`Target(${r})`}(sn(t))}; limitType=${t.limitType})`}function Su(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):H.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of no(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=yy(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,no(r),s)||r.endAt&&!function(o,l,u){const d=yy(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,no(r),s))}(t,e)}function vA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ww(t){return(e,n)=>{let r=!1;for(const s of no(t)){const i=_A(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function _A(t,e,n){const r=t.field.isKeyField()?H.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Qs(u,d):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ts(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return jw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new Te(H.comparator);function Rn(){return wA}const qw=new Te(H.comparator);function $i(...t){let e=qw;for(const n of t)e=e.insert(n.key,n);return e}function Hw(t){let e=qw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Or(){return ro()}function Gw(){return ro()}function ro(){return new ai(t=>t.toString(),(t,e)=>t.isEqual(e))}const xA=new Te(H.comparator),EA=new Ke(H.comparator);function ee(...t){let e=EA;for(const n of t)e=e.add(n);return e}const TA=new Ke(oe);function IA(){return TA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$l(e)?"-0":e}}function Kw(t){return{integerValue:""+t}}function bA(t,e){return tA(e)?Kw(e):Lf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(){this._=void 0}}function SA(t,e,n){return t instanceof Hl?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&jf(i)&&(i=Df(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ro?Yw(t,e):t instanceof jo?Xw(t,e):function(s,i){const o=Qw(s,i),l=xy(o)+xy(s.Pe);return rh(o)&&rh(s.Pe)?Kw(l):Lf(s.serializer,l)}(t,e)}function kA(t,e,n){return t instanceof Ro?Yw(t,e):t instanceof jo?Xw(t,e):n}function Qw(t,e){return t instanceof Gl?function(r){return rh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Hl extends ku{}class Ro extends ku{constructor(e){super(),this.elements=e}}function Yw(t,e){const n=Jw(e);for(const r of t.elements)n.some(s=>an(s,r))||n.push(r);return{arrayValue:{values:n}}}class jo extends ku{constructor(e){super(),this.elements=e}}function Xw(t,e){let n=Jw(e);for(const r of t.elements)n=n.filter(s=>!an(s,r));return{arrayValue:{values:n}}}class Gl extends ku{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function xy(t){return Ne(t.integerValue||t.doubleValue)}function Jw(t){return Of(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function NA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ro&&s instanceof Ro||r instanceof jo&&s instanceof jo?Ks(r.elements,s.elements,an):r instanceof Gl&&s instanceof Gl?an(r.Pe,s.Pe):r instanceof Hl&&s instanceof Hl}(t.transform,e.transform)}class AA{constructor(e,n){this.version=e,this.transformResults=n}}class De{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new De}static exists(e){return new De(void 0,e)}static updateTime(e){return new De(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ll(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nu{}function Zw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jo(t.key,De.none()):new Xo(t.key,t.data,De.none());{const n=t.data,r=ht.empty();let s=new Ke(He.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new wr(t.key,r,new It(s.toArray()),De.none())}}function PA(t,e,n){t instanceof Xo?function(s,i,o){const l=s.value.clone(),u=Ty(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof wr?function(s,i,o){if(!ll(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Ty(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(ex(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function so(t,e,n,r){return t instanceof Xo?function(i,o,l,u){if(!ll(i.precondition,o))return l;const d=i.value.clone(),f=Iy(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof wr?function(i,o,l,u){if(!ll(i.precondition,o))return l;const d=Iy(i.fieldTransforms,u,o),f=o.data;return f.setAll(ex(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return ll(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function CA(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Qw(r.transform,s||null);i!=null&&(n===null&&(n=ht.empty()),n.set(r.field,i))}return n||null}function Ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ks(r,s,(i,o)=>NA(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xo extends Nu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class wr extends Nu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ex(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ty(t,e,n){const r=new Map;se(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,kA(o,l,n[s]))}return r}function Iy(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,SA(i,o,e))}return r}class Jo extends Nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tx extends Nu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&PA(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=so(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=so(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Gw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Zw(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(K.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ee())}isEqual(e){return this.batchId===e.batchId&&Ks(this.mutations,e.mutations,(n,r)=>Ey(n,r))&&Ks(this.baseMutations,e.baseMutations,(n,r)=>Ey(n,r))}}class Ff{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){se(e.mutations.length===r.length);let s=function(){return xA}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ff(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce,ne;function nx(t){switch(t){default:return G();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function rx(t){if(t===void 0)return Cn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ce.OK:return M.OK;case Ce.CANCELLED:return M.CANCELLED;case Ce.UNKNOWN:return M.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return M.INTERNAL;case Ce.UNAVAILABLE:return M.UNAVAILABLE;case Ce.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ce.NOT_FOUND:return M.NOT_FOUND;case Ce.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ce.ABORTED:return M.ABORTED;case Ce.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ce.DATA_LOSS:return M.DATA_LOSS;default:return G()}}(ne=Ce||(Ce={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new Ur([4294967295,4294967295],0);function by(t){const e=OA().encode(t),n=new bw;return n.update(e),new Uint8Array(n.digest())}function Sy(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ur([n,r],0),new Ur([s,i],0)]}class Uf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wi(`Invalid padding: ${n}`);if(r<0)throw new Wi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ur.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Ur.fromNumber(r)));return s.compare(MA)===1&&(s=new Ur([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=by(e),[r,s]=Sy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Uf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=by(e),[r,s]=Sy(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Zo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Au(K.min(),s,new Te(oe),Rn(),ee())}}class Zo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Zo(r,n,ee(),ee(),ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class sx{constructor(e,n){this.targetId=e,this.me=n}}class ix{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ky{constructor(){this.fe=0,this.ge=Ay(),this.pe=Xe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ee(),n=ee(),r=ee();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G()}}),new Zo(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Ay()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VA{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rn(),this.qe=Ny(),this.Qe=new Te(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(ih(i))if(r===0){const o=new H(i.path);this.Ue(n,o,Ue.newNoDocument(o,K.min()))}else se(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Qr(r).toUint8Array()}catch(u){if(u instanceof Dw)return Gs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Uf(o,s,i)}catch(u){return Gs(u instanceof Wi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&ih(l.target)){const u=new H(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ue.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ee();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Au(e,n,this.Qe,this.ke,r);return this.ke=Rn(),this.qe=Ny(),this.Qe=new Te(oe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ky,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ke(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ky),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ny(){return new Te(H.comparator)}function Ay(){return new Te(H.comparator)}const LA={asc:"ASCENDING",desc:"DESCENDING"},FA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},UA={and:"AND",or:"OR"};class BA{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function lh(t,e){return t.useProto3Json||Qo(e)?e:{value:e}}function Kl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ox(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zA(t,e){return Kl(t,e.toTimestamp())}function St(t){return se(!!t),K.fromTimestamp(function(n){const r=mr(n);return new ve(r.seconds,r.nanos)}(t))}function Bf(t,e){return uh(t,e).canonicalString()}function uh(t,e){const n=function(s){return new de(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function ax(t){const e=de.fromString(t);return se(fx(e)),e}function Ql(t,e){return Bf(t.databaseId,e.path)}function io(t,e){const n=ax(e);if(n.get(1)!==t.databaseId.projectId)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(ux(n))}function lx(t,e){return Bf(t.databaseId,e)}function $A(t){const e=ax(t);return e.length===4?de.emptyPath():ux(e)}function ch(t){return new de(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ux(t){return se(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Py(t,e,n){return{name:Ql(t,e),fields:n.value.mapValue.fields}}function WA(t,e){return"found"in e?function(r,s){se(!!s.found),s.found.name,s.found.updateTime;const i=io(r,s.found.name),o=St(s.found.updateTime),l=s.found.createTime?St(s.found.createTime):K.min(),u=new ht({mapValue:{fields:s.found.fields}});return Ue.newFoundDocument(i,o,l,u)}(t,e):"missing"in e?function(r,s){se(!!s.missing),se(!!s.readTime);const i=io(r,s.missing),o=St(s.readTime);return Ue.newNoDocument(i,o)}(t,e):G()}function qA(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(se(f===void 0||typeof f=="string"),Xe.fromBase64String(f||"")):(se(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Xe.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?M.UNKNOWN:rx(d.code);return new z(f,d.message||"")}(o);n=new ix(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=io(t,r.document.name),i=St(r.document.updateTime),o=r.document.createTime?St(r.document.createTime):K.min(),l=new ht({mapValue:{fields:r.document.fields}}),u=Ue.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new ul(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=io(t,r.document),i=r.readTime?St(r.readTime):K.min(),o=Ue.newNoDocument(s,i),l=r.removedTargetIds||[];n=new ul([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=io(t,r.document),i=r.removedTargetIds||[];n=new ul([],i,s,null)}else{if(!("filter"in e))return G();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new DA(s,i),l=r.targetId;n=new sx(l,o)}}return n}function cx(t,e){let n;if(e instanceof Xo)n={update:Py(t,e.key,e.value)};else if(e instanceof Jo)n={delete:Ql(t,e.key)};else if(e instanceof wr)n={update:Py(t,e.key,e.data),updateMask:eP(e.fieldMask)};else{if(!(e instanceof tx))return G();n={verify:Ql(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Hl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ro)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof jo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Gl)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:zA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G()}(t,e.precondition)),n}function HA(t,e){return t&&t.length>0?(se(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?St(s.updateTime):St(i);return o.isEqual(K.min())&&(o=St(i)),new AA(o,s.transformResults||[])}(n,e))):[]}function GA(t,e){return{documents:[lx(t,e.path)]}}function KA(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lx(t,s);const i=function(d){if(d.length!==0)return hx(Qt.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:hs(g.field),direction:XA(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=lh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function QA(t){let e=$A(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){se(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=dx(p);return g instanceof Qt&&Lw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(I){return new ql(fs(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Qo(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,_=p.values||[];return new Wl(_,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,_=p.values||[];return new Wl(_,g)}(n.endAt)),gA(e,s,o,i,l,"F",u,d)}function YA(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function dx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fs(n.unaryFilter.field);return je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=fs(n.unaryFilter.field);return je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fs(n.unaryFilter.field);return je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fs(n.unaryFilter.field);return je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return je.create(fs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Qt.create(n.compositeFilter.filters.map(r=>dx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function XA(t){return LA[t]}function JA(t){return FA[t]}function ZA(t){return UA[t]}function hs(t){return{fieldPath:t.canonicalString()}}function fs(t){return He.fromServerFormat(t.fieldPath)}function hx(t){return t instanceof je?function(n){if(n.op==="=="){if(gy(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NAN"}};if(py(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gy(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NAN"}};if(py(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hs(n.field),op:JA(n.op),value:n.value}}}(t):t instanceof Qt?function(n){const r=n.getFilters().map(s=>hx(s));return r.length===1?r[0]:{compositeFilter:{op:ZA(n.op),filters:r}}}(t):G()}function eP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n,r,s,i=K.min(),o=K.min(),l=Xe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Jn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e){this.ct=e}}function nP(t){const e=QA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ah(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this.un=new sP}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(fr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class sP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ke(de.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ke(de.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Xs(0)}static kn(){return new Xs(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(){this.changes=new ai(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ue.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&so(r.mutation,s,It.empty(),ve.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ee()){const s=Or();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=$i();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Or();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Rn();const o=ro(),l=function(){return ro()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof wr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),so(f.mutation,d,f.mutation.getFieldMask(),ve.now())):o.set(d.key,It.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new oP(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=ro();let s=new Te((o,l)=>o-l),i=ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||It.empty();f=l.applyToLocalView(d,f),r.set(u,f);const p=(s.get(l.batchId)||ee()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,p=Gw();f.forEach(g=>{if(!i.has(g)){const _=Zw(n.get(g),r.get(g));_!==null&&p.set(g,_),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):zw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Or());let l=-1,u=i;return o.next(d=>L.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?L.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ee())).next(f=>({batchId:l,changes:Hw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let s=$i();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=$i();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,u=>{const d=function(p,g){return new Yo(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,Ue.newInvalidDocument(f)))});let l=$i();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&so(f.mutation,d,It.empty(),ve.now()),Su(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:St(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:nP(s.bundledQuery),readTime:St(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.overlays=new Te(H.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Or();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Or(),i=n.length+1,o=new H(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Te((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=Or(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=Or(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return L.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jA(n,r));let i=this.Ir.get(n);i===void 0&&(i=ee(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(){this.Tr=new Ke(Le.Er),this.dr=new Ke(Le.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Le(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Le(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new H(new de([])),r=new Le(n,e),s=new Le(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new H(new de([])),r=new Le(n,e),s=new Le(n,e+1);let i=ee();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Le(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Le{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return H.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||H.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ke(Le.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RA(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Le(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Le(n,0),s=new Le(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(oe);return n.forEach(s=>{const i=new Le(s,0),o=new Le(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;H.isDocumentKey(i)||(i=i.child(""));const o=new Le(new H(i),0);let l=new Ke(oe);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),L.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){se(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,s=>{const i=new Le(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Le(n,0),s=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.Mr=e,this.docs=function(){return new Te(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():Ue.newInvalidDocument(n))}getEntries(e,n){let r=Rn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ue.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Rn();const o=n.path,l=new H(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||XN(YN(f),r)<=0||(s.has(f.key)||Su(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){G()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fP(this)}getSize(e){return L.resolve(this.size)}}class fP extends iP{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.persistence=e,this.Nr=new ai(n=>Mf(n),Vf),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.Lr=0,this.Br=new zf,this.targetCount=0,this.kr=Xs.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Xs(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Rf(0),this.Kr=!1,this.Kr=!0,this.$r=new cP,this.referenceDelegate=e(this),this.Ur=new mP(this),this.indexManager=new rP,this.remoteDocumentCache=function(s){return new hP(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new tP(n),this.Gr=new lP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new dP(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new gP(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class gP extends ZN{constructor(e){super(),this.currentSequenceNumber=e}}class $f{constructor(e){this.persistence=e,this.Jr=new zf,this.Yr=null}static Zr(e){return new $f(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const s=H.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,K.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ee(),s=ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xS()?8:eA(lt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new yP;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Di()<=te.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(Di()<=te.DEBUG&&q("QueryEngine","Query:",ds(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Di()<=te.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(n))):L.resolve())}Yi(e,n){if(wy(n))return L.resolve(null);let r=sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ah(n,null,"F"),r=sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ee(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,ah(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return wy(n)||s.isEqual(K.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?L.resolve(null):(Di()<=te.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ds(n)),this.rs(e,o,n,QN(s,-1)).next(l=>l))})}ts(e,n){let r=new Ke(Ww(e));return n.forEach((s,i)=>{Su(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Di()<=te.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ds(n)),this.Ji.getDocumentsMatchingQuery(e,n,fr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Te(oe),this._s=new ai(i=>Mf(i),Vf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aP(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function wP(t,e,n,r){return new _P(t,e,n,r)}async function mx(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=ee();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function xP(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const p=d.batch,g=p.keys();let _=L.resolve();return g.forEach(I=>{_=_.next(()=>f.getEntry(u,I)).next(T=>{const N=d.docVersions.get(I);se(N!==null),T.version.compareTo(N)<0&&(p.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),f.addEntry(T)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ee();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function px(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function EP(t,e){const n=Y(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Xe.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(p,_),function(T,N,E){return T.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,_,f)&&l.push(n.Ur.updateTargetData(i,_))});let u=Rn(),d=ee();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(TP(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(K.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function TP(t,e,n){let r=ee(),s=ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Rn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(K.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function IP(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bP(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Jn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function dh(t,e,n){const r=Y(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ko(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Cy(t,e,n){const r=Y(t);let s=K.min(),i=ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=Y(u),g=p._s.get(f);return g!==void 0?L.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,o,sn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:K.min(),n?i:ee())).next(l=>(SP(r,vA(e),l),{documents:l,Ts:i})))}function SP(t,e,n){let r=t.us.get(e)||K.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Ry{constructor(){this.activeTargetIds=IA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kP{constructor(){this.so=new Ry,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ry,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a=null;function qc(){return $a===null?$a=function(){return 268435456+Math.round(2147483648*Math.random())}():$a++,"0x"+$a.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt="WebChannelConnection";class CP extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=qc(),u=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(q("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Gs("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=AP[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=qc();return new Promise((o,l)=>{const u=new Sw;u.setWithCredentials(!0),u.listenOnce(kw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ol.NO_ERROR:const f=u.getResponseJson();q(rt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case ol.TIMEOUT:q(rt,`RPC '${e}' ${i} timed out`),l(new z(M.DEADLINE_EXCEEDED,"Request time out"));break;case ol.HTTP_ERROR:const p=u.getStatus();if(q(rt,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const I=function(N){const E=N.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(E)>=0?E:M.UNKNOWN}(_.status);l(new z(I,_.message))}else l(new z(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new z(M.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{q(rt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);q(rt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=qc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Pw(),l=Aw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");q(rt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,_=!1;const I=new PP({Io:N=>{_?q(rt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(g||(q(rt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),q(rt,`RPC '${e}' stream ${s} sending:`,N),p.send(N))},To:()=>p.close()}),T=(N,E,w)=>{N.listen(E,k=>{try{w(k)}catch(j){setTimeout(()=>{throw j},0)}})};return T(p,zi.EventType.OPEN,()=>{_||(q(rt,`RPC '${e}' stream ${s} transport opened.`),I.yo())}),T(p,zi.EventType.CLOSE,()=>{_||(_=!0,q(rt,`RPC '${e}' stream ${s} transport closed`),I.So())}),T(p,zi.EventType.ERROR,N=>{_||(_=!0,Gs(rt,`RPC '${e}' stream ${s} transport errored:`,N),I.So(new z(M.UNAVAILABLE,"The operation could not be completed")))}),T(p,zi.EventType.MESSAGE,N=>{var E;if(!_){const w=N.data[0];se(!!w);const k=w,j=k.error||((E=k[0])===null||E===void 0?void 0:E.error);if(j){q(rt,`RPC '${e}' stream ${s} received error:`,j);const V=j.status;let U=function(x){const S=Ce[x];if(S!==void 0)return rx(S)}(V),b=j.message;U===void 0&&(U=M.INTERNAL,b="Unknown error status: "+V+" with message "+j.message),_=!0,I.So(new z(U,b)),p.close()}else q(rt,`RPC '${e}' stream ${s} received:`,w),I.bo(w)}}),T(l,Nw.STAT_EVENT,N=>{N.stat===th.PROXY?q(rt,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===th.NOPROXY&&q(rt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function Hc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(t){return new BA(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qf(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Cn(n.toString()),Cn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new z(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RP extends gx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=qA(this.serializer,e),r=function(i){if(!("targetChange"in i))return K.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?K.min():o.readTime?St(o.readTime):K.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=ch(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=ih(u)?{documents:GA(i,u)}:{query:KA(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=ox(i,o.resumeToken);const d=lh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(K.min())>0){l.readTime=Kl(i,o.snapshotVersion.toTimestamp());const d=lh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=YA(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=ch(this.serializer),n.removeTarget=e,this.a_(n)}}class jP extends gx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return se(!!e.streamToken),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=HA(e.writeResults,e.commitTime),r=St(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=ch(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>cx(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,uh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(M.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,uh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class OP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Cn(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ns(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=Y(u);d.L_.add(4),await ea(d),d.q_.set("Unknown"),d.L_.delete(4),await Cu(d)}(this))})}),this.q_=new OP(r,s)}}async function Cu(t){if(ns(t))for(const e of t.B_)await e(!0)}async function ea(t){for(const e of t.B_)await e(!1)}function yx(t,e){const n=Y(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Qf(n)?Kf(n):li(n).r_()&&Gf(n,e))}function Hf(t,e){const n=Y(t),r=li(n);n.N_.delete(e),r.r_()&&vx(n,e),n.N_.size===0&&(r.r_()?r.o_():ns(n)&&n.q_.set("Unknown"))}function Gf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(K.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}li(t).A_(e)}function vx(t,e){t.Q_.xe(e),li(t).R_(e)}function Kf(t){t.Q_=new VA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),li(t).start(),t.q_.v_()}function Qf(t){return ns(t)&&!li(t).n_()&&t.N_.size>0}function ns(t){return Y(t).L_.size===0}function _x(t){t.Q_=void 0}async function VP(t){t.q_.set("Online")}async function LP(t){t.N_.forEach((e,n)=>{Gf(t,e)})}async function FP(t,e){_x(t),Qf(t)?(t.q_.M_(e),Kf(t)):t.q_.set("Unknown")}async function UP(t,e,n){if(t.q_.set("Online"),e instanceof ix&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Yl(t,r)}else if(e instanceof ul?t.Q_.Ke(e):e instanceof sx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(K.min()))try{const r=await px(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(Xe.EMPTY_BYTE_STRING,f.snapshotVersion)),vx(i,u);const p=new Jn(f.target,u,d,f.sequenceNumber);Gf(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Yl(t,r)}}async function Yl(t,e,n){if(!Ko(e))throw e;t.L_.add(1),await ea(t),t.q_.set("Offline"),n||(n=()=>px(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Cu(t)})}function wx(t,e){return e().catch(n=>Yl(t,n,e))}async function Ru(t){const e=Y(t),n=pr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;BP(e);)try{const s=await IP(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,zP(e,s)}catch(s){await Yl(e,s)}xx(e)&&Ex(e)}function BP(t){return ns(t)&&t.O_.length<10}function zP(t,e){t.O_.push(e);const n=pr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function xx(t){return ns(t)&&!pr(t).n_()&&t.O_.length>0}function Ex(t){pr(t).start()}async function $P(t){pr(t).p_()}async function WP(t){const e=pr(t);for(const n of t.O_)e.m_(n.mutations)}async function qP(t,e,n){const r=t.O_.shift(),s=Ff.from(r,e,n);await wx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ru(t)}async function HP(t,e){e&&pr(t).V_&&await async function(r,s){if(function(o){return nx(o)&&o!==M.ABORTED}(s.code)){const i=r.O_.shift();pr(r).s_(),await wx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ru(r)}}(t,e),xx(t)&&Ex(t)}async function Dy(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=ns(n);n.L_.add(3),await ea(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Cu(n)}async function GP(t,e){const n=Y(t);e?(n.L_.delete(2),await Cu(n)):e||(n.L_.add(2),await ea(n),n.q_.set("Unknown"))}function li(t){return t.K_||(t.K_=function(n,r,s){const i=Y(n);return i.w_(),new RP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:VP.bind(null,t),Ro:LP.bind(null,t),mo:FP.bind(null,t),d_:UP.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Qf(t)?Kf(t):t.q_.set("Unknown")):(await t.K_.stop(),_x(t))})),t.K_}function pr(t){return t.U_||(t.U_=function(n,r,s){const i=Y(n);return i.w_(),new jP(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$P.bind(null,t),mo:HP.bind(null,t),f_:WP.bind(null,t),g_:qP.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Ru(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Yf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xf(t,e){if(Cn("AsyncQueue",`${e}: ${t}`),Ko(t))return new z(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=$i(),this.sortedSet=new Te(this.comparator)}static emptySet(e){return new Vs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.W_=new Te(H.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Js{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Js(e,n,Vs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class QP{constructor(){this.queries=My(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Y(n),i=s.queries;s.queries=My(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new z(M.ABORTED,"Firestore shutting down"))}}function My(){return new ai(t=>$w(t),bu)}async function Jf(t,e){const n=Y(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new KP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Xf(o,`Initialization of query '${ds(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&em(n)}async function Zf(t,e){const n=Y(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YP(t,e){const n=Y(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&em(n)}function XP(t,e,n){const r=Y(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function em(t){t.Y_.forEach(e=>{e.next()})}var hh,Vy;(Vy=hh||(hh={})).ea="default",Vy.Cache="cache";class tm{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Js(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Js.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.key=e}}class Ix{constructor(e){this.key=e}}class JP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ee(),this.mutatedKeys=ee(),this.Aa=Ww(e),this.Ra=new Vs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Oy,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),_=Su(this.query,p)?p:null,I=!!g&&this.mutatedKeys.has(g.key),T=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let N=!1;g&&_?g.data.isEqual(_.data)?I!==T&&(r.track({type:3,doc:_}),N=!0):this.ga(g,_)||(r.track({type:2,doc:_}),N=!0,(u&&this.Aa(_,u)>0||d&&this.Aa(_,d)<0)&&(l=!0)):!g&&_?(r.track({type:0,doc:_}),N=!0):g&&!_&&(r.track({type:1,doc:g}),N=!0,(u||d)&&(l=!0)),N&&(_?(o=o.add(_),i=T?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(_,I){const T=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return T(_)-T(I)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Js(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Oy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ix(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Tx(r))}),n}ba(e){this.Ta=e.Ts,this.da=ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Js.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eC{constructor(e){this.key=e,this.va=!1}}class tC{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ai(l=>$w(l),bu),this.Ma=new Map,this.xa=new Set,this.Oa=new Te(H.comparator),this.Na=new Map,this.La=new zf,this.Ba={},this.ka=new Map,this.qa=Xs.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nC(t,e,n=!0){const r=Px(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await bx(r,e,n,!0),s}async function rC(t,e){const n=Px(t);await bx(n,e,!0,!1)}async function bx(t,e,n,r){const s=await bP(t.localStore,sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await sC(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&yx(t.remoteStore,s),l}async function sC(t,e,n,r,s){t.Ka=(p,g,_)=>async function(T,N,E,w){let k=N.view.ma(E);k.ns&&(k=await Cy(T.localStore,N.query,!1).then(({documents:b})=>N.view.ma(b,k)));const j=w&&w.targetChanges.get(N.targetId),V=w&&w.targetMismatches.get(N.targetId)!=null,U=N.view.applyChanges(k,T.isPrimaryClient,j,V);return Fy(T,N.targetId,U.wa),U.snapshot}(t,p,g,_);const i=await Cy(t.localStore,e,!0),o=new JP(e,i.Ts),l=o.ma(i.documents),u=Zo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Fy(t,n,d.wa);const f=new ZP(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function iC(t,e,n){const r=Y(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!bu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await dh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Hf(r.remoteStore,s.targetId),fh(r,s.targetId)}).catch(Go)):(fh(r,s.targetId),await dh(r.localStore,s.targetId,!0))}async function oC(t,e){const n=Y(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Hf(n.remoteStore,r.targetId))}async function aC(t,e,n){const r=mC(t);try{const s=await function(o,l){const u=Y(o),d=ve.now(),f=l.reduce((_,I)=>_.add(I.key),ee());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=Rn(),T=ee();return u.cs.getEntries(_,f).next(N=>{I=N,I.forEach((E,w)=>{w.isValidDocument()||(T=T.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,I)).next(N=>{p=N;const E=[];for(const w of l){const k=CA(w,p.get(w.key).overlayedDocument);k!=null&&E.push(new wr(w.key,k,Ow(k.value.mapValue),De.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,E,l)}).next(N=>{g=N;const E=N.applyToLocalDocumentSet(p,T);return u.documentOverlayCache.saveOverlays(_,N.batchId,E)})}).then(()=>({batchId:g.batchId,changes:Hw(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Te(oe)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await ta(r,s.changes),await Ru(r.remoteStore)}catch(s){const i=Xf(s,"Failed to persist write");n.reject(i)}}async function Sx(t,e){const n=Y(t);try{const r=await EP(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?se(o.va):s.removedDocuments.size>0&&(se(o.va),o.va=!1))}),await ta(n,r,e)}catch(r){await Go(r)}}function Ly(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Y(o);u.onlineState=l;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(d=!0)}),d&&em(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lC(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Te(H.comparator);o=o.insert(i,Ue.newNoDocument(i,K.min()));const l=ee().add(i),u=new Au(K.min(),new Map,new Te(oe),o,l);await Sx(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),nm(r)}else await dh(r.localStore,e,!1).then(()=>fh(r,e,n)).catch(Go)}async function uC(t,e){const n=Y(t),r=e.batch.batchId;try{const s=await xP(n.localStore,e);Nx(n,r,null),kx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ta(n,s)}catch(s){await Go(s)}}async function cC(t,e,n){const r=Y(t);try{const s=await function(o,l){const u=Y(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(se(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);Nx(r,e,n),kx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ta(r,s)}catch(s){await Go(s)}}function kx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Nx(t,e,n){const r=Y(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function fh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Ax(t,r)})}function Ax(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Hf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),nm(t))}function Fy(t,e,n){for(const r of n)r instanceof Tx?(t.La.addReference(r.key,e),dC(t,r)):r instanceof Ix?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Ax(t,r.key)):G()}function dC(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),nm(t))}function nm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new H(de.fromString(e)),r=t.qa.next();t.Na.set(r,new eC(n)),t.Oa=t.Oa.insert(n,r),yx(t.remoteStore,new Jn(sn(Iu(n.path)),r,"TargetPurposeLimboResolution",Rf.oe))}}async function ta(t,e,n){const r=Y(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Wf.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=Y(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>L.forEach(d,g=>L.forEach(g.$i,_=>f.persistence.referenceDelegate.addReference(p,g.targetId,_)).next(()=>L.forEach(g.Ui,_=>f.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))}catch(p){if(!Ko(p))throw p;q("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const _=f.os.get(g),I=_.snapshotVersion,T=_.withLastLimboFreeSnapshotVersion(I);f.os=f.os.insert(g,T)}}}(r.localStore,i))}async function hC(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await mx(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new z(M.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ta(n,r.hs)}}function fC(t,e){const n=Y(t),r=n.Na.get(e);if(r&&r.va)return ee().add(r.key);{let s=ee();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function Px(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Sx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lC.bind(null,e),e.Ca.d_=YP.bind(null,e.eventManager),e.Ca.$a=XP.bind(null,e.eventManager),e}function mC(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cC.bind(null,e),e}class Xl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return wP(this.persistence,new vP,e.initialUser,this.serializer)}Ga(e){return new pP($f.Zr,this.serializer)}Wa(e){return new kP}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xl.provider={build:()=>new Xl};class mh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ly(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hC.bind(null,this.syncEngine),await GP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QP}()}createDatastore(e){const n=Pu(e.databaseInfo.databaseId),r=function(i){return new CP(i)}(e.databaseInfo);return function(i,o,l,u){return new DP(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new MP(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Ly(this.syncEngine,n,0),function(){return jy.D()?new jy:new NP}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const p=new tC(s,i,o,l,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Y(s);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ea(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}mh.provider={build:()=>new mh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Cn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,i){const o=Y(s),l={documents:i.map(p=>Ql(o.serializer,p))},u=await o.Lo("BatchGetDocuments",o.serializer.databaseId,de.emptyPath(),l,i.length),d=new Map;u.forEach(p=>{const g=WA(o.serializer,p);d.set(g.key.toString(),g)});const f=[];return i.forEach(p=>{const g=d.get(p.toString());se(!!g),f.push(g)}),f}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Jo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=H.fromPath(r);this.mutations.push(new tx(s,this.precondition(s)))}),await async function(r,s){const i=Y(r),o={writes:s.map(l=>cx(i.serializer,l))};await i.Mo("Commit",i.serializer.databaseId,de.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw G();n=K.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new z(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(K.min())?De.exists(!1):De.updateTime(n):De.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(K.min()))throw new z(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return De.updateTime(n)}return De.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this._u=r.maxAttempts,this.t_=new qf(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new pC(this.datastore),n=this.cu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.lu(s)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const n=this.updateFunction(e);return!Qo(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!nx(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=st.UNAUTHENTICATED,this.clientId=Rw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Xf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gc(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await mx(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Uy(t,e){t.asyncQueue.verifyOperationInProgress();const n=await vC(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Dy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Dy(e.remoteStore,s)),t._onlineComponents=e}async function vC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await Gc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Gs("Error using user provided cache. Falling back to memory cache: "+n),await Gc(t,new Xl)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await Gc(t,new Xl);return t._offlineComponents}async function sm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await Uy(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await Uy(t,new mh))),t._onlineComponents}function _C(t){return sm(t).then(e=>e.syncEngine)}function wC(t){return sm(t).then(e=>e.datastore)}async function Jl(t){const e=await sm(t),n=e.eventManager;return n.onListen=nC.bind(null,e.syncEngine),n.onUnlisten=iC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oC.bind(null,e.syncEngine),n}function xC(t,e,n={}){const r=new rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new rm({next:g=>{f.Za(),o.enqueueAndForget(()=>Zf(i,p));const _=g.docs.has(l);!_&&g.fromCache?d.reject(new z(M.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?d.reject(new z(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new tm(Iu(l.path),f,{includeMetadataChanges:!0,_a:!0});return Jf(i,p)}(await Jl(t),t.asyncQueue,e,n,r)),r.promise}function EC(t,e,n={}){const r=new rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new rm({next:g=>{f.Za(),o.enqueueAndForget(()=>Zf(i,p)),g.fromCache&&u.source==="server"?d.reject(new z(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new tm(l,f,{includeMetadataChanges:!0,_a:!0});return Jf(i,p)}(await Jl(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e,n){if(!n)throw new z(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function TC(t,e,n,r){if(e===!0&&r===!0)throw new z(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function zy(t){if(!H.isDocumentKey(t))throw new z(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $y(t){if(H.isDocumentKey(t))throw new z(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ju(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function ot(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ju(t);throw new z(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Cx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Du{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wy(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new UN;switch(r.type){case"firstParty":return new WN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=By.get(n);r&&(q("ComponentProvider","Removing Datastore"),By.delete(n),r.terminate())}(this),Promise.resolve()}}function IC(t,e,n,r={}){var s;const i=(t=ot(t,Du))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=st.MOCK_USER;else{l=mS(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new z(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new st(d)}t._authCredentials=new BN(new Cw(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new rs(this.firestore,e,this._query)}}class Qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qe(this.firestore,e,this._key)}}class cr extends rs{constructor(e,n,r){super(e,n,Iu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new H(e))}withConverter(e){return new cr(this.firestore,e,this._path)}}function Ot(t,e,...n){if(t=Pe(t),Rx("collection","path",e),t instanceof Du){const r=de.fromString(e,...n);return $y(r),new cr(t,null,r)}{if(!(t instanceof Qe||t instanceof cr))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return $y(r),new cr(t.firestore,null,r)}}function qe(t,e,...n){if(t=Pe(t),arguments.length===1&&(e=Rw.newId()),Rx("doc","path",e),t instanceof Du){const r=de.fromString(e,...n);return zy(r),new Qe(t,null,new H(r))}{if(!(t instanceof Qe||t instanceof cr))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(de.fromString(e,...n));return zy(r),new Qe(t.firestore,t instanceof cr?t.converter:null,new H(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qf(this,"async_queue_retry"),this.Vu=()=>{const r=Hc();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Hc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Hc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new rn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ko(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Cn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Yf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&G()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Hy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Yt extends Du{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new qy,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qy(e),this._firestoreClient=void 0,await e}}}function bC(t,e){const n=typeof t=="object"?t:q_(),r=typeof t=="string"?t:"(default)",s=_f(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=hS("firestore");i&&IC(s,...i)}return s}function ui(t){if(t._terminated)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SC(t),t._firestoreClient}function SC(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new rA(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Cx(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new yC(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xr(Xe.fromBase64String(e))}catch(n){throw new z(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xr(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=/^__.*__$/;class NC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new wr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xo(e,this.data,n,this.fieldTransforms)}}class jx{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new wr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Dx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class lm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new lm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zl(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Dx(this.Cu)&&kC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class AC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Pu(e)}Qu(e,n,r,s=!1){return new lm({Cu:e,methodName:n,qu:r,path:He.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function di(t){const e=t._freezeSettings(),n=Pu(t._databaseId);return new AC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ou(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);dm("Data must be an object, but it was:",o,r);const l=Ox(r,o);let u,d;if(i.merge)u=new It(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=ph(e,p,n);if(!o.contains(g))throw new z(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Vx(f,g)||f.push(g)}u=new It(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new NC(new ht(l),u,d)}class Mu extends im{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mu}}function um(t,e,n,r){const s=t.Qu(1,e,n);dm("Data must be an object, but it was:",s,r);const i=[],o=ht.empty();ts(r,(u,d)=>{const f=hm(e,u,n);d=Pe(d);const p=s.Nu(f);if(d instanceof Mu)i.push(f);else{const g=na(d,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new It(i);return new jx(o,l,s.fieldTransforms)}function cm(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[ph(e,r,n)],u=[s];if(i.length%2!=0)throw new z(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(ph(e,i[g])),u.push(i[g+1]);const d=[],f=ht.empty();for(let g=l.length-1;g>=0;--g)if(!Vx(d,l[g])){const _=l[g];let I=u[g];I=Pe(I);const T=o.Nu(_);if(I instanceof Mu)d.push(_);else{const N=na(I,T);N!=null&&(d.push(_),f.set(_,N))}}const p=new It(d);return new jx(f,p,o.fieldTransforms)}function PC(t,e,n,r=!1){return na(n,t.Qu(r?4:3,e))}function na(t,e){if(Mx(t=Pe(t)))return dm("Unsupported field value:",e,t),Ox(t,e);if(t instanceof im)return function(r,s){if(!Dx(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=na(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return bA(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ve.fromDate(r);return{timestampValue:Kl(s.serializer,i)}}if(r instanceof ve){const i=new ve(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Kl(s.serializer,i)}}if(r instanceof om)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xr)return{bytesValue:ox(s.serializer,r._byteString)};if(r instanceof Qe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Bf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof am)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Lf(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${ju(r)}`)}(t,e)}function Ox(t,e){const n={};return jw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ts(t,(r,s)=>{const i=na(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Mx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ve||t instanceof om||t instanceof Xr||t instanceof Qe||t instanceof im||t instanceof am)}function dm(t,e,n){if(!Mx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=ju(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ph(t,e,n){if((e=Pe(e))instanceof ci)return e._internalPath;if(typeof e=="string")return hm(t,e);throw Zl("Field path arguments must be of type string or ",t,!1,void 0,n)}const CC=new RegExp("[~\\*/\\[\\]]");function hm(t,e,n){if(e.search(CC)>=0)throw Zl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ci(...e.split("."))._internalPath}catch{throw Zl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zl(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new z(M.INVALID_ARGUMENT,l+t+u)}function Vx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new RC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RC extends eu{data(){return super.data()}}function fm(t,e){return typeof e=="string"?hm(t,e):e instanceof ci?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mm{}class jC extends mm{}function DC(t,e,...n){let r=[];e instanceof mm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof pm).length,l=i.filter(u=>u instanceof Vu).length;if(o>1||o>0&&l>0)throw new z(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Vu extends jC{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Vu(e,n,r)}_apply(e){const n=this._parse(e);return Fx(e._query,n),new rs(e.firestore,e.converter,oh(e._query,n))}_parse(e){const n=di(e.firestore);return function(i,o,l,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new z(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Qy(p,f);const _=[];for(const I of p)_.push(Ky(u,i,I));g={arrayValue:{values:_}}}else g=Ky(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Qy(p,f),g=PC(l,o,p,f==="in"||f==="not-in");return je.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Gy(t,e,n){const r=e,s=fm("where",t);return Vu._create(s,r,n)}class pm extends mm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)Fx(o,u),o=oh(o,u)}(e._query,n),new rs(e.firestore,e.converter,oh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Ky(t,e,n){if(typeof(n=Pe(n))=="string"){if(n==="")throw new z(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zw(e)&&n.indexOf("/")!==-1)throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(de.fromString(n));if(!H.isDocumentKey(r))throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return my(t,new H(r))}if(n instanceof Qe)return my(t,n._key);throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ju(n)}.`)}function Qy(t,e){if(!Array.isArray(t)||t.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Fx(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class Ux{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ne(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ts(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ne(o.doubleValue));return new am(i)}convertGeoPoint(e){return new om(Ne(e.latitude),Ne(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Df(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ao(e));default:return null}}convertTimestamp(e){const n=mr(e);return new ve(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=de.fromString(e);se(fx(r));const s=new Po(r.get(1),r.get(3)),i=new H(r.popFirst(5));return s.isEqual(n)||Cn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class OC extends Ux{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gm extends eu{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class cl extends gm{data(e={}){return super.data(e)}}class Bx{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ks(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cl(this._firestore,this._userDataWriter,r.key,r,new ks(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new cl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ks(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new cl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ks(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:MC(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function MC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t){t=ot(t,Qe);const e=ot(t.firestore,Yt);return xC(ui(e),t._key).then(n=>zx(e,t,n))}class Fu extends Ux{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}function LC(t){t=ot(t,rs);const e=ot(t.firestore,Yt),n=ui(e),r=new Fu(e);return Lx(t._query),EC(n,t._query).then(s=>new Bx(e,r,t,s))}function FC(t,e,n){t=ot(t,Qe);const r=ot(t.firestore,Yt),s=Lu(t.converter,e,n);return ra(r,[Ou(di(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,De.none())])}function UC(t,e,n,...r){t=ot(t,Qe);const s=ot(t.firestore,Yt),i=di(s);let o;return o=typeof(e=Pe(e))=="string"||e instanceof ci?cm(i,"updateDoc",t._key,e,n,r):um(i,"updateDoc",t._key,e),ra(s,[o.toMutation(t._key,De.exists(!0))])}function Yy(t){return ra(ot(t.firestore,Yt),[new Jo(t._key,De.none())])}function Xy(t,e){const n=ot(t.firestore,Yt),r=qe(t),s=Lu(t.converter,e);return ra(n,[Ou(di(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,De.exists(!1))]).then(()=>r)}function Jy(t,...e){var n,r,s;t=Pe(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Hy(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Hy(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,d,f;if(t instanceof Qe)d=ot(t.firestore,Yt),f=Iu(t._key.path),u={next:p=>{e[o]&&e[o](zx(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=ot(t,rs);d=ot(p.firestore,Yt),f=p._query;const g=new Fu(d);u={next:_=>{e[o]&&e[o](new Bx(d,g,p,_))},error:e[o+1],complete:e[o+2]},Lx(t._query)}return function(g,_,I,T){const N=new rm(T),E=new tm(_,N,I);return g.asyncQueue.enqueueAndForget(async()=>Jf(await Jl(g),E)),()=>{N.Za(),g.asyncQueue.enqueueAndForget(async()=>Zf(await Jl(g),E))}}(ui(d),f,l,u)}function ra(t,e){return function(r,s){const i=new rn;return r.asyncQueue.enqueueAndForget(async()=>aC(await _C(r),s,i)),i.promise}(ui(t),e)}function zx(t,e,n){const r=n.docs.get(e._key),s=new Fu(t);return new gm(t,s,e._key,r,new ks(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=di(e)}set(e,n,r){this._verifyNotCommitted();const s=Kn(e,this._firestore),i=Lu(s.converter,n,r),o=Ou(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,De.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Kn(e,this._firestore);let o;return o=typeof(n=Pe(n))=="string"||n instanceof ci?cm(this._dataReader,"WriteBatch.update",i._key,n,r,s):um(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,De.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Kn(e,this._firestore);return this._mutations=this._mutations.concat(new Jo(n._key,De.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kn(t,e){if((t=Pe(t)).firestore!==e)throw new z(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=di(n)}get(n){const r=Kn(n,this._firestore),s=new OC(this._firestore);return this._transaction.lookup([r._key]).then(i=>{if(!i||i.length!==1)return G();const o=i[0];if(o.isFoundDocument())return new eu(this._firestore,s,o.key,o,r.converter);if(o.isNoDocument())return new eu(this._firestore,s,r._key,null,r.converter);throw G()})}set(n,r,s){const i=Kn(n,this._firestore),o=Lu(i.converter,r,s),l=Ou(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,s);return this._transaction.set(i._key,l),this}update(n,r,s,...i){const o=Kn(n,this._firestore);let l;return l=typeof(r=Pe(r))=="string"||r instanceof ci?cm(this._dataReader,"Transaction.update",o._key,r,s,i):um(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,l),this}delete(n){const r=Kn(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Kn(e,this._firestore),r=new Fu(this._firestore);return super.get(e).then(s=>new gm(this._firestore,r,n._key,s._document,new ks(!1,!1),n.converter))}}function $x(t,e,n){t=ot(t,Yt);const r=Object.assign(Object.assign({},BC),n);return function(i){if(i.maxAttempts<1)throw new z(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,o,l){const u=new rn;return i.asyncQueue.enqueueAndForget(async()=>{const d=await wC(i);new gC(i.asyncQueue,d,l,o,u).au()}),u.promise}(ui(t),s=>e(new $C(t,s)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t){return ui(t=ot(t,Yt)),new zC(t,e=>ra(t,e))}(function(e,n=!0){(function(s){oi=s})(si),qs(new Hr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Yt(new zN(r.getProvider("auth-internal")),new HN(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),ur(uy,"4.7.3",e),ur(uy,"4.7.3","esm2017")})();const qC={apiKey:"AIzaSyAMxkbrsJVtrl00Dpd69UsnaR8tPghJIvU",authDomain:"budget-app-860dc.firebaseapp.com",projectId:"budget-app-860dc",storageBucket:"budget-app-860dc.firebasestorage.app",messagingSenderId:"517685373931",appId:"1:517685373931:web:41beb45834731dc03787ae"},Wx=W_(qC),Kc=MN(Wx),HC=new yn,ge=bC(Wx),qx=O.createContext(void 0),GC=({children:t})=>{const[e,n]=O.useState(null),[r,s]=O.useState(!0);O.useEffect(()=>Ik(Kc,u=>{n(u),s(!1)}),[]);const i=async()=>{try{await qk(Kc,HC)}catch(l){throw console.error("Error signing in with Google",l),l}},o=async()=>{try{await bk(Kc)}catch(l){throw console.error("Error signing out",l),l}};return c.jsx(qx.Provider,{value:{user:e,loading:r,signInWithGoogle:i,logout:o},children:!r&&t})},xr=()=>{const t=O.useContext(qx);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},KC=()=>{const{user:t,signInWithGoogle:e}=xr();return t?c.jsx(gf,{to:"/",replace:!0}):c.jsx("div",{className:"min-h-screen bg-background-dark text-white flex flex-col items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-md bg-surface-dark p-8 rounded-3xl shadow-glow-primary border border-white/5 flex flex-col items-center gap-8",children:[c.jsxs("div",{className:"text-center space-y-2",children:[c.jsx("h1",{className:"text-4xl font-extrabold tracking-tight bg-gradient-to-br from-white to-white/70 bg-clip-text text-transparent",children:"Magic Budget"}),c.jsx("p",{className:"text-gray-400",children:"Sign in to manage your money"})]}),c.jsxs("button",{onClick:e,className:"w-full h-14 bg-white text-background-dark rounded-xl font-bold flex items-center justify-center gap-3 shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all",children:[c.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})]})})},QC={},Zy=t=>{let e;const n=new Set,r=(f,p)=>{const g=typeof f=="function"?f(e):f;if(!Object.is(g,e)){const _=e;e=p??(typeof g!="object"||g===null)?g:Object.assign({},e,g),n.forEach(I=>I(e,_))}},s=()=>e,u={setState:r,getState:s,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(QC?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(r,s,u);return u},YC=t=>t?Zy(t):Zy;var Hx={exports:{}},Gx={},Kx={exports:{}},Qx={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zs=O;function XC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var JC=typeof Object.is=="function"?Object.is:XC,ZC=Zs.useState,eR=Zs.useEffect,tR=Zs.useLayoutEffect,nR=Zs.useDebugValue;function rR(t,e){var n=e(),r=ZC({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return tR(function(){s.value=n,s.getSnapshot=e,Qc(s)&&i({inst:s})},[t,n,e]),eR(function(){return Qc(s)&&i({inst:s}),t(function(){Qc(s)&&i({inst:s})})},[t]),nR(n),n}function Qc(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!JC(t,n)}catch{return!0}}function sR(t,e){return e()}var iR=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?sR:rR;Qx.useSyncExternalStore=Zs.useSyncExternalStore!==void 0?Zs.useSyncExternalStore:iR;Kx.exports=Qx;var oR=Kx.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uu=O,aR=oR;function lR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uR=typeof Object.is=="function"?Object.is:lR,cR=aR.useSyncExternalStore,dR=Uu.useRef,hR=Uu.useEffect,fR=Uu.useMemo,mR=Uu.useDebugValue;Gx.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=dR(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=fR(function(){function u(_){if(!d){if(d=!0,f=_,_=r(_),s!==void 0&&o.hasValue){var I=o.value;if(s(I,_))return p=I}return p=_}if(I=p,uR(f,_))return I;var T=r(_);return s!==void 0&&s(I,T)?(f=_,I):(f=_,p=T)}var d=!1,f,p,g=n===void 0?null:n;return[function(){return u(e())},g===null?void 0:function(){return u(g())}]},[e,n,r,s]);var l=cR(t,i[0],i[1]);return hR(function(){o.hasValue=!0,o.value=l},[l]),mR(l),l};Hx.exports=Gx;var pR=Hx.exports;const gR=cv(pR),Yx={},{useDebugValue:yR}=xh,{useSyncExternalStoreWithSelector:vR}=gR;let ev=!1;const _R=t=>t;function wR(t,e=_R,n){(Yx?"production":void 0)!=="production"&&n&&!ev&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ev=!0);const r=vR(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return yR(r),r}const tv=t=>{(Yx?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?YC(t):t,n=(r,s)=>wR(e,r,s);return Object.assign(n,e),n},xR=t=>t?tv(t):tv,Pt=xR(t=>({settings:{payFrequency:"bi-weekly",nextPayDate:null,starterEFGoal:1e3,currentEF:0},bills:[],sinkingFunds:[],pendingAllocation:null,setSettings:e=>t(n=>({settings:{...n.settings,...e}})),setBills:e=>t({bills:e}),setSinkingFunds:e=>t({sinkingFunds:e}),addSinkingFund:e=>t(n=>({sinkingFunds:[...n.sinkingFunds,e]})),removeSinkingFund:e=>t(n=>({sinkingFunds:n.sinkingFunds.filter(r=>r.id!==e)})),updateSinkingFund:(e,n)=>t(r=>({sinkingFunds:r.sinkingFunds.map(s=>s.id===e?{...s,...n}:s)})),updateEF:e=>t(n=>({settings:{...n.settings,currentEF:e}})),addBill:e=>t(n=>({bills:[...n.bills,e]})),removeBill:e=>t(n=>({bills:n.bills.filter(r=>r.id!==e)})),updateBill:(e,n,r)=>t(s=>({bills:s.bills.map(i=>i.id===e?{...i,[n]:r}:i)})),setPendingAllocation:e=>t({pendingAllocation:e})})),ER=({onNext:t})=>{const{settings:e,setSettings:n}=Pt(),[r,s]=O.useState(e.payFrequency),[i,o]=O.useState(e.nextPayDate?new Date(e.nextPayDate).toISOString().split("T")[0]:""),l=u=>{u.preventDefault(),n({payFrequency:r,nextPayDate:i?new Date(i):null}),t()};return c.jsxs("form",{onSubmit:l,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"How often do you get paid?"}),c.jsxs("select",{value:r,onChange:u=>s(u.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md border",children:[c.jsx("option",{value:"weekly",children:"Weekly"}),c.jsx("option",{value:"bi-weekly",children:"Bi-Weekly (Every 2 weeks)"}),c.jsx("option",{value:"semi-monthly",children:"Semi-Monthly (Twice a month)"}),c.jsx("option",{value:"monthly",children:"Monthly"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"When is your next paycheck?"}),c.jsx("input",{type:"date",required:!0,value:i,onChange:u=>o(u.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),c.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"We will use this to calculate your budget cycles."})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Next: Add Bills"})})]})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Xx=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,...d},f)=>O.createElement("svg",{ref:f,...TR,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${IR(t)}`,l].join(" "),...d},[...e.map(([p,g])=>O.createElement(p,g)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=Xx("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Xx("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),kR=({onFinish:t,onBack:e})=>{const[n,r]=O.useState([{id:"1",name:"Rent/Mortgage",amount:"",dueDay:"1"}]),s=()=>{r([...n,{id:Math.random().toString(),name:"",amount:"",dueDay:"1"}])},i=u=>{r(n.filter(d=>d.id!==u))},o=(u,d,f)=>{r(n.map(p=>p.id===u?{...p,[d]:f}:p))},l=u=>{u.preventDefault(),console.log("Saving bills:",n),t()};return c.jsxs("form",{onSubmit:l,className:"space-y-6",children:[c.jsx("div",{className:"space-y-4",children:n.map(u=>c.jsxs("div",{className:"flex gap-2 items-start p-3 bg-gray-50 rounded-lg border border-gray-200",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Bill Name"}),c.jsx("input",{type:"text",required:!0,placeholder:"e.g. Electric",value:u.name,onChange:d=>o(u.id,"name",d.target.value),className:"mt-1 block w-full border-gray-300 rounded-md text-sm border p-1"})]}),c.jsxs("div",{className:"w-24",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Amount"}),c.jsx("input",{type:"number",required:!0,placeholder:"0.00",value:u.amount,onChange:d=>o(u.id,"amount",d.target.value),className:"mt-1 block w-full border-gray-300 rounded-md text-sm border p-1"})]}),c.jsxs("div",{className:"w-16",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Due Day"}),c.jsx("input",{type:"number",min:"1",max:"31",required:!0,value:u.dueDay,onChange:d=>o(u.id,"dueDay",d.target.value),className:"mt-1 block w-full border-gray-300 rounded-md text-sm border p-1"})]}),c.jsx("button",{type:"button",onClick:()=>i(u.id),className:"mt-6 text-red-500 hover:text-red-700",children:c.jsx(SR,{className:"w-4 h-4"})})]},u.id))}),c.jsxs("button",{type:"button",onClick:s,className:"w-full flex items-center justify-center py-2 border-2 border-dashed border-gray-300 rounded-md text-sm font-medium text-gray-600 hover:border-gray-400 hover:bg-gray-50",children:[c.jsx(bR,{className:"w-4 h-4 mr-2"}),"Add Another Bill"]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"flex-1 py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none",children:"Back"}),c.jsx("button",{type:"submit",className:"flex-1 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Finish Setup"})]})]})},NR=()=>{const t=pf(),[e,n]=O.useState(1);return c.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center py-12 px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"w-full max-w-md space-y-8",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Let's get you set up"}),c.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Step ",e," of 2"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700",children:c.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:e===1?"50%":"100%"}})}),c.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:c.jsxs(O_,{children:[c.jsx($t,{index:!0,element:c.jsx(gf,{to:"step1",replace:!0})}),c.jsx($t,{path:"step1",element:c.jsx(ER,{onNext:()=>{n(2),t("step2")}})}),c.jsx($t,{path:"step2",element:c.jsx(kR,{onFinish:()=>{t("/")},onBack:()=>{n(1),t("step1")}})})]})})]})})};function Se(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function gr(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function ms(t,e){const n=Se(t);return isNaN(e)?gr(t,NaN):(e&&n.setDate(n.getDate()+e),n)}const Jx=6048e5,AR=864e5;let PR={};function Bu(){return PR}function Do(t,e){var l,u,d,f;const n=Bu(),r=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.weekStartsOn)??0,s=Se(t),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function tu(t){return Do(t,{weekStartsOn:1})}function Zx(t){const e=Se(t),n=e.getFullYear(),r=gr(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const s=tu(r),i=gr(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=tu(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function nv(t){const e=Se(t);return e.setHours(0,0,0,0),e}function rv(t){const e=Se(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function CR(t,e){const n=nv(t),r=nv(e),s=+n-rv(n),i=+r-rv(r);return Math.round((s-i)/AR)}function RR(t){const e=Zx(t),n=gr(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),tu(n)}function Yc(t,e){const n=Se(t),r=Se(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function jR(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function DR(t){if(!jR(t)&&typeof t!="number")return!1;const e=Se(t);return!isNaN(Number(e))}function OR(t,e){const n=Se(t),r=Se(e),s=n.getFullYear()-r.getFullYear(),i=n.getMonth()-r.getMonth();return s*12+i}function MR(t){const e=Se(t);return e.setHours(23,59,59,999),e}function VR(t){const e=Se(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function LR(t){const e=Se(t);return+MR(e)==+VR(e)}function eE(t,e){const n=Se(t),r=Se(e),s=Yc(n,r),i=Math.abs(OR(n,r));let o;if(i<1)o=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*i);let l=Yc(n,r)===-s;LR(Se(t))&&i===1&&Yc(t,r)===1&&(l=!1),o=s*(i-Number(l))}return o===0?0:o}function FR(t){const e=Se(t),n=gr(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const UR={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BR=(t,e,n)=>{let r;const s=UR[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Xc(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const zR={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},$R={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},WR={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qR={date:Xc({formats:zR,defaultWidth:"full"}),time:Xc({formats:$R,defaultWidth:"full"}),dateTime:Xc({formats:WR,defaultWidth:"full"})},HR={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GR=(t,e,n,r)=>HR[t];function Oi(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const KR={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},QR={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},YR={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},XR={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},JR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ZR={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},e2=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},t2={ordinalNumber:e2,era:Oi({values:KR,defaultWidth:"wide"}),quarter:Oi({values:QR,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Oi({values:YR,defaultWidth:"wide"}),day:Oi({values:XR,defaultWidth:"wide"}),dayPeriod:Oi({values:JR,defaultWidth:"wide",formattingValues:ZR,defaultFormattingWidth:"wide"})};function Mi(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?r2(l,p=>p.test(o)):n2(l,p=>p.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const f=e.slice(o.length);return{value:d,rest:f}}}function n2(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function r2(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function s2(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const i2=/^(\d+)(th|st|nd|rd)?/i,o2=/\d+/i,a2={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},l2={any:[/^b/i,/^(a|c)/i]},u2={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},c2={any:[/1/i,/2/i,/3/i,/4/i]},d2={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},h2={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},f2={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},m2={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},p2={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},g2={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},y2={ordinalNumber:s2({matchPattern:i2,parsePattern:o2,valueCallback:t=>parseInt(t,10)}),era:Mi({matchPatterns:a2,defaultMatchWidth:"wide",parsePatterns:l2,defaultParseWidth:"any"}),quarter:Mi({matchPatterns:u2,defaultMatchWidth:"wide",parsePatterns:c2,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Mi({matchPatterns:d2,defaultMatchWidth:"wide",parsePatterns:h2,defaultParseWidth:"any"}),day:Mi({matchPatterns:f2,defaultMatchWidth:"wide",parsePatterns:m2,defaultParseWidth:"any"}),dayPeriod:Mi({matchPatterns:p2,defaultMatchWidth:"any",parsePatterns:g2,defaultParseWidth:"any"})},v2={code:"en-US",formatDistance:BR,formatLong:qR,formatRelative:GR,localize:t2,match:y2,options:{weekStartsOn:0,firstWeekContainsDate:1}};function _2(t){const e=Se(t);return CR(e,FR(e))+1}function w2(t){const e=Se(t),n=+tu(e)-+RR(e);return Math.round(n/Jx)+1}function tE(t,e){var f,p,g,_;const n=Se(t),r=n.getFullYear(),s=Bu(),i=(e==null?void 0:e.firstWeekContainsDate)??((p=(f=e==null?void 0:e.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??s.firstWeekContainsDate??((_=(g=s.locale)==null?void 0:g.options)==null?void 0:_.firstWeekContainsDate)??1,o=gr(t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=Do(o,e),u=gr(t,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const d=Do(u,e);return n.getTime()>=l.getTime()?r+1:n.getTime()>=d.getTime()?r:r-1}function x2(t,e){var l,u,d,f;const n=Bu(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,s=tE(t,e),i=gr(t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Do(i,e)}function E2(t,e){const n=Se(t),r=+Do(n,e)-+x2(n,e);return Math.round(r/Jx)+1}function ae(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Un={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ae(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ae(n+1,2)},d(t,e){return ae(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ae(t.getHours()%12||12,e.length)},H(t,e){return ae(t.getHours(),e.length)},m(t,e){return ae(t.getMinutes(),e.length)},s(t,e){return ae(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ae(s,e.length)}},us={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},sv={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return Un.y(t,e)},Y:function(t,e,n,r){const s=tE(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return ae(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):ae(i,e.length)},R:function(t,e){const n=Zx(t);return ae(n,e.length)},u:function(t,e){const n=t.getFullYear();return ae(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ae(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ae(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Un.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ae(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=E2(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):ae(s,e.length)},I:function(t,e,n){const r=w2(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ae(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Un.d(t,e)},D:function(t,e,n){const r=_2(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ae(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ae(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ae(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ae(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=us.noon:r===0?s=us.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=us.evening:r>=12?s=us.afternoon:r>=4?s=us.morning:s=us.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Un.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Un.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ae(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ae(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Un.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Un.s(t,e)},S:function(t,e){return Un.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return ov(r);case"XXXX":case"XX":return Pr(r);case"XXXXX":case"XXX":default:return Pr(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return ov(r);case"xxxx":case"xx":return Pr(r);case"xxxxx":case"xxx":default:return Pr(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+iv(r,":");case"OOOO":default:return"GMT"+Pr(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+iv(r,":");case"zzzz":default:return"GMT"+Pr(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return ae(r,e.length)},T:function(t,e,n){const r=t.getTime();return ae(r,e.length)}};function iv(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+ae(i,2)}function ov(t,e){return t%60===0?(t>0?"-":"+")+ae(Math.abs(t)/60,2):Pr(t,e)}function Pr(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=ae(Math.trunc(r/60),2),i=ae(r%60,2);return n+s+e+i}const av=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},nE=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},T2=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return av(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",av(r,e)).replace("{{time}}",nE(s,e))},I2={p:nE,P:T2},b2=/^D+$/,S2=/^Y+$/,k2=["D","DD","YY","YYYY"];function N2(t){return b2.test(t)}function A2(t){return S2.test(t)}function P2(t,e,n){const r=C2(t,e,n);if(console.warn(r),k2.includes(t))throw new RangeError(r)}function C2(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const R2=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,j2=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,D2=/^'([^]*?)'?$/,O2=/''/g,M2=/[a-zA-Z]/;function lv(t,e,n){var f,p,g,_;const r=Bu(),s=r.locale??v2,i=r.firstWeekContainsDate??((p=(f=r.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,o=r.weekStartsOn??((_=(g=r.locale)==null?void 0:g.options)==null?void 0:_.weekStartsOn)??0,l=Se(t);if(!DR(l))throw new RangeError("Invalid time value");let u=e.match(j2).map(I=>{const T=I[0];if(T==="p"||T==="P"){const N=I2[T];return N(I,s.formatLong)}return I}).join("").match(R2).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const T=I[0];if(T==="'")return{isToken:!1,value:V2(I)};if(sv[T])return{isToken:!0,value:I};if(T.match(M2))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:I}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return u.map(I=>{if(!I.isToken)return I.value;const T=I.value;(A2(T)||N2(T))&&P2(T,e,String(t));const N=sv[T[0]];return N(l,T,s.localize,d)}).join("")}function V2(t){const e=t.match(D2);return e?e[1].replace(O2,"'"):t}const rE=(t,e)=>{const n=new Date(t);switch(e){case"weekly":return ms(n,7);case"bi-weekly":return ms(n,14);case"semi-monthly":return ms(n,15);case"monthly":return ms(n,30);default:return ms(n,14)}},sE=(t,e,n)=>{const r=parseInt(t.dueDay),s=e.getDate(),i=e.getMonth(),o=e.getFullYear();let l=new Date(o,i,r);r<s&&(l=new Date(o,i+1,r));const u=ms(l,-2);return u<=n&&u>=e},L2=(t,e,n,r,s=new Date,i=null,o=0,l=1e3)=>{const u=i||rE(s,r),d=e.filter(I=>sE(I,s,u)),f={};let p=t;d.forEach(I=>{const T=parseFloat(I.amount)||0,N=Math.min(p,T);f[I.id]=N,p-=N});let g=0;if(p>0&&o<l){const I=l-o;g=Math.min(p,I),p-=g}const _={};if(p>0&&n.length>0){const I=n.filter(N=>N.currentAmount<N.targetAmount),T=I.reduce((N,E)=>N+E.priority,0);if(T>0){I.forEach(E=>{if(p<=0)return;const w=E.priority/T;let k=p*w;const j=E.targetAmount-E.currentAmount;k=Math.min(k,j),k=Math.floor(k*100)/100,_[E.id]=k});const N=Object.values(_).reduce((E,w)=>E+w,0);p-=N}}return{dueBills:d,billAllocations:f,emergencyFundAllocation:g,sinkingFundsAllocation:_,surplus:Math.max(0,p)}},F2=()=>{const{user:t}=xr(),{settings:e,bills:n,sinkingFunds:r,setPendingAllocation:s,pendingAllocation:i}=Pt(),[o,l]=O.useState(""),[u,d]=O.useState(!1);return{paycheckAmount:o,setPaycheckAmount:l,runAllocation:()=>{const g=parseFloat(o);if(isNaN(g)||g<=0)return;const _=L2(g,n,r,e.payFrequency,new Date,e.nextPayDate?new Date(e.nextPayDate):null,e.currentEF,e.starterEFGoal);s({totalIncome:g,allocations:_.billAllocations,emergencyFundAllocation:_.emergencyFundAllocation,sinkingFundsAllocation:_.sinkingFundsAllocation,isConfirmed:!1})},confirmAllocation:async()=>{if(!(!t||!i)){d(!0);try{const g=WC(ge),_=ve.now(),I=qe(Ot(ge,"users",t.uid,"transactions"));if(g.set(I,{date:_,amount:i.totalIncome,type:"income",description:"Paycheck Income"}),Object.entries(i.allocations).forEach(([T,N])=>{if(N>0){const E=n.find(k=>k.id===T),w=qe(Ot(ge,"users",t.uid,"transactions"));g.set(w,{date:_,amount:N,type:"allocation_bill",description:`Allocated to ${(E==null?void 0:E.name)||"Bill"}`,relatedId:T,category:"Fixed Bills"})}}),Object.entries(i.sinkingFundsAllocation).forEach(([T,N])=>{if(N>0){const E=r.find(V=>V.id===T),w=qe(Ot(ge,"users",t.uid,"transactions"));g.set(w,{date:_,amount:N,type:"allocation_fund",description:`Allocated to ${(E==null?void 0:E.name)||"Fund"}`,relatedId:T,category:"Sinking Funds"});const k=qe(ge,"users",t.uid,"sinkingFunds",T),j=(E==null?void 0:E.currentAmount)||0;g.update(k,{currentAmount:j+N})}}),i.emergencyFundAllocation>0){const T=qe(Ot(ge,"users",t.uid,"transactions"));g.set(T,{date:_,amount:i.emergencyFundAllocation,type:"allocation_fund",description:"Allocated to Emergency Fund",relatedId:"emergency_fund",category:"Savings"});const N=qe(ge,"users",t.uid,"settings","general");g.update(N,{currentEF:e.currentEF+i.emergencyFundAllocation})}await g.commit(),s(null),l(""),d(!1)}catch(g){console.error("Error confirming allocation:",g),d(!1)}}},isConfirming:u}},U2=async(t,e,n,r)=>{if(r<=0)throw new Error("Transfer amount must be positive");try{await $x(ge,async s=>{const i=qe(ge,"users",t,"sinkingFunds",e.id),o=await s.get(i);if(!o.exists())throw new Error("Source fund does not exist");const l=o.data().currentAmount||0;if(l<r)throw new Error("Insufficient funds");s.update(i,{currentAmount:l-r});const u=ve.now(),d=qe(Ot(ge,"users",t,"transactions"));s.set(d,{date:u,amount:-r,type:"reallocation_out",description:`Transferred to ${n.name}`,relatedId:e.id,category:"Reallocation"});const f=qe(Ot(ge,"users",t,"transactions"));s.set(f,{date:u,amount:r,type:"allocation_bill",description:`Covered by ${e.name}`,relatedId:n.id,category:"Fixed Bills"})})}catch(s){throw console.error("Reallocation failed:",s),s}},B2=({isOpen:t,onClose:e,targetBill:n,shortageAmount:r,onSuccess:s})=>{const{user:i}=xr(),{sinkingFunds:o}=Pt(),[l,u]=O.useState("selection"),[d,f]=O.useState(null),[p,g]=O.useState(!1);if(!t||!n)return null;const _=o.filter(N=>N.currentAmount>0),I=async N=>{if(i){g(!0);try{await U2(i.uid,N,n,r),f(N),u("resolution"),s()}catch(E){console.error(E)}finally{g(!1)}}},T=()=>{u("selection"),f(null),e()};return c.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-surface-dark border border-white/10 rounded-2xl shadow-2xl w-full max-w-sm h-[600px] flex flex-col relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-4 right-4 z-10",children:l==="selection"&&c.jsx("button",{onClick:T,className:"p-2 bg-white/5 rounded-full hover:bg-white/10 transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-white",children:"close"})})}),l==="selection"&&c.jsxs("div",{className:"flex-1 flex flex-col p-6 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[c.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Reallocate Funds"}),c.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 rounded-2xl p-5 mb-8",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"material-symbols-outlined text-red-500",children:"warning"}),c.jsx("span",{className:"text-red-500 font-bold text-xs tracking-wider uppercase",children:"Critical Funding Need"})]}),c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsx("div",{className:"size-12 rounded-xl bg-red-500/20 flex items-center justify-center text-red-500",children:c.jsx("span",{className:"material-symbols-outlined",children:"bolt"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-bold text-lg",children:n.name}),c.jsx("p",{className:"text-red-400 text-xs",children:"Due in soon"})]}),c.jsx("span",{className:"ml-auto text-[10px] bg-red-500/20 text-red-400 px-2 py-1 rounded border border-red-500/20 uppercase font-bold",children:"Overdue Risk"})]}),c.jsxs("div",{className:"flex justify-between items-end mb-2",children:[c.jsx("span",{className:"text-gray-400 text-sm",children:"Current Shortage"}),c.jsxs("span",{className:"text-3xl font-bold text-red-500",children:["-$",r.toFixed(2)]})]}),c.jsx("div",{className:"h-1.5 w-full bg-black/40 rounded-full overflow-hidden flex",children:c.jsx("div",{className:"h-full bg-red-500 w-[70%] rounded-full shadow-[0_0_10px_rgba(239,68,68,0.5)]"})}),c.jsxs("div",{className:"flex justify-between mt-1 text-[10px] text-gray-500",children:[c.jsx("span",{children:"Paid: $0.00"}),c.jsxs("span",{children:["Total: $",n.amount]})]})]}),c.jsx("h3",{className:"text-white font-bold mb-4",children:"Source Funds From"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 -mr-2 pr-2 custom-scrollbar",children:_.map(N=>c.jsxs("div",{className:"bg-surface-dark border border-white/5 rounded-2xl p-4 group hover:border-emerald-500/30 transition-colors",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"size-10 rounded-lg bg-emerald-500/10 flex items-center justify-center text-emerald-500",children:c.jsx("span",{className:"material-symbols-outlined",children:"savings"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-white font-bold",children:N.name}),c.jsx("p",{className:"text-emerald-500 text-xs",children:"Available Budget"})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("span",{className:"block text-white font-bold text-lg",children:["$",N.currentAmount.toFixed(2)]}),c.jsx("span",{className:"text-gray-500 text-[10px]",children:"Resets n/a"})]})]}),c.jsxs("button",{onClick:()=>I(N),disabled:p||N.currentAmount<r,className:"w-full bg-emerald-900/30 hover:bg-emerald-600 text-emerald-500 hover:text-white border border-emerald-500/20 rounded-xl py-3 flex items-center justify-between px-4 transition-all disabled:opacity-50 disabled:cursor-not-allowed group-hover:bg-emerald-600 group-hover:text-white",children:[c.jsx("div",{className:"size-6 rounded-full bg-emerald-500/20 group-hover:bg-white/20 flex items-center justify-center",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"arrow_forward"})}),c.jsx("span",{className:"text-xs font-bold tracking-widest uppercase",children:N.currentAmount<r?"Insufficient Funds":`Cover $${r.toFixed(2)}`}),c.jsx("div",{className:"w-6"})," "]})]},N.id))})]}),l==="resolution"&&c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center animate-in zoom-in duration-300",children:[c.jsx("div",{className:"absolute top-4 left-4",children:c.jsx("span",{className:"text-gray-500 text-xs font-bold tracking-widest uppercase",children:"Resolution"})}),c.jsxs("div",{className:"relative mb-8",children:[c.jsx("div",{className:"absolute inset-0 bg-emerald-500/20 blur-xl rounded-full"}),c.jsx("div",{className:"size-24 bg-surface-dark border-4 border-emerald-500 rounded-full flex items-center justify-center relative z-10 shadow-2xl",children:c.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-5xl",children:"check"})})]}),c.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Fully Funded!"}),c.jsxs("p",{className:"text-gray-400 text-sm mb-12",children:[n.name," is ready for payment."]}),c.jsxs("div",{className:"w-full bg-surface-dark border border-white/5 rounded-2xl overflow-hidden mb-8",children:[c.jsxs("div",{className:"p-4 border-b border-white/5 flex items-center justify-between bg-white/2",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"size-8 rounded-full bg-emerald-500/10 flex items-center justify-center text-emerald-500",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"bolt"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"text-[10px] text-emerald-500 uppercase font-bold",children:"Target"}),c.jsx("p",{className:"text-white font-bold text-sm",children:n.name})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-emerald-500 font-bold text-lg",children:["$",r.toFixed(2)]}),c.jsxs("div",{className:"flex items-center gap-1 justify-end text-[10px] text-emerald-500",children:[c.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"check_circle"}),c.jsx("span",{children:"READY"})]})]})]}),c.jsxs("div",{className:"p-4 bg-white/2 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"size-8 rounded-full bg-amber-500/10 flex items-center justify-center text-amber-500",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"savings"})}),c.jsxs("div",{className:"text-left",children:[c.jsx("p",{className:"text-[10px] text-amber-500 uppercase font-bold",children:"Source"}),c.jsx("p",{className:"text-white font-bold text-sm",children:d==null?void 0:d.name})]})]}),c.jsx("div",{className:"text-right",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("span",{className:"text-gray-500 line-through text-xs",children:["$",d==null?void 0:d.currentAmount.toFixed(2)]}),c.jsx("span",{className:"material-symbols-outlined text-gray-500 text-xs",children:"arrow_forward"}),c.jsxs("span",{className:"text-white font-bold text-lg",children:["$",(((d==null?void 0:d.currentAmount)||0)-r).toFixed(2)]})]})})]})]}),c.jsxs("button",{onClick:T,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-4 rounded-2xl shadow-lg shadow-emerald-500/20 transition-all flex items-center justify-center gap-2",children:[c.jsx("span",{children:"Back to Dashboard"}),c.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})]})})},z2=({isOpen:t,onClose:e,onConfirm:n,incomeAmount:r})=>{const{sinkingFunds:s}=Pt(),{annualFunds:i,totalDrip:o,drips:l}=O.useMemo(()=>{const d=s.filter(g=>g.type==="annual");let f=0;const p=new Map;return d.forEach(g=>{if(g.targetAmount&&g.dueDate){const I=Math.max(1,eE(new Date(g.dueDate),new Date))*2,T=g.targetAmount/I;p.set(g.id,T),f+=T}}),{annualFunds:d,totalDrip:f,drips:p}},[s]),u=r-o;return t?c.jsxs("div",{className:"fixed inset-0 bg-black/95 flex flex-col z-50 animate-in slide-in-from-bottom duration-300",children:[c.jsxs("div",{className:"p-4 flex items-center justify-between",children:[c.jsx("button",{onClick:e,className:"p-2 text-gray-400",children:c.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),c.jsx("button",{className:"p-2 text-gray-400",children:c.jsx("span",{className:"material-symbols-outlined",children:"more_horiz"})})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("span",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"INFLOW"}),c.jsxs("h2",{className:"text-4xl font-display font-bold text-white my-2",children:["$",r.toLocaleString("en-US",{minimumFractionDigits:2})]}),c.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/5 border border-white/10 rounded-full px-3 py-1",children:[c.jsx("span",{className:"material-symbols-outlined text-gray-400 text-sm",children:"calendar_today"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Paycheck #2: Oct 15"})]})]}),c.jsxs("div",{className:"bg-emerald-500/10 border border-emerald-500/20 rounded-3xl p-6 mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("div",{className:"size-8 rounded-full bg-emerald-500/20 flex items-center justify-center text-emerald-400",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"})}),c.jsx("h3",{className:"font-bold text-white text-sm",children:"Reserved for Goals"}),c.jsx("span",{className:"ml-auto text-[10px] font-bold bg-emerald-500 text-black px-2 py-0.5 rounded uppercase",children:"Auto-Drip"})]}),c.jsx("div",{className:"space-y-3",children:i.length===0?c.jsx("p",{className:"text-center text-gray-500 text-xs py-2",children:"No annual bills configured."}):i.map(d=>c.jsxs("div",{className:"bg-surface-dark border border-white/5 rounded-xl p-3 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"size-10 rounded-lg bg-surface-highlight/50 flex items-center justify-center text-gray-300",children:c.jsx("span",{className:"material-symbols-outlined",children:d.icon||"verified_user"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-white text-sm",children:d.name}),c.jsxs("p",{className:"text-[10px] text-gray-500",children:["Annual  Due ",new Date(d.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("span",{className:"block font-bold text-white text-sm",children:["-$",(l.get(d.id)||0).toFixed(2)]}),c.jsxs("div",{className:"flex items-center justify-end gap-1 text-[10px] text-emerald-500",children:[c.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"check_circle"}),c.jsx("span",{children:"Allocated"})]})]})]},d.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t border-emerald-500/20 flex justify-between items-center",children:[c.jsx("span",{className:"text-emerald-500 text-xs font-bold",children:"Total Drip Allocation"}),c.jsxs("span",{className:"text-emerald-400 font-bold text-lg",children:["$",o.toFixed(2)]})]})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[c.jsx("h3",{className:"font-bold text-white text-lg",children:"Flexible Spending"}),c.jsxs("span",{className:"text-xs text-emerald-400 font-bold",children:["$",u.toFixed(2)," Planned"]})]}),c.jsxs("div",{className:"space-y-3 opacity-60 pointer-events-none grayscale",children:[c.jsxs("div",{className:"bg-surface-dark rounded-xl p-4 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"shopping_cart"}),c.jsx("span",{className:"font-bold text-white",children:"Groceries"})]}),c.jsx("span",{className:"font-bold text-white",children:"$400"})]}),c.jsxs("div",{className:"bg-surface-dark rounded-xl p-4 flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"restaurant"}),c.jsx("span",{className:"font-bold text-white",children:"Dining Out"})]}),c.jsx("span",{className:"font-bold text-white",children:"$150"})]})]}),c.jsx("div",{className:"mt-4 border-2 border-dashed border-white/10 rounded-xl p-4 text-center text-gray-500 text-xs",children:"+ Add Category (Locked for Auto-Drip View)"})]})]}),c.jsxs("div",{className:"p-4 bg-surface-dark border-t border-white/10",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4 px-1",children:[c.jsx("span",{className:"text-gray-400 text-xs",children:"Remaining to Assign"}),c.jsxs("span",{className:"text-emerald-400 font-bold text-lg",children:["$",u.toFixed(2)]})]}),c.jsxs("button",{onClick:n,className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white font-bold py-4 rounded-xl shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2 transition-all active:scale-95",children:[c.jsx("span",{children:"Confirm Allocation"}),c.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})]}):null},$2=()=>{const{settings:t,bills:e,pendingAllocation:n}=Pt(),{paycheckAmount:r,setPaycheckAmount:s,runAllocation:i,confirmAllocation:o,isConfirming:l}=F2(),[u,d]=O.useState(!1),[f,p]=O.useState(!1),[g,_]=O.useState(null),[I,T]=O.useState(0),N=x=>{const S=(n==null?void 0:n.allocations[x.id])||0,P=parseFloat(x.amount)-S;P>0&&(_(x),T(P),p(!0))},E=t.nextPayDate?new Date(t.nextPayDate):rE(new Date,t.payFrequency),w=new Date,k=e.filter(x=>sE(x,w,E)),j=e.filter(x=>!k.includes(x)),V=n?Object.values(n.allocations).reduce((x,S)=>x+S,0)+n.emergencyFundAllocation+Object.values(n.sinkingFundsAllocation).reduce((x,S)=>x+S,0):0,U=n?n.totalIncome-V:0,[b,v]=O.useState(!1);return c.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen flex justify-center w-full font-sans transition-colors duration-300",children:[c.jsxs("div",{className:"flex flex-col gap-6 w-full max-w-md mx-auto relative",children:[c.jsxs("header",{className:"flex items-center justify-between px-6 py-5 z-20 bg-background-light/90 dark:bg-background-dark/90 backdrop-blur-md sticky top-0",children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("div",{className:"flex items-center justify-center size-10 rounded-full bg-surface-dark border border-white/5",children:c.jsx("span",{className:"material-symbols-outlined text-white text-[20px]",children:"menu"})})}),c.jsx("h1",{className:"text-white text-lg font-extrabold tracking-tight",children:"Magic Dashboard"}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("div",{onClick:()=>d(!0),className:"relative flex items-center justify-center size-10 rounded-full bg-surface-dark border border-white/5 hover:bg-white/10 transition-colors cursor-pointer",children:c.jsx("span",{className:"material-symbols-outlined text-white text-[20px]",children:"add_card"})})})]}),c.jsxs("main",{className:"flex-1 flex flex-col px-4 pb-24 overflow-y-auto space-y-6",children:[c.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-[#1d2f29] to-[#131f1b] p-6 shadow-lg border border-white/5 group",children:[c.jsx("div",{className:"absolute inset-0 opacity-20 pointer-events-none mix-blend-overlay bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] bg-repeat"}),c.jsxs("div",{className:"relative z-10 flex flex-col gap-1",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-primary font-bold text-sm tracking-wider uppercase mb-1",children:"Current Paycheck"}),c.jsxs("h2",{className:"text-white text-3xl font-bold font-display tracking-tight",children:["$",U.toFixed(2)]}),c.jsx("p",{className:"text-gray-400 text-sm font-medium mt-1",children:"Left to Budget"})]}),c.jsx("div",{className:"bg-white/5 backdrop-blur-sm px-3 py-1 rounded-lg border border-white/5",children:c.jsxs("p",{className:"text-white text-xs font-semibold",children:[w.toLocaleDateString(void 0,{month:"short",day:"numeric"})," - ",E.toLocaleDateString(void 0,{month:"short",day:"numeric"})]})})]}),c.jsxs("div",{className:"mt-6 pt-4 border-t border-white/10 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:`material-symbols-outlined text-lg ${n?"text-primary":"text-gray-500"}`,children:n?"check_circle":"pending"}),c.jsx("span",{className:"text-gray-300 text-sm",children:n?"Review Allocation":"No Allocation Run"})]}),n&&c.jsxs("button",{onClick:()=>v(!0),disabled:l,className:"bg-primary hover:bg-primary/90 text-white text-sm font-bold py-2 px-4 rounded-lg shadow-lg flex items-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[l?c.jsx("span",{className:"material-symbols-outlined animate-spin text-[18px]",children:"sync"}):c.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"save"}),l?"Saving...":"Confirm & Log"]})]})]})]}),k.length>0&&c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-white/60 text-xs font-bold uppercase tracking-widest px-1",children:"Attention Needed"}),k.map(x=>{var S;return c.jsx("div",{onClick:()=>N(x),className:"relative flex flex-col gap-4 rounded-xl bg-surface-dark p-4 shadow-glow-danger border border-danger/30 cursor-pointer hover:bg-surface-dark/80 transition-colors",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex items-center justify-center rounded-xl bg-danger/10 shrink-0 size-12 border border-danger/20 text-danger",children:c.jsx("span",{className:"material-symbols-outlined",children:"warning"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-white text-base font-bold leading-tight",children:x.name}),c.jsxs("p",{className:"text-danger text-sm font-medium mt-0.5",children:["Due Day: ",x.dueDay]})]})]}),c.jsxs("div",{className:"flex flex-col items-end",children:[c.jsxs("span",{className:"text-white font-mono font-bold",children:["$",x.amount]}),c.jsxs("span",{className:"text-white/40 text-xs",children:["Allocated: $",((S=n==null?void 0:n.allocations[x.id])==null?void 0:S.toFixed(2))||"0.00"]})]})]})},x.id)})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-white/60 text-xs font-bold uppercase tracking-widest px-1",children:"Funding Priorities"}),j.map(x=>{var S;return c.jsxs("div",{className:"group flex flex-col gap-3 rounded-xl bg-surface-dark p-4 shadow-lg border border-white/5 hover:border-primary/30 transition-colors",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex items-center justify-center rounded-xl bg-primary/10 shrink-0 size-12 text-primary group-hover:scale-105 transition-transform",children:c.jsx("span",{className:"material-symbols-outlined",children:"receipt_long"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-white text-base font-bold",children:x.name}),c.jsxs("p",{className:"text-gray-400 text-xs mt-0.5",children:["Due Day: ",x.dueDay]})]})]}),c.jsxs("div",{className:"text-right",children:[c.jsxs("p",{className:"text-white font-mono font-bold text-lg",children:["$",((S=n==null?void 0:n.allocations[x.id])==null?void 0:S.toFixed(2))||"0"]}),c.jsxs("p",{className:"text-white/40 text-xs font-medium",children:["of $",x.amount]})]})]}),c.jsx("div",{className:"relative h-3 w-full rounded-full bg-black/40 overflow-hidden",children:c.jsx("div",{className:"absolute top-0 left-0 h-full bg-primary rounded-full shadow-glow-primary transition-all duration-500",style:{width:n?`${n.allocations[x.id]/parseFloat(x.amount)*100}%`:"0%"}})})]},x.id)})]}),c.jsxs("div",{className:"space-y-3 pt-2",children:[c.jsx("h3",{className:"text-muted-text text-xs font-bold uppercase tracking-widest px-1",children:"Covered & Completed"}),c.jsx("div",{className:"flex items-center justify-between rounded-xl bg-surface-dark/40 p-4 border border-white/5 opacity-70 grayscale-[0.5]",children:c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"flex items-center justify-center rounded-xl bg-surface-highlight/50 shrink-0 size-10 text-muted-text",children:c.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"check_circle"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"text-muted-text text-base font-bold line-through decoration-white/20",children:"All Caught Up"}),c.jsx("p",{className:"text-muted-text text-xs font-medium",children:"No paid bills yet"})]})]})})]}),c.jsx("div",{className:"h-8"})]}),c.jsx("div",{className:"fixed bottom-28 right-6 z-30",children:c.jsx("button",{onClick:()=>d(!0),className:"flex items-center justify-center size-14 rounded-2xl bg-primary text-white shadow-lg shadow-primary/30 hover:scale-105 active:scale-95 transition-transform",children:c.jsx("span",{className:"material-symbols-outlined text-[28px]",children:"add"})})})]}),u&&c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-surface-dark border border-white/10 rounded-2xl shadow-2xl max-w-sm w-full p-6 text-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 font-display",children:"It's Payday! "}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Paycheck Amount"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),c.jsx("input",{type:"number",value:r,onChange:x=>s(x.target.value),className:"block w-full pl-7 pr-3 py-3 bg-black/20 border border-white/10 rounded-xl focus:ring-primary focus:border-primary text-white",placeholder:"0.00",autoFocus:!0})]})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{onClick:()=>d(!1),className:"flex-1 py-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl font-medium transition-colors",children:"Cancel"}),c.jsx("button",{onClick:()=>{i(),d(!1)},className:"flex-1 py-3 bg-primary text-white rounded-xl font-bold shadow-glow-primary hover:bg-primary/90 transition-colors",children:"Calculate"})]})]})}),c.jsx(B2,{isOpen:f,onClose:()=>p(!1),targetBill:g,shortageAmount:I,onSuccess:()=>{}}),c.jsx(z2,{isOpen:b,onClose:()=>v(!1),onConfirm:()=>{o(),v(!1)},incomeAmount:n?n.totalIncome:0})]})},W2=()=>{const{user:t}=xr(),{settings:e,setSettings:n}=Pt(),[r,s]=O.useState(!1),[i,o]=O.useState(""),[l,u]=O.useState({payFrequency:e.payFrequency,nextPayDate:e.nextPayDate?lv(new Date(e.nextPayDate),"yyyy-MM-dd"):"",starterEFGoal:e.starterEFGoal});O.useEffect(()=>{(async()=>{if(t){const p=qe(ge,"users",t.uid,"settings","general"),g=await VC(p);if(g.exists()){const _=g.data();n({payFrequency:_.payFrequency,nextPayDate:_.nextPayDate?_.nextPayDate.toDate():null,starterEFGoal:_.starterEFGoal,currentEF:_.currentEF||0}),u({payFrequency:_.payFrequency,nextPayDate:_.nextPayDate?lv(_.nextPayDate.toDate(),"yyyy-MM-dd"):"",starterEFGoal:_.starterEFGoal})}}})()},[t,n]);const d=async()=>{if(t){s(!0),o("");try{const f=l.nextPayDate?new Date(l.nextPayDate):null;f&&f.setHours(12,0,0,0);const p={payFrequency:l.payFrequency,nextPayDate:f,starterEFGoal:Number(l.starterEFGoal)};await FC(qe(ge,"users",t.uid,"settings","general"),{...p,currentEF:e.currentEF},{merge:!0}),n(p),o("Settings saved successfully!")}catch(f){console.error(f),o("Error saving settings.")}finally{s(!1)}}};return c.jsxs("div",{className:"p-6 space-y-6 pb-24",children:[c.jsx("h1",{className:"text-2xl font-bold text-white",children:"Settings"}),c.jsxs("div",{className:"bg-surface-dark rounded-2xl p-6 border border-white/5 space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Paycheck Configuration"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm text-gray-400",children:"Pay Frequency"}),c.jsxs("select",{value:l.payFrequency,onChange:f=>u({...l,payFrequency:f.target.value}),className:"w-full bg-background-dark border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-primary",children:[c.jsx("option",{value:"weekly",children:"Weekly"}),c.jsx("option",{value:"bi-weekly",children:"Bi-Weekly"}),c.jsx("option",{value:"semi-monthly",children:"Semi-Monthly (1st & 15th)"}),c.jsx("option",{value:"monthly",children:"Monthly"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm text-gray-400",children:"Next Pay Date"}),c.jsx("input",{type:"date",value:l.nextPayDate,onChange:f=>u({...l,nextPayDate:f.target.value}),className:"w-full bg-background-dark border border-white/10 rounded-xl p-3 text-white focus:outline-none focus:border-primary"})]})]}),c.jsxs("div",{className:"bg-surface-dark rounded-2xl p-6 border border-white/5 space-y-4",children:[c.jsx("h2",{className:"text-lg font-semibold text-primary",children:"Goals"}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block text-sm text-gray-400",children:"Starter Emergency Fund Goal"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-3 top-3 text-gray-500",children:"$"}),c.jsx("input",{type:"number",value:l.starterEFGoal,onChange:f=>u({...l,starterEFGoal:Number(f.target.value)}),className:"w-full bg-background-dark border border-white/10 rounded-xl p-3 pl-8 text-white focus:outline-none focus:border-primary"})]})]})]}),c.jsx("button",{onClick:d,disabled:r,className:"w-full bg-primary text-white font-bold py-4 rounded-xl shadow-lg shadow-primary/30 active:scale-95 transition-all disabled:opacity-50",children:r?"Saving...":"Save Settings"}),i&&c.jsx("p",{className:`text-center ${i.includes("Error")?"text-red-500":"text-green-500"}`,children:i}),t&&c.jsxs("div",{className:"text-center text-sm text-gray-500 mt-4",children:["Logged in as: ",t.email]})]})},ym=()=>{const{user:t}=xr(),{setBills:e,setSinkingFunds:n}=Pt(),[r,s]=O.useState(!0);return O.useEffect(()=>{if(!t){e([]),n([]),s(!1);return}const f=Ot(ge,"users",t.uid,"bills"),p=Ot(ge,"users",t.uid,"sinkingFunds"),g=Jy(f,I=>{const T=I.docs.map(N=>({id:N.id,...N.data()}));e(T)}),_=Jy(p,I=>{const T=I.docs.map(N=>({id:N.id,...N.data()}));n(T),s(!1)});return()=>{g(),_()}},[t,e,n]),{loading:r,addNewBill:async f=>{t&&await Xy(Ot(ge,"users",t.uid,"bills"),f)},deleteBill:async f=>{t&&await Yy(qe(ge,"users",t.uid,"bills",f))},addNewFund:async f=>{t&&await Xy(Ot(ge,"users",t.uid,"sinkingFunds"),f)},deleteFund:async f=>{t&&await Yy(qe(ge,"users",t.uid,"sinkingFunds",f))},updateFundBalance:async(f,p)=>{t&&await UC(qe(ge,"users",t.uid,"sinkingFunds",f),{currentAmount:p})}}},q2=({isOpen:t,onClose:e})=>{const{addNewBill:n}=ym(),[r,s]=O.useState(""),[i,o]=O.useState(""),[l,u]=O.useState(""),[d,f]=O.useState(!1);if(!t)return null;const p=async g=>{g.preventDefault(),f(!0);try{await n({name:r,amount:i,dueDay:l}),e(),s(""),o(""),u("")}catch(_){console.error(_)}finally{f(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-surface-dark border border-white/10 rounded-2xl shadow-2xl max-w-sm w-full p-6 text-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 font-display",children:"Add Monthly Bill"}),c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Bill Name"}),c.jsx("input",{type:"text",required:!0,value:r,onChange:g=>s(g.target.value),className:"block w-full px-4 py-3 bg-black/20 border border-white/10 rounded-xl focus:ring-primary focus:border-primary text-white placeholder-gray-600",placeholder:"e.g. Rent"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Amount"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),c.jsx("input",{type:"number",required:!0,value:i,onChange:g=>o(g.target.value),className:"block w-full pl-7 pr-3 py-3 bg-black/20 border border-white/10 rounded-xl focus:ring-primary focus:border-primary text-white placeholder-gray-600",placeholder:"0.00"})]})]}),c.jsxs("div",{className:"w-1/3",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Due Day"}),c.jsx("input",{type:"number",required:!0,min:"1",max:"31",value:l,onChange:g=>u(g.target.value),className:"block w-full px-4 py-3 bg-black/20 border border-white/10 rounded-xl focus:ring-primary focus:border-primary text-white placeholder-gray-600",placeholder:"DD"})]})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl font-medium transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:d,className:"flex-1 py-3 bg-primary text-white rounded-xl font-bold shadow-glow-primary hover:bg-primary/90 transition-colors disabled:opacity-50",children:d?"Adding...":"Add Bill"})]})]})]})})},iE=({isOpen:t,onClose:e})=>{const{addNewFund:n}=ym(),[r,s]=O.useState(""),[i,o]=O.useState(""),[l,u]=O.useState("5"),[d,f]=O.useState(!1);if(!t)return null;const p=async g=>{g.preventDefault(),f(!0);try{await n({name:r,targetAmount:parseFloat(i),currentAmount:0,priority:parseInt(l)}),e(),s(""),o(""),u("5")}catch(_){console.error(_)}finally{f(!1)}};return c.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:c.jsxs("div",{className:"bg-surface-dark border border-white/10 rounded-2xl shadow-2xl max-w-sm w-full p-6 text-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 font-display",children:"Add Cash Account"}),c.jsxs("form",{onSubmit:p,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Account Name"}),c.jsx("input",{type:"text",required:!0,value:r,onChange:g=>s(g.target.value),className:"block w-full px-4 py-3 bg-black/20 border border-white/10 rounded-xl focus:ring-primary focus:border-primary text-white placeholder-gray-600",placeholder:"e.g. Groceries"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Monthly Target"}),c.jsxs("div",{className:"relative",children:[c.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),c.jsx("input",{type:"number",required:!0,value:i,onChange:g=>o(g.target.value),className:"block w-full pl-7 pr-3 py-3 bg-black/20 border border-white/10 rounded-xl focus:ring-primary focus:border-primary text-white placeholder-gray-600",placeholder:"0.00"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Priority (1-10)"}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("input",{type:"range",min:"1",max:"10",value:l,onChange:g=>u(g.target.value),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary"}),c.jsx("span",{className:"text-xl font-bold text-primary w-8 text-center",children:l})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Higher priority gets funded first."})]}),c.jsxs("div",{className:"flex gap-3 pt-2",children:[c.jsx("button",{type:"button",onClick:e,className:"flex-1 py-3 text-gray-400 hover:text-white hover:bg-white/5 rounded-xl font-medium transition-colors",children:"Cancel"}),c.jsx("button",{type:"submit",disabled:d,className:"flex-1 py-3 bg-primary text-white rounded-xl font-bold shadow-glow-primary hover:bg-primary/90 transition-colors disabled:opacity-50",children:d?"Adding...":"Add Account"})]})]})]})})},H2=()=>{const{bills:t,sinkingFunds:e}=Pt(),{deleteBill:n,deleteFund:r,loading:s}=ym(),[i,o]=O.useState(!1),[l,u]=O.useState(!1),[d,f]=O.useState(5e3),p=t.reduce((T,N)=>T+parseFloat(N.amount),0),g=e.reduce((T,N)=>T+N.targetAmount,0),_=p+g,I=d-_;return s?c.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading budget data..."}):c.jsxs("div",{className:"min-h-screen bg-background-dark pb-32 font-sans text-white",children:[c.jsxs("div",{className:"flex items-center justify-between p-4 mb-4",children:[c.jsx("button",{className:"p-2 rounded-full bg-surface-dark border border-white/5 text-gray-400 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),c.jsx("h1",{className:"text-lg font-bold",children:"Master Budget Setup"}),c.jsx("button",{className:"p-2 rounded-full bg-surface-dark border border-white/5 text-gray-400 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]}),c.jsxs("div",{className:"mx-4 mb-8 bg-surface-dark border border-white/5 rounded-2xl p-6 shadow-2xl",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center divide-x divide-white/10",children:[c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1",children:"Est. Income"}),c.jsxs("div",{className:"text-white font-bold flex items-center gap-1",children:[c.jsx("span",{className:"text-sm",children:"$"}),c.jsx("input",{type:"number",value:d,onChange:T=>f(Number(T.target.value)),className:"bg-transparent w-16 text-center outline-none border-b border-dashed border-white/20 focus:border-white"})]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-[10px] uppercase font-bold text-gray-500 mb-1",children:"Budgeted"}),c.jsxs("div",{className:"text-white font-bold text-sm pt-1",children:["$",_.toLocaleString()]})]}),c.jsxs("div",{children:[c.jsx("span",{className:`text-[10px] uppercase font-bold mb-1 ${I<0?"text-red-500":I===0?"text-emerald-500":"text-emerald-400"}`,children:"Remaining"}),c.jsxs("div",{className:`font-bold text-sm pt-1 ${I<0?"text-red-500":I===0?"text-emerald-500":"text-emerald-400"}`,children:["$",I.toLocaleString()]})]})]}),c.jsx("div",{className:"mt-4 h-1.5 w-full bg-black/40 rounded-full overflow-hidden flex",children:c.jsx("div",{className:`h-full transition-all duration-500 ${I<0?"bg-red-500":"bg-emerald-500"}`,style:{width:`${Math.min(_/d*100,100)}%`}})})]}),c.jsxs("section",{className:"px-4 mb-8",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Must-Pay Bills"}),c.jsxs("span",{className:"text-xs bg-white/5 px-2 py-1 rounded text-gray-400",children:[t.length," Items"]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>o(!0),className:"w-full py-3 border border-dashed border-white/10 rounded-xl text-gray-500 text-sm hover:text-white hover:bg-white/5 transition-colors flex items-center justify-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Add Bill"]}),t.map(T=>c.jsxs("div",{className:"bg-surface-dark p-4 rounded-xl border border-white/5 flex justify-between items-center shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center ${T.name.includes("Rent")?"bg-blue-500/10 text-blue-400":T.name.includes("Elect")?"bg-amber-500/10 text-amber-400":"bg-purple-500/10 text-purple-400"}`,children:c.jsx("span",{className:"material-symbols-outlined text-[20px]",children:T.name.includes("Rent")?"home":T.name.includes("Elect")?"bolt":"receipt_long"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-white font-bold",children:T.name}),T.name.includes("Electric")&&c.jsx("span",{className:"text-[10px] font-bold bg-emerald-500/10 text-emerald-500 px-1.5 py-0.5 rounded",children:"Adj. +$20"})]}),c.jsxs("p",{className:"text-xs text-gray-500",children:["Due ",G2(T.dueDay),"  Was $",parseFloat(T.amount)-20]})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white/5 border border-white/5 rounded-lg px-3 py-2 min-w-[80px] text-right",children:c.jsxs("span",{className:"text-white font-mono font-bold",children:["$",parseFloat(T.amount).toFixed(2)]})}),c.jsx("button",{onClick:()=>n(T.id),className:"size-8 flex items-center justify-center text-gray-600 hover:text-red-400 transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]})]},T.id))]})]}),c.jsxs("section",{className:"px-4",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Lifestyle & Cash Accounts"}),c.jsx("span",{className:"text-xs bg-white/5 px-2 py-1 rounded text-gray-400",children:"Sinking Funds"})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>u(!0),className:"w-full py-3 border border-dashed border-white/10 rounded-xl text-gray-500 text-sm hover:text-white hover:bg-white/5 transition-colors flex items-center justify-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-sm",children:"add"}),"Add Account"]}),e.map(T=>c.jsxs("div",{className:"bg-surface-dark p-4 rounded-xl border border-white/5 flex justify-between items-center shadow-sm",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center ${T.name.includes("Cloth")?"bg-pink-500/10 text-pink-400":T.name.includes("Hair")?"bg-purple-500/10 text-purple-400":T.name.includes("Groc")?"bg-emerald-500/10 text-emerald-400":"bg-amber-500/10 text-amber-400"}`,children:c.jsx("span",{className:"material-symbols-outlined text-[20px]",children:T.name.includes("Cloth")?"checkroom":T.name.includes("Hair")?"content_cut":T.name.includes("Groc")?"shopping_basket":"restaurant"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-bold",children:T.name}),c.jsxs("p",{className:"text-xs text-emerald-400",children:["Current Balance: $",T.currentAmount.toFixed(2)]})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"bg-white/5 border border-white/5 rounded-lg px-3 py-2 min-w-[80px] text-right",children:c.jsxs("span",{className:"text-white font-mono font-bold",children:["$",T.targetAmount.toFixed(2)]})}),c.jsx("button",{onClick:()=>r(T.id),className:"size-8 flex items-center justify-center text-gray-600 hover:text-red-400 transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-sm",children:"close"})})]})]},T.id))]})]}),c.jsxs("div",{className:"fixed bottom-[80px] left-0 right-0 p-4 bg-gradient-to-t from-background-dark via-background-dark to-transparent z-40",children:[c.jsxs("button",{className:"w-full bg-surface-highlight hover:bg-surface-highlight/80 text-white font-bold py-4 rounded-xl shadow-lg border border-white/10 flex items-center justify-center gap-2 transition-all active:scale-95",children:[c.jsx("span",{className:"material-symbols-outlined flex items-center justify-center bg-white text-black rounded-full size-5 text-sm font-bold",children:"check"}),c.jsx("span",{children:"Finalize Budget"})]}),c.jsx("p",{className:"text-center text-gray-500 text-[10px] mt-2",children:"Review all auto-adjusted amounts before finalizing."})]}),c.jsx(q2,{isOpen:i,onClose:()=>o(!1)}),c.jsx(iE,{isOpen:l,onClose:()=>u(!1)})]})},G2=t=>{const e=parseInt(t),n=e%10,r=e%100;return n===1&&r!==11?t+"st":n===2&&r!==12?t+"nd":n===3&&r!==13?t+"rd":t+"th"},gh=({percentage:t,color:e="#10B981",size:n=80,strokeWidth:r=8,icon:s})=>{const i=Math.min(Math.max(t,0),100),o=(n-r)/2,l=o*2*Math.PI,u=l-i/100*l;return c.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[c.jsxs("svg",{width:n,height:n,className:"transform -rotate-90",children:[c.jsx("circle",{cx:n/2,cy:n/2,r:o,fill:"transparent",stroke:e,strokeWidth:r,strokeOpacity:.2}),c.jsx("circle",{cx:n/2,cy:n/2,r:o,fill:"transparent",stroke:e,strokeWidth:r,strokeDasharray:l,strokeDashoffset:u,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white",children:[s?c.jsx("span",{className:"material-symbols-outlined text-[24px]",style:{color:e},children:s}):c.jsxs("span",{className:"text-xs font-bold",children:[Math.round(i),"%"]}),s&&c.jsxs("span",{className:"text-[10px] font-bold mt-[-2px]",children:[Math.round(i),"%"]})]})]})},K2=({isOpen:t,onClose:e})=>{const{addSinkingFund:n}=Pt(),[r,s]=O.useState(""),[i,o]=O.useState(""),[l,u]=O.useState(""),[d,f]=O.useState(0),[p,g]=O.useState(0);O.useEffect(()=>{if(!i||!l){f(0);return}const I=parseFloat(i),T=new Date,N=new Date(l),E=eE(N,T),w=Math.max(1,E);g(w);const k=w*2,j=I/k;f(j)},[i,l]);const _=()=>{!r||!i||!l||(n({id:crypto.randomUUID(),name:r,targetAmount:parseFloat(i),currentAmount:0,priority:10,type:"annual",dueDate:new Date(l).toISOString(),icon:"calendar_clock"}),s(""),o(""),u(""),e())};return t?c.jsx("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4 animate-in fade-in duration-200",children:c.jsxs("div",{className:"bg-surface-dark w-full max-w-md rounded-3xl overflow-hidden border border-white/10 shadow-2xl relative",children:[c.jsx("div",{className:"p-6 pb-2",children:c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-white",children:"Add Annual Bill"}),c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:c.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})}),c.jsxs("div",{className:"p-6 space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"What is this for?"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",value:r,onChange:I=>s(I.target.value),placeholder:"e.g. Car Insurance",className:"w-full bg-white/5 border border-white/10 rounded-xl p-4 text-white text-lg focus:outline-none focus:border-emerald-500 transition-colors"}),c.jsx("span",{className:"material-symbols-outlined absolute right-4 top-1/2 -translate-y-1/2 text-gray-500",children:"edit"})]})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Target Amount"}),c.jsxs("div",{className:"flex items-center justify-center gap-1",children:[c.jsx("span",{className:"text-2xl text-gray-500 font-bold",children:"$"}),c.jsx("input",{type:"number",value:i,onChange:I=>o(I.target.value),placeholder:"1,200",className:"bg-transparent text-5xl font-bold text-white w-48 text-center outline-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2",children:"Due Date"}),c.jsx("input",{type:"date",value:l,onChange:I=>u(I.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl p-4 text-white text-lg focus:outline-none focus:border-emerald-500 transition-colors cal-icon-white"})]}),c.jsxs("div",{className:"bg-white/5 border border-white/5 rounded-2xl p-4 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 bg-emerald-500/20 text-emerald-400 text-[10px] font-bold px-2 py-1 rounded-bl-xl",children:"FUNDING PLAN"}),c.jsxs("div",{className:"grid grid-cols-2 gap-8 text-center mt-2",children:[c.jsxs("div",{children:[c.jsx("span",{className:"block text-xs text-gray-500 mb-1",children:"Monthly"}),c.jsxs("span",{className:"text-xl font-bold text-white",children:["$",(d*2).toFixed(2)]}),c.jsxs("span",{className:"block text-[10px] text-gray-600 mt-1",children:[p," contributions"]})]}),c.jsxs("div",{children:[c.jsx("span",{className:"block text-xs text-gray-500 mb-1",children:"Per Paycheck"}),c.jsxs("span",{className:"text-xl font-bold text-emerald-400",children:["$",d.toFixed(2)]}),c.jsx("span",{className:"block text-[10px] text-gray-600 mt-1",children:"Bi-weekly"})]})]})]}),c.jsxs("button",{onClick:_,disabled:!r||!i||!l,className:"w-full bg-emerald-500 disabled:bg-gray-700 disabled:text-gray-500 hover:bg-emerald-400 text-white font-bold py-4 rounded-xl shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2 transition-all active:scale-95",children:[c.jsx("span",{children:"Set Goal"}),c.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})]})}):null},Q2=({isOpen:t,onClose:e,onUnlock:n})=>{const[r,s]=O.useState(""),[i,o]=O.useState(!1),l=()=>{r==="EMERGENCY"?(n(),s(""),o(!1),e()):(o(!0),s(""))};return t?c.jsx("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center z-[60] p-4 animate-in fade-in duration-300",children:c.jsxs("div",{className:"bg-surface-dark border border-red-500/30 rounded-3xl max-w-sm w-full p-8 text-center relative overflow-hidden shadow-[0_0_50px_rgba(239,68,68,0.2)]",children:[c.jsx("div",{className:"mx-auto size-20 rounded-2xl bg-red-500/10 border border-red-500/20 flex items-center justify-center mb-6 shadow-glow-danger",children:c.jsx("span",{className:"material-symbols-outlined text-red-500 text-4xl",children:"warning"})}),c.jsxs("h2",{className:"text-2xl font-display font-bold text-white mb-2",children:["IS THIS A TRUE ",c.jsx("span",{className:"text-red-500",children:"EMERGENCY?"})]}),c.jsxs("div",{className:"my-6 bg-red-500/5 border border-red-500/10 rounded-xl p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-[10px] font-bold text-red-500 uppercase tracking-widest",children:"Untouchable Protocol"}),c.jsx("div",{className:"w-8 h-4 bg-red-500/20 rounded-full relative",children:c.jsx("div",{className:"absolute right-0.5 top-0.5 size-3 bg-red-500 rounded-full shadow-sm"})})]}),c.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["You are attempting to access your ",c.jsx("strong",{className:"text-white",children:"Fortress Funds"}),". This action breaks your savings streak immediately."]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("p",{className:"text-[10px] uppercase font-bold text-red-500 tracking-widest animate-pulse",children:"Confirmation Required  Awaiting Input"}),c.jsx("input",{type:"text",value:r,onChange:u=>{s(u.target.value.toUpperCase()),o(!1)},placeholder:"TYPE 'EMERGENCY'",className:`w-full bg-black/40 border-2 ${i?"border-red-500 animate-shake":"border-white/10 focus:border-red-500"} rounded-xl py-4 text-center font-mono text-xl tracking-[0.2em] text-white placeholder-white/20 outline-none transition-all`}),c.jsxs("button",{onClick:l,disabled:r!=="EMERGENCY",className:"w-full bg-red-600 hover:bg-red-500 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold py-4 rounded-xl shadow-lg shadow-red-600/20 flex items-center justify-center gap-2 transition-all active:scale-95",children:[c.jsx("span",{className:"material-symbols-outlined",children:"lock_open"}),c.jsx("span",{children:"UNLOCK FUNDS"})]}),c.jsx("button",{onClick:e,className:"text-xs text-gray-500 hover:text-white transition-colors uppercase tracking-widest font-bold",children:"Cancel - Keep Funds Safe"})]})]})}):null},Y2=({isOpen:t,onClose:e,amount:n})=>t?c.jsxs("div",{className:"fixed inset-0 bg-black/95 flex items-center justify-center z-[70] animate-in zoom-in-90 duration-500 overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 pointer-events-none",children:[...Array(20)].map((r,s)=>c.jsx("div",{className:"absolute w-2 h-2 bg-emerald-400 rounded-sm animate-confetti",style:{left:`${Math.random()*100}%`,top:"-10%",animationDelay:`${Math.random()*2}s`,animationDuration:`${3+Math.random()*2}s`,backgroundColor:["#10B981","#34D399","#FBBF24","#ffffff"][Math.floor(Math.random()*4)]}},s))}),c.jsxs("div",{className:"text-center relative z-10 p-6 max-w-md w-full",children:[c.jsxs("div",{className:"mx-auto size-40 relative mb-8 animate-bounce-slow",children:[c.jsx("div",{className:"absolute inset-0 bg-amber-500/20 rounded-full blur-2xl animate-pulse"}),c.jsxs("div",{className:"relative bg-gradient-to-br from-amber-400 to-amber-600 rounded-full size-full border-4 border-amber-300 shadow-2xl flex items-center justify-center",children:[c.jsx("span",{className:"material-symbols-outlined text-6xl text-white drop-shadow-md",children:"shield_lock"}),c.jsx("div",{className:"absolute top-0 left-0 w-full h-full rounded-full bg-gradient-to-tr from-white/20 to-transparent pointer-events-none"})]}),c.jsx("div",{className:"absolute -top-2 -right-2 text-yellow-300 text-4xl animate-spin-slow",children:""}),c.jsx("div",{className:"absolute bottom-4 -left-4 text-yellow-300 text-2xl animate-ping-slow",children:""})]}),c.jsx("h2",{className:"text-4xl font-display font-bold text-white mb-2 tracking-tight",children:"Milestone 1 Reached!"}),c.jsxs("p",{className:"text-gray-300 text-lg mb-8 leading-relaxed",children:["You have a ",c.jsxs("span",{className:"text-emerald-400 font-bold",children:["$",n.toLocaleString()]})," safety net.",c.jsx("br",{}),"That's real peace of mind."]}),c.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4 mb-8 inline-flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-green-400",children:"history"}),c.jsx("span",{className:"text-sm font-bold text-gray-300",children:"BUILT IN 5 PAYCHECKS"})]}),c.jsxs("button",{onClick:e,className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white font-bold py-4 rounded-xl shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2 transition-transform active:scale-95",children:[c.jsx("span",{className:"material-symbols-outlined",children:"lock"}),c.jsx("span",{children:"SECURE THE FORTRESS"})]}),c.jsx("p",{className:"text-xs text-gray-500 mt-4 uppercase tracking-widest cursor-pointer hover:text-white",onClick:e,children:"Tap to claim your achievement"})]}),c.jsx("style",{children:`
                @keyframes confetti {
                    0% { transform: translateY(0) rotate(0deg); opacity: 1; }
                    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
                }
                .animate-confetti {
                    animation-name: confetti;
                    animation-timing-function: linear;
                    animation-iteration-count: infinite;
                }
                .animate-bounce-slow {
                    animation: bounce 3s infinite;
                }
                @keyframes bounce {
                    0%, 100% { transform: translateY(-5%); }
                    50% { transform: translateY(5%); }
                }
            `})]}):null,X2=({isOpen:t,onClose:e})=>{const{settings:n,setSettings:r}=Pt(),[s,i]=O.useState(n.emergencyFundLocked??!0),[o,l]=O.useState(!1),[u,d]=O.useState(!1);O.useEffect(()=>{r({emergencyFundLocked:s})},[s,r]);const f=Math.min(n.currentEF/n.starterEFGoal*100,100),p=()=>{s?l(!0):i(!0)},g=()=>{i(!1)};return t?c.jsxs("div",{className:"fixed inset-0 bg-[#0a0f1c] z-50 flex flex-col font-sans animate-in slide-in-from-bottom duration-300",children:[c.jsxs("div",{className:"p-6 flex justify-between items-start",children:[c.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-white",children:c.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-[10px] items-center justify-center font-bold tracking-[0.2em] text-gray-500 uppercase flex gap-1 mb-1",children:"Priority Zero"}),c.jsx("h1",{className:"text-xl font-bold text-white",children:"Emergency Fund"}),c.jsx("p",{className:"text-emerald-400 text-xs font-medium shadow-glow-emerald",children:"Fortress"})]}),c.jsx("button",{onClick:e,className:"p-2 text-gray-400 text-xs font-bold hover:text-white",children:"CLOSE"})]}),c.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative",children:[c.jsxs("div",{className:"size-72 rounded-full border border-white/5 flex items-center justify-center relative shadow-2xl",children:[c.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-white/5"}),c.jsx("div",{className:"size-64 rounded-full bg-gradient-to-t from-emerald-600 to-emerald-400 relative overflow-hidden transition-all duration-1000 flex items-center justify-center shadow-[0_0_80px_rgba(16,185,129,0.3)]",style:{clipPath:`inset(${100-f}% 0 0 0)`}}),c.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:c.jsx("div",{className:`size-20 rounded-2xl bg-black/40 backdrop-blur-md flex items-center justify-center transition-all duration-500 ${s?"opacity-100":"opacity-0 scale-75"}`,children:c.jsx("span",{className:"material-symbols-outlined text-4xl text-white",children:"lock"})})})]}),c.jsxs("div",{className:"mt-8 text-center relative z-20",children:[c.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2",children:"Current Balance"}),c.jsxs("div",{className:"flex items-baseline justify-center gap-2",children:[c.jsxs("span",{className:"text-5xl font-display font-bold text-emerald-400 drop-shadow-lg",children:["$",n.currentEF.toLocaleString()]}),c.jsxs("span",{className:"text-xl text-gray-600 font-medium",children:["/ $",n.starterEFGoal.toLocaleString()]})]})]})]}),c.jsxs("div",{className:"p-6 space-y-4 pb-12",children:[c.jsxs("div",{className:"bg-surface-dark border border-white/10 rounded-2xl p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("span",{className:"material-symbols-outlined text-emerald-500 text-sm",children:"shield"}),c.jsx("span",{className:"text-emerald-500 text-[10px] font-bold uppercase tracking-wider",children:"Fortress Secured"})]}),c.jsx("h3",{className:"text-white font-bold text-sm",children:"Level 1: Starter Fund"}),c.jsx("p",{className:"text-gray-500 text-xs",children:"Complete & Protected"})]}),c.jsx("div",{className:"size-10 rounded-full border-2 border-emerald-500 flex items-center justify-center text-emerald-500 shadow-glow-emerald",children:c.jsx("span",{className:"material-symbols-outlined",children:"check"})})]}),c.jsxs("div",{className:"bg-surface-dark border border-white/10 rounded-2xl p-1 relative overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-bold text-sm",children:"Withdrawal Access"}),c.jsxs("p",{className:`text-[10px] font-bold uppercase tracking-wider ${s?"text-emerald-500":"text-red-500"}`,children:["Status: ",s?"Untouchable":"Unlocked"]})]}),c.jsx("button",{onClick:p,className:`w-14 h-8 rounded-full transition-colors relative ${s?"bg-emerald-500/20":"bg-red-500/20"}`,children:c.jsx("div",{className:`absolute top-1 size-6 rounded-full shadow-sm transition-all duration-300 flex items-center justify-center ${s?"left-7 bg-emerald-500":"left-1 bg-red-500"}`,children:c.jsx("span",{className:"material-symbols-outlined text-[14px] text-white",children:s?"lock":"lock_open"})})})]}),c.jsxs("div",{className:"bg-black/40 py-2 px-4 flex justify-between items-center border-t border-white/5",children:[c.jsx("span",{className:"text-[10px] font-mono text-gray-600 uppercase",children:"SYS.LOCK.V4.2"}),c.jsxs("div",{className:"flex items-center gap-1.5",children:[c.jsx("div",{className:"size-1.5 rounded-full bg-emerald-500 animate-pulse"}),c.jsx("span",{className:"text-[10px] font-mono text-gray-500 uppercase",children:"Active"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"bg-surface-dark border border-white/5 rounded-xl p-3 text-center",children:[c.jsx("span",{className:"block text-[10px] text-gray-500 uppercase font-bold",children:"Interest Rate"}),c.jsx("span",{className:"block text-white font-bold text-lg",children:"4.25% APY"})]}),c.jsxs("div",{className:"bg-surface-dark border border-white/5 rounded-xl p-3 text-center",children:[c.jsx("span",{className:"block text-[10px] text-gray-500 uppercase font-bold",children:"Last Deposit"}),c.jsx("span",{className:"block text-emerald-400 font-bold text-lg",children:"+$250.00"})]})]})]}),c.jsx(Q2,{isOpen:o,onClose:()=>l(!1),onUnlock:g}),c.jsx(Y2,{isOpen:u,onClose:()=>d(!1),amount:n.currentEF})]}):null},J2=async(t,e,n,r,s)=>{if(n<=0)throw new Error("Expense amount must be positive");try{await $x(ge,async i=>{const o=qe(ge,"users",t,"sinkingFunds",e),l=await i.get(o);if(!l.exists())throw new Error("Sinking Fund does not exist");const u=l.data().currentAmount||0,d=qe(Ot(ge,"users",t,"transactions"));i.set(d,{date:ve.fromDate(s),amount:-n,type:"expense",description:r||"Expense",relatedId:e,category:l.data().name||"Sinking Fund"}),i.update(o,{currentAmount:u-n})})}catch(i){throw console.error("Failed to log expense:",i),i}},Z2=({isOpen:t,onClose:e})=>{const{user:n}=xr(),{sinkingFunds:r}=Pt(),[s,i]=O.useState("0"),[o,l]=O.useState(null),[u,d]=O.useState(""),[f,p]=O.useState(new Date().toISOString().split("T")[0]),[g,_]=O.useState(!1);if(O.useEffect(()=>{t&&(i("0"),d(""),p(new Date().toISOString().split("T")[0]),r.length>0&&!o&&l(r[0].id))},[t]),!t)return null;const I=parseFloat(s),T=r.find(V=>V.id===o),N=(T==null?void 0:T.currentAmount)||0,E=N-I,w=E<0,k=V=>{V==="backspace"?i(U=>U.length>1?U.slice(0,-1):"0"):V==="."?s.includes(".")||i(U=>U+"."):i(U=>U==="0"?V:U+V)},j=async()=>{if(!(!n||!o||I<=0)){_(!0);try{await J2(n.uid,o,I,u,new Date(f)),e()}catch(V){console.error(V)}finally{_(!1)}}};return c.jsxs("div",{className:"fixed inset-0 bg-black/95 flex flex-col z-50 animate-in slide-in-from-bottom duration-300",children:[c.jsxs("div",{className:"flex items-center justify-between p-6",children:[c.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:"Cancel"}),c.jsx("span",{className:"font-bold text-white",children:w?"Add Transaction":"NEW ENTRY"}),c.jsx("button",{onClick:()=>i("0"),className:`text-sm font-bold transition-colors ${w?"text-primary":"text-emerald-500"}`,children:w?"Add":"Clear"})]}),c.jsxs("div",{className:"flex-1 flex flex-col items-center pt-8 px-6",children:[c.jsxs("div",{className:"text-6xl font-bold text-white mb-4 tracking-tight",children:["$",s]}),T&&c.jsxs("div",{className:"bg-white/5 rounded-full px-4 py-1.5 flex items-center gap-3 text-sm font-medium border border-white/5 mb-8",children:[c.jsxs("span",{className:"text-gray-400 line-through",children:["$",N.toFixed(2)]}),c.jsx("span",{className:"material-symbols-outlined text-xs text-gray-500",children:"arrow_forward"}),c.jsxs("span",{className:`${w?"text-red-500":"text-emerald-500"} font-bold`,children:["$",E.toFixed(2)]})]}),w&&c.jsxs("div",{className:"w-full bg-red-500/10 border border-red-500/20 rounded-2xl p-4 mb-6 flex items-center justify-between animate-in zoom-in duration-300",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"size-10 rounded-full bg-red-500/20 flex items-center justify-center text-red-500",children:c.jsx("span",{className:"material-symbols-outlined",children:"sync_problem"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-white font-bold text-sm",children:"Needs Reallocation"}),c.jsxs("p",{className:"text-red-400 text-xs",children:["Cover the $",Math.abs(E).toFixed(2)," shortage"]})]})]}),c.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]}),c.jsx("div",{className:"w-full overflow-x-auto pb-4 mb-4 custom-scrollbar",children:c.jsx("div",{className:"flex gap-3",children:r.map(V=>c.jsxs("button",{onClick:()=>l(V.id),className:`flex flex-col items-center gap-2 p-3 rounded-xl min-w-[80px] border transition-all ${o===V.id?"bg-emerald-900/20 border-emerald-500/50":"bg-surface-dark border-white/5 hover:border-white/10"}`,children:[c.jsx("div",{className:`size-10 rounded-full flex items-center justify-center ${o===V.id?"bg-emerald-500 text-white shadow-glow-primary":"bg-white/5 text-gray-400"}`,children:c.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"savings"})}),c.jsx("span",{className:`text-[10px] font-bold truncate w-full text-center ${o===V.id?"text-emerald-400":"text-gray-500"}`,children:V.name})]},V.id))})}),c.jsxs("div",{className:"flex gap-3 w-full mb-6",children:[c.jsxs("div",{className:"flex-1 bg-surface-dark border border-white/5 rounded-xl px-4 py-3",children:[c.jsx("label",{className:"block text-[10px] text-emerald-500 font-bold uppercase mb-1",children:"Memo"}),c.jsx("input",{type:"text",value:u,onChange:V=>d(V.target.value),className:"bg-transparent text-white text-sm w-full outline-none placeholder-gray-600",placeholder:"What's this for?"})]}),c.jsxs("div",{className:"w-1/3 bg-surface-dark border border-white/5 rounded-xl px-4 py-3 relative",children:[c.jsx("label",{className:"block text-[10px] text-gray-500 font-bold uppercase mb-1",children:"Date"}),c.jsx("input",{type:"date",value:f,onChange:V=>p(V.target.value),className:"bg-transparent text-white text-sm w-full outline-none [&::-webkit-calendar-picker-indicator]:opacity-0 absolute inset-0 pl-4 pt-6 z-10"}),c.jsx("span",{className:"text-white text-sm",children:f===new Date().toISOString().split("T")[0]?"Today":f.split("-").slice(1).join("/")})]})]})]}),c.jsxs("div",{className:"bg-surface-dark border-t border-white/5 p-6 pb-12",children:[c.jsxs("div",{className:"grid grid-cols-3 gap-4 max-w-sm mx-auto",children:[[1,2,3,4,5,6,7,8,9,".",0].map(V=>c.jsx("button",{onClick:()=>k(V.toString()),className:"text-2xl font-medium text-white h-16 rounded-full hover:bg-white/5 transition-colors",children:V},V)),c.jsx("button",{onClick:()=>k("backspace"),className:"flex items-center justify-center h-16 rounded-full hover:bg-white/5 transition-colors text-gray-400",children:c.jsx("span",{className:"material-symbols-outlined",children:"backspace"})})]}),c.jsx("button",{onClick:j,disabled:g||I<=0,className:"absolute bottom-10 right-8 size-16 rounded-2xl bg-emerald-500 text-white shadow-lg shadow-emerald-500/20 flex items-center justify-center active:scale-95 transition-all disabled:opacity-50 disabled:grayscale",children:g?c.jsx("span",{className:"material-symbols-outlined animate-spin",children:"sync"}):c.jsx("span",{className:"material-symbols-outlined text-3xl",children:"check"})})]})]})},ej=()=>{const{sinkingFunds:t,settings:e}=Pt(),[n,r]=O.useState(!1),[s,i]=O.useState(!1),o=e.starterEFGoal>0?e.currentEF/e.starterEFGoal*100:0,[l,u]=O.useState(!1),[d,f]=O.useState(!1),p=t.filter(T=>T.type==="annual"),g=t.filter(T=>T.type!=="annual"),_=p.reduce((T,N)=>T+N.targetAmount,0),I=p.reduce((T,N)=>T+N.currentAmount,0);return c.jsxs("div",{className:"min-h-screen bg-background-dark p-4 pb-24 font-sans text-white",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6 pt-2",children:[c.jsx("button",{className:"p-2 rounded-full bg-surface-dark border border-white/5 text-gray-400 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),c.jsx("h1",{className:"text-lg font-bold",children:"Sinking Funds"}),c.jsx("button",{onClick:()=>u(!0),className:"size-8 rounded-full bg-emerald-500/20 text-emerald-400 flex items-center justify-center hover:bg-emerald-500/30 transition-colors",children:c.jsx("span",{className:"material-symbols-outlined text-lg",children:"calendar_add_on"})})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[c.jsx("h2",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Annual Overview"}),c.jsx("span",{className:"text-[10px] font-bold text-emerald-400 bg-emerald-500/10 px-2 py-0.5 rounded",children:"+12% vs Last Year"})]}),c.jsxs("div",{className:"bg-surface-dark border border-white/5 rounded-2xl p-6 relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:c.jsx("span",{className:"material-symbols-outlined text-8xl",children:"calendar_month"})}),c.jsxs("div",{className:"mb-6 relative z-10",children:[c.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase mb-1",children:"Total Allocated"}),c.jsxs("h3",{className:"text-3xl font-display font-bold text-white mb-1",children:["$",I.toLocaleString()," ",c.jsxs("span",{className:"text-lg text-gray-500 font-normal",children:["/ $",_.toLocaleString()]})]})]}),c.jsx("div",{className:"space-y-4 relative z-10",children:p.length===0?c.jsxs("div",{className:"text-center py-4 bg-black/20 rounded-xl border border-dashed border-white/10",children:[c.jsx("p",{className:"text-gray-500 text-xs",children:"No annual bills set up."}),c.jsx("button",{onClick:()=>u(!0),className:"text-emerald-400 text-xs font-bold mt-2",children:"Add One"})]}):p.map(T=>{const N=T.targetAmount,E=T.currentAmount,w=Math.min(E/N*100,100),k=60,j=w<k,V=j?Math.round(k/100*N-E):0;return c.jsxs("div",{className:"bg-black/20 p-3 rounded-xl border border-white/5",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-gray-400 text-sm",children:T.icon||"calendar_clock"}),c.jsx("span",{className:"font-bold text-sm text-white",children:T.name})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[j&&c.jsx("span",{className:"material-symbols-outlined text-amber-500 text-[10px]",children:"warning"}),c.jsx("span",{className:"text-[10px] text-gray-500",children:T.dueDate?`Due ${new Date(T.dueDate).toLocaleDateString(void 0,{month:"short",day:"numeric"})}`:"No Due Date"})]})]}),c.jsxs("div",{className:"relative h-2 bg-black/40 rounded-full w-full overflow-hidden mb-1",children:[c.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full transition-all duration-500 ${j?"bg-amber-500":"bg-emerald-500"}`,style:{width:`${w}%`}}),c.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white/30 z-10",style:{left:`${k}%`}})]}),c.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[c.jsxs("span",{className:`${j?"text-amber-500":"text-emerald-500"}`,children:["$",E," saved"]}),j?c.jsxs("span",{className:"text-amber-500 font-bold",children:["Target gap: -$",V]}):c.jsx("span",{className:"text-emerald-500 font-bold",children:"On Track"})]})]},T.id)})})]})]}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h2",{className:"text-xs font-bold text-gray-500 uppercase tracking-widest mb-2 px-1",children:"Lifestyle & Savings"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[g.map(T=>{const N=T.targetAmount>0?T.currentAmount/T.targetAmount*100:0;return c.jsxs("div",{className:"bg-surface-dark border border-white/5 rounded-2xl p-4 flex flex-col items-center justify-center gap-3 shadow-md hover:border-white/10 transition-colors",children:[c.jsx(gh,{percentage:N,size:60,color:"#10B981",icon:"savings"}),c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"font-bold text-sm truncate w-24",children:T.name}),c.jsxs("p",{className:"text-xs text-gray-400",children:[c.jsxs("span",{className:"text-emerald-400 font-bold",children:["$",Math.round(T.currentAmount)]}),c.jsx("span",{className:"text-white/20",children:" / "}),c.jsxs("span",{children:["$",T.targetAmount]})]})]})]},T.id)}),c.jsxs("button",{onClick:()=>r(!0),className:"bg-surface-dark border-2 border-dashed border-white/5 rounded-2xl p-4 flex flex-col items-center justify-center gap-2 text-gray-500 hover:text-white hover:border-white/20 transition-all",children:[c.jsx("div",{className:"size-10 rounded-full bg-white/5 flex items-center justify-center",children:c.jsx("span",{className:"material-symbols-outlined text-xl",children:"add"})}),c.jsx("span",{className:"font-medium text-xs",children:"New Goal"})]})]})]}),c.jsxs("div",{onClick:()=>f(!0),className:"bg-surface-dark border border-white/5 rounded-2xl p-5 mb-6 flex items-center justify-between shadow-md cursor-pointer hover:bg-surface-dark/80 transition-colors group",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-white group-hover:text-emerald-400 transition-colors",children:"Emergency Fund"}),c.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Goal: $",e.starterEFGoal.toLocaleString()]}),c.jsxs("p",{className:"text-emerald-400 text-xl font-display font-bold",children:["$",e.currentEF.toLocaleString()]}),c.jsxs("p",{className:"text-xs text-gray-600",children:[" / $",e.starterEFGoal.toLocaleString()]})]}),c.jsxs("div",{className:"relative",children:[c.jsx(gh,{percentage:o,size:64,color:"#10B981",icon:"medical_services"}),c.jsx("div",{className:"absolute -bottom-1 -right-1 bg-surface-dark rounded-full p-1 border border-white/10",children:c.jsx("span",{className:"material-symbols-outlined text-[16px] text-gray-400",children:"lock"})})]})]}),c.jsx("div",{className:"fixed bottom-24 right-4 z-40",children:c.jsx("button",{onClick:()=>i(!0),className:"flex items-center justify-center size-14 rounded-full bg-emerald-500 text-white shadow-lg shadow-emerald-500/30 hover:scale-105 active:scale-95 transition-transform",children:c.jsx("span",{className:"material-symbols-outlined text-[28px]",children:"add"})})}),c.jsx(iE,{isOpen:n,onClose:()=>r(!1)}),c.jsx(K2,{isOpen:l,onClose:()=>u(!1)}),c.jsx(Z2,{isOpen:s,onClose:()=>i(!1)}),c.jsx(X2,{isOpen:d,onClose:()=>f(!1)})]})},tj=async(t,e,n)=>{const r=new Date(e.getFullYear(),e.getMonth(),1),s=new Date(e.getFullYear(),e.getMonth()+1,0,23,59,59),i=Ot(ge,"users",t,"transactions"),o=DC(i,Gy("date",">=",ve.fromDate(r)),Gy("date","<=",ve.fromDate(s))),d=(await LC(o)).docs.map(N=>({id:N.id,...N.data()})).filter(N=>N.type==="reallocation_out").map(N=>{const E=n.find(k=>k.id===N.relatedId),w=N.description.replace("Transferred to ","");return{id:N.id,sourceName:(E==null?void 0:E.name)||"Unknown Fund",targetName:w,amount:Math.abs(N.amount)}}).sort((N,E)=>E.amount-N.amount).slice(0,3),f=d.reduce((N,E)=>N+E.amount,0),p=d.length*5,g=Math.floor(f/10);let _=100-p-g;_=Math.max(0,_);const I=[];if(d.length>0){const N=d[0];I.push({id:"sugg_1",fundName:N.sourceName,type:"decrease",amount:20,reason:"Leftover budget moved often"})}const T=n.find(N=>N.currentAmount<N.targetAmount*.1&&N.targetAmount>0);return T&&I.push({id:"sugg_2",fundName:T.name,type:"increase",amount:50,reason:"Consistently tight budget"}),{month:e.toLocaleString("default",{month:"long",year:"numeric"}),accuracyScore:_,reallocations:d,suggestions:I}},nj=()=>{const{user:t}=xr(),{sinkingFunds:e}=Pt(),[n,r]=O.useState(null),[s,i]=O.useState(!0);return O.useEffect(()=>{(async()=>{if(t)try{const l=await tj(t.uid,new Date,e);r(l)}catch(l){console.error("Failed to analyze",l)}finally{i(!1)}})()},[t,e]),s?c.jsx("div",{className:"p-8 text-center text-gray-500",children:"Generating Report..."}):n?c.jsxs("div",{className:"min-h-screen bg-background-dark p-4 pb-24 font-sans text-white",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8 pt-2",children:[c.jsx("button",{className:"p-2 rounded-full bg-surface-dark border border-white/5 text-gray-400 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:"Monthly Wrap-up"}),c.jsx("h2",{className:"text-xl font-bold text-white",children:n.month})]}),c.jsx("button",{className:"p-2 rounded-full bg-surface-dark border border-white/5 text-gray-400 hover:text-white transition-colors",children:c.jsx("span",{className:"material-symbols-outlined",children:"history"})})]}),c.jsxs("div",{className:"bg-surface-dark border border-white/5 rounded-3xl p-8 mb-8 flex flex-col items-center justify-center shadow-2xl relative overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-white/2 to-transparent pointer-events-none"}),c.jsx("h3",{className:"text-lg font-bold text-white mb-6",children:"November Accuracy"}),c.jsxs("div",{className:"scale-125 mb-4 relative",children:[c.jsx(gh,{percentage:n.accuracyScore,size:180,strokeWidth:12,color:n.accuracyScore>80?"#10B981":"#F59E0B"}),c.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pt-2",children:[c.jsxs("span",{className:"text-5xl font-bold text-white tracking-tighter",children:[n.accuracyScore,"%"]}),c.jsxs("div",{className:`mt-2 px-3 py-1 rounded-full text-[10px] font-bold uppercase flex items-center gap-1 ${n.accuracyScore>80?"bg-emerald-500/20 text-emerald-400":"bg-amber-500/20 text-amber-400"}`,children:[c.jsx("span",{className:"material-symbols-outlined text-xs",children:n.accuracyScore>80?"check_circle":"warning"}),n.accuracyScore>80?"On Track":"Needs Review"]})]})]}),c.jsx("p",{className:"text-center text-gray-400 text-sm max-w-[200px] leading-relaxed",children:n.accuracyScore>80?"You stayed within range for most categories. A solid month of disciplined spending!":"Detailed planning needed. Several reallocations occurred this month."})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4 px-2",children:[c.jsx("span",{className:"material-symbols-outlined text-gray-400 -rotate-90",children:"alt_route"}),c.jsx("h3",{className:"font-bold text-white",children:"Top Reallocations"})]}),c.jsx("div",{className:"bg-surface-dark border border-white/5 rounded-2xl p-2 space-y-2",children:n.reallocations.length===0?c.jsx("div",{className:"p-6 text-center text-gray-500 text-sm",children:"No reallocations this month. Great planning!"}):n.reallocations.map(o=>c.jsxs("div",{className:"p-4 rounded-xl bg-white/2 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"size-10 rounded-full bg-surface-highlight flex items-center justify-center text-gray-300",children:c.jsx("span",{className:"material-symbols-outlined",children:o.sourceName.includes("Dining")?"restaurant":o.sourceName.includes("Cloth")?"checkroom":"savings"})}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold text-white",children:[c.jsx("span",{children:o.sourceName}),c.jsx("span",{className:"material-symbols-outlined text-xs text-gray-500",children:"arrow_forward"}),c.jsx("span",{className:"text-emerald-400",children:o.targetName})]}),c.jsx("p",{className:"text-xs text-gray-500",children:o.reason||"Reallocated funds"})]})]}),c.jsxs("span",{className:"font-bold text-white",children:["$",o.amount]})]},o.id))})]}),c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"material-symbols-outlined text-amber-500",children:"tune"}),c.jsx("h3",{className:"font-bold text-white",children:"Calibration"})]}),c.jsx("span",{className:"text-[10px] font-bold text-amber-500 bg-amber-500/10 px-2 py-1 rounded border border-amber-500/20 uppercase",children:"Suggested Tweaks"})]}),c.jsxs("div",{className:"space-y-3",children:[n.suggestions.map(o=>c.jsxs("div",{className:"bg-surface-dark border border-white/5 rounded-2xl p-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"size-10 rounded-lg bg-white/5 flex items-center justify-center text-gray-400",children:c.jsx("span",{className:"material-symbols-outlined",children:o.fundName.includes("Groc")?"shopping_cart":"movie"})}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-white text-sm",children:o.fundName}),c.jsx("p",{className:"text-xs text-gray-500",children:o.reason})]})]}),c.jsxs("button",{className:`px-4 py-2 rounded-lg font-bold text-xs flex items-center gap-1 transition-colors ${o.type==="increase"?"bg-amber-500/10 text-amber-500 hover:bg-amber-500/20":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[o.type==="increase"?`Add $${o.amount}`:`Reduce $${o.amount}`,c.jsx("span",{className:"material-symbols-outlined text-[14px]",children:o.type==="increase"?"add_circle":"remove_circle"})]})]},o.id)),n.suggestions.length===0&&c.jsx("div",{className:"p-6 text-center text-gray-500 text-sm bg-surface-dark border border-white/5 rounded-2xl",children:"No calibration needed. Your budget is optimized!"})]})]}),c.jsxs("button",{className:"w-full bg-emerald-500 hover:bg-emerald-400 text-white font-bold py-4 rounded-xl shadow-lg shadow-emerald-500/20 flex items-center justify-center gap-2 transition-all active:scale-95",children:[c.jsx("span",{className:"material-symbols-outlined",children:"rocket_launch"}),c.jsx("span",{children:"Launch Next Month's Plan"})]})]}):c.jsx("div",{className:"p-8 text-center text-gray-500",children:"No data available."})};function oE(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=oE(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function uv(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=oE(t))&&(r&&(r+=" "),r+=e);return r}const rj=()=>{const t=pf(),e=_u(),n=s=>e.pathname===s,r=[{path:"/",icon:"dashboard",label:"Magic"},{path:"/budget",icon:"account_balance_wallet",label:"Budget"},{path:"/funds",icon:"savings",label:"Funds"},{path:"/reports",icon:"pie_chart",label:"Reports"},{path:"/settings",icon:"settings",label:"Settings"}];return c.jsx("nav",{className:"fixed bottom-0 w-full h-[88px] bg-surface-dark/95 backdrop-blur-lg border-t border-white/5 pb-5 pt-3 z-40",children:c.jsx("div",{className:"grid grid-cols-4 h-full",children:r.map(s=>{const i=n(s.path);return c.jsxs("button",{onClick:()=>t(s.path),className:"flex flex-col items-center justify-center gap-1 group",children:[c.jsx("span",{className:uv("material-symbols-outlined text-[24px] transition-colors",i?"text-primary bg-primary/10 px-4 py-1 rounded-full":"text-gray-500 group-hover:text-white"),children:s.icon}),c.jsx("span",{className:uv("text-[10px] font-medium transition-colors",i?"text-primary font-bold":"text-gray-500 group-hover:text-white"),children:s.label})]},s.path)})})})},Vi=({children:t})=>c.jsxs("div",{className:"min-h-screen bg-background-dark text-white relative",children:[c.jsx("main",{className:"h-full pb-[100px]",children:t}),c.jsx(rj,{})]});function cs({children:t}){const{user:e,loading:n}=xr();return n?c.jsx("div",{className:"min-h-screen bg-background-dark flex items-center justify-center text-white",children:"Loading..."}):e?c.jsx(c.Fragment,{children:t}):c.jsx(gf,{to:"/login",replace:!0})}function sj(){return c.jsx(GC,{children:c.jsx(sS,{children:c.jsx("div",{className:"min-h-screen bg-background-dark font-sans text-white",children:c.jsxs(O_,{children:[c.jsx($t,{path:"/login",element:c.jsx(KC,{})}),c.jsx($t,{path:"/",element:c.jsx(cs,{children:c.jsx(Vi,{children:c.jsx($2,{})})})}),c.jsx($t,{path:"/settings",element:c.jsx(cs,{children:c.jsx(Vi,{children:c.jsx(W2,{})})})}),c.jsx($t,{path:"/funds",element:c.jsx(cs,{children:c.jsx(Vi,{children:c.jsx(ej,{})})})}),c.jsx($t,{path:"/onboarding/*",element:c.jsx(cs,{children:c.jsx(NR,{})})}),c.jsx($t,{path:"/budget",element:c.jsx(cs,{children:c.jsx(Vi,{children:c.jsx(H2,{})})})}),c.jsx($t,{path:"/reports",element:c.jsx(cs,{children:c.jsx(Vi,{children:c.jsx(nj,{})})})})]})})})})}Jc.createRoot(document.getElementById("root")).render(c.jsx(xh.StrictMode,{children:c.jsx(sj,{})}));
